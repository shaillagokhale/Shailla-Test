<apex:page id="page" standardController="CPF_Report__c" extensions="CPFReport" sidebar="false">
    <apex:stylesheet value="{!URLFOR($Resource.GoalsJs, 'assets/css/bootstrap.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.GoalsJs, 'assets/css/bootstrap-responsive.css')}"/>
    <apex:includeScript value="{!$Resource.jquery142}" />
   <style>
        .DiaglouePanelButtonSaveAndCancel{
            width: 80px !important;
        }
        .DiaglouePanelTextarea{
            resize: none !important;
            width: 300px !important;
        }
        .smalltd{
            Background:#333399 !important;
        }
        .smalltr{
            height:14px !important;
            Background:#333399 !important;
        }
        .inputBox{
            width:80px !important;
        }
        .headingFontAndColor{
            font-size:10pt !important;
            Background:#99ccff !important;
        }
        .LineThColor{
            Background:#ccccff !important;
        }
        .ColorGraytd{
            Background:#c0c0c0 !important;
            text-align:center !important;
        }
        .dialougeButtonColor{
            background-image:none !important;
            font-family:Arial !important;
            color:#000000 !important;
            font-size:12px !important;
            padding:7px !important;
            text-decoration:none !important;
            border-radius:0px !important;
            border:solid #00000 2px !important;
            background: -moz-linear-gradient(top, #ffcc99, #ffcc99) !important;
            vertical-align:bottom !important;
            min-width: 71px;
        }
        .YellowField{
            Background:#ffffcc !important;
        }
        .tableBorder{
            border-style:solid !important;
            border-width:1px !important;
        }
        .borderNone{
            border-top:none !important;
            border-right:none !important;
            border-bottom:none !important;
            
        }
        .tableCss{
            border-right:none !important;
            width: 100% !important;
        }
        .helpTextPopup{ 
            padding:10px !important;
            /*background: #66CCFF !important; */
            background: white !important;
            /*border: 4px solid #c2e1f5 !important;*/
            border: 2px solid #000000 !important;
            z-index: 97 !important;   
            position: absolute !important; 
            left:10% !important;
            margin-left: 238px !important;
            margin-top: -82px !important;
            /*width:40% !important;*/
        }
        .tableCss{
            border:none !important;
            border-collapse:collapse !important;    
        }
        .tdcenter{
            text-align:center !important;
        }
        .custAssumptionPopup{
            background-color: white !important;
            border-width: 0px !important;
            border-radius:10px !important;
            border-style: solid !important;
            /*z-index: 9999 !important;*/
            z-index: 51 !important;
            left: 57% !important;
            padding:10px !important;
            position: absolute !important;
            margin-top:-140px;
        }
        .popupAssumptionBackground{
            background-color:black !important;
            opacity: 0.20 !important;
            filter: alpha(opacity = 20) !important;
            position: absolute !important;
            width: 100% !important;
            height: 100% !important;
            /*z-index: 9998 !important;*/
            z-index: 50 !important;
            top: 0 !important;
            left: 0 !important;
           
        }
        .custPopup{
            background-color: #ededed;
            border-width: 0px;
            border-radius:10px;
            border-style: solid;
            z-index: 9999;
            left: 30%;
            margin-top:-50px;
            padding:10px;
            position: absolute;
            width:300px;
            height:130px;
        }
        .popupBackground{
            background-color:black;
            opacity: 0.50;
            filter: alpha(opacity = 20);
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 9998;
            top: 0;
            left: 0;
        }
        .popupButtonYes{
            background-color: #49C739 !important;
            background-image: none !important;
            color: white !important;
            font-size: 12.9pt !important;
            font-weight: bold !important;
            height: 30px !important;;
            width: 90px !important;;
        }
        .popupButtonCancel{
            background-color: #d82516 !important;
            background-image: none !important;
            color: white !important;
            font-size: 12.9pt !important;
            font-weight: bold !important;
            height: 30px !important;;
            width: 90px !important;;
        }
        .deletePopup{
            background-color: #EDEDED !important;
            border-top: 0px !important;
            text-align:center !important;
        }
        .deletePopupCancel{
            background-color: #EDEDED !important;
            border-top: 0px !important;
            text-align:left !important;
        }
        textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input{
            width: 90%;
        }
        
        .table th, .table td {
            border-top: 0px !important;
        }
        table.curvedEdges_collapse
        { 
            border-right:1px solid #A6A6A6;
            border-bottom:1px solid #A6A6A6; 
            border:1px solid #A6A6A6;
            -webkit-border-radius:3px;
            -moz-border-radius:3px;
            -ms-border-radius:3px;
            -o-border-radius:3px;
            border-radius:3px;
        }   
        
        .arrow-expand 
        {
            width: 0; 
            height: 0; 
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid black;
            
        }
        table.curvedEdges_expand
        { 
            background-color:#fcc977;
            border-right:1px solid #A6A6A6;
            border-bottom:1px solid #A6A6A6; 
            border:1px solid #A6A6A6;
            -webkit-border-radius:3px;
            -moz-border-radius:3px;
            -ms-border-radius:3px;
            -o-border-radius:3px;
            border-radius:3px;
        }  
        
        .arrow-collapse 
        {
            width: 0; 
            height: 0; 
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
            border-left: 5px solid black;
        }
        .headingCollapse{
            background-color: #0066BB !important;
            border: 1px solid #E0E3E5 !important;
            color: #FFFFFF !important;
            font-weight: bold !important;
            white-space: normal !important;
            padding: 4px !important;
        }
        .custPopupHistory{
            background-color: white;
            border-width: 0px;
            border-radius:10px;
            border-style: solid;
            /*z-index: 9999;*/
            z-index: 51;
            left: 12%;
            padding:10px;
            position: absolute;
            top:50%;
        }
        .popupBackgroundHistory{
            background-color:black;
            opacity: 0.20;
            filter: alpha(opacity = 20);
            position: absolute;
            width: 100%;
            height: 100%;
            /*z-index: 9998;*/
            z-index: 50;
            top: 0;
            left: 0;
           
        }   
        .webkitright {
            text-align: right;
            white-space: nowrap;
        };
        .headerSearchContainer {
            margin-top: -20px !important;
        }    
        .phHeaderCustomLogo .headerSearchLeftRoundedCorner {
            margin-top: -20px !important;
        }  
        .link{
            color:#2E7BBB;
            text-decoration:underline;
        }
        .h3{
            display: inline-table;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            margin-top: 15px;
            line-height: 20px;
        }
        .h4 {
            font-size:18px;
            font-weight:bold;
            line-height:18px;
        }
        
    </style> 
    <script>
      $(document).ready(function () {
      
          $('label.tree-toggler').click(function () {
              $(this).parent().children('ul.tree').toggle(300);
          });
           
           if ( $.browser.webkit ) {
           
            $("#phHeaderLogoImage").parents("table").find("td").removeClass("right").addClass("webkitright");  
            
           };
      });
      window.onload = setFocus() {
          document.getElementById("hiddenElement").focus();
      }
    </script>
    
    <span class="h3">
        {!$Label.Financial_Gap_Analysis_CPF} - {!CPF_Report__c.Country__r.Name}
    </span>
    <span class="pull-right h4">
         <img src="/img/func_icons/util/info16.png" style="padding-bottom:5px"/>
         <!-- TCS 10/09/2014 Profile Access Setting
         <a href="{!if(CONTAINS($Profile.Name,'PR')||CONTAINS($Profile.Name,'LFA')||CONTAINS($Profile.Name,'CM')||CONTAINS($Profile.Name,'CCM'),'/GM','')}/apex/CN_Guidance_New?Id={!strGuidanceId}&lang={!strLanguage}" target="_blank" class="link h4">{!$Label.See_Help}</a>-->
         <a href="{!if(blnExternalPro == true,'/GM','')}/apex/CN_Guidance_New?Id={!strGuidanceId}&lang={!strLanguage}" target="_blank" class="link h4">{!$Label.See_Help}</a>
    </span>
    <!--<div class="margin20">-->
    
    <chatter:feedWithFollowers id="chatterFeed" entityId="{!CPF_Report__c.Id}"/>
    <br/>
    <!--</div>-->
    <apex:form id="frm">
    <apex:actionFunction action="{!RefreshLineD}" name="actRefreshLineD" status="Processing" reRender="frm" oncomplete="switchMenu('LineDSection','page:frm:minusimage','page:frm:plusimage','true');"/>
    <style>
        .ProcessingBackground
        {
            background-color: black !important;
            opacity: 0.50 !important;
            filter: alpha(opacity = 50) !important;
            width: 100% !important;
            height: 100% !important;
            position: fixed !important;
            z-index: 9999 !important;
            top:0 !important;
            left:0 !important;
        }
        .Processing
        {
            z-index: 9999 !important;
            left: 50% !important;
            top: 50% !important;
            text-align: center !important;
            position: fixed !important;
        }
        .buttonStyle3{
            background-color: #5281bd;
            background-image: linear-gradient(to bottom, #5281bd, #5281bd);
            background-repeat: repeat-x;
            border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
            color: #FFFFFF;
            text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
        }
        .btnStyle {
            -moz-border-bottom-colors: none;
            -moz-border-left-colors: none;
            -moz-border-right-colors: none;
            -moz-border-top-colors: none;
            text-decoration:none !important;;
            color:white !important;
            border-image: none;
            border-style: solid;
            border-width: 1px;
            box-shadow: 0 1px 0 rgba(255, 255, 255, 0.2) inset, 0 1px 2px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            display: inline-block;
            line-height: 20px;
            margin-bottom: 0;
            text-align: center;
            vertical-align: middle;
        }    
        </style> 
        <div id="divProcessing" style="display:none;">
            <div class="ProcessingBackground"></div>
            <div class="Processing">
                <apex:image alt="Processing" url="{!$Resource.LoadingCircle}" />
            </div>
        </div>         
        <apex:actionStatus id="Processing" onstart="document.getElementById('divProcessing').style.display = '';" onstop="document.getElementById('divProcessing').style.display = 'none';">                            
        </apex:actionStatus>
        <apex:pageBlock id="pageB">
            <apex:pageBlockButtons location="top">
            <!-- TCS 10/09/2014 Profile Access Setting
                <apex:commandButton value="{!$Label.Save_Draft}" action="{!SaveRecords}" reRender="btncancel" status="Processing" rendered="{!!blnReadOnly}"/>
                <apex:commandButton value="{!$Label.Save_Return}" action="{!SaveRecordsAndReturnCPF}" rendered="{!!blnReadOnly}"/>-->
                <apex:commandButton value="{!$Label.Save_Draft}" action="{!SaveRecords}" reRender="btncancel" status="Processing" rendered="{!blnSaveDraft}"/>
                <apex:commandButton value="{!$Label.Save_Return}" action="{!SaveRecordsAndReturnCPF}" rendered="{!blnSaveReturn}"/>
                <apex:commandButton id="btncancel" value="{!$Label.Cancel}" action="/apex/CNOverview?id={!strCNId}"/>
               
                <apex:commandButton id="exportexcel" value="Input Form" action="/apex/Exportexcel?id={!strCNId}"/>
                <!-- TCS 10/09/2014 Profile Access Setting
                <apex:commandlink styleClass="btnStyle TGFbtn-mini buttonStyle3" target="_blank" style="margin-left:50px" action="{!if(CONTAINS($Profile.Name,'CM')||CONTAINS($Profile.Name,'PR')||CONTAINS($Profile.Name,'LFA'),'/GM','')}{!CASE(strLanguage,'fr','/servlet/servlet.FileDownload?file=015b0000000bfYE','ru','/servlet/servlet.FileDownload?file=015b0000000bfYE','es','/servlet/servlet.FileDownload?file=015b0000000bfYE','/servlet/servlet.FileDownload?file=015b0000000bfYE')}">-->
                <apex:commandlink styleClass="btnStyle TGFbtn-mini buttonStyle3" target="_blank" style="margin-left:50px" action="{!if(blnExternalPro == true,'/GM','')}{!CASE(strLanguage,'fr','/servlet/servlet.FileDownload?file=015b0000000bfYE','ru','/servlet/servlet.FileDownload?file=015b0000000bfYE','es','/servlet/servlet.FileDownload?file=015b0000000bfYE','/servlet/servlet.FileDownload?file=015b0000000bfYE')}">
                      <i class="icon-download icon-white"/>
                      <b>{!$Label.Download_WTP}</b> <!--Download Willingness To Pay Template-->
                </apex:commandlink>
            </apex:pageBlockButtons>
            <apex:pageBlockSection id="pageBSec">
                <apex:pageBlockSectionItem id="pageBSecItem">
                    <apex:outputLabel id="lblCountry" value="{!$Label.Country}:"></apex:outputLabel>
                  <apex:outputText id="txt" value="{!CPF_Report__c.Country__r.Name}"></apex:outputText>
                 </apex:pageblockSectionItem>
                <apex:pageblockSectionItem >
                    <apex:outputLabel value="{!$Label.Currency}:"></apex:outputLabel>
                    <apex:outputText value="{!CPF_Report__c.Currency__c}"></apex:outputText>
                </apex:pageblockSectionItem>
                <apex:pageblockSectionItem >
                    <apex:outputLabel value="{!$Label.Component}:"></apex:outputLabel>
                    <apex:outputText value="{!CPF_Report__c.Component__c}"></apex:outputText>
                </apex:pageblockSectionItem>
                <apex:pageblockSectionItem >
                    <apex:outputLabel value="{!$Label.Cycle}:"></apex:outputLabel>
                    <apex:outputText value="{!strImplementCycle}"></apex:outputText>
                    <!-- <apex:inputfield value="{!objCPFReport.Implementation_Cycle__c}" onchange="changeStartAndEndMonth(this);"/> -->
                    
                    <!--{!CPF_Report__c.Cycle_Start_Month__c} - {!CPF_Report__c.Cycle_End_Month__c}-->
                </apex:pageblockSectionItem>
                <!--<apex:pageblockSectionItem >
                    <apex:outputLabel value="Reporting Cycle:"></apex:outputLabel>
                    <apex:inputfield value="{!objCPFReport.Reporting_Cycle__c}"/>
                </apex:pageblockSectionItem>-->
                <apex:pageblockSectionItem >
                    <apex:outputLabel value="{!$Label.Submission_Year}:" title="Year of CN Submission"></apex:outputLabel>
                    <apex:outputText value="{!CPF_Report__c.Start_Year__c}"></apex:outputText>
                </apex:pageblockSectionItem>
                
            </apex:pageblockSection>
        </apex:pageBlock>
        <table class="table table-striped" style="margin-bottom:0px !important;">
            <tr>
                <td width="19%"  style="border:0px;" ></td>
                <th colspan="3" class="LineThColor" style="width:36%"><center>{!$Label.Current_Previous}</center></th>
                <td class="smalltd" width="1%"></td>
                <th colspan="3" style="width:36%" class="LineThColor"><center>{!$Label.Estimated}</center></th>
                <th style="width:8%">&nbsp;</th>
            </tr>
            <tr>
                <th colspan="8" class="headingFontAndColor"><center>{!$Label.NSP_Funding_Needs_Resources}<!--Part One: National Strategic Plan Funding Needs and Resources--></center></th>
                <th style="width:8%">&nbsp;</th>
            </tr>
            <tr>
                
                <th colspan="8" class="headingCollapse">
                <!--<apex:inputHidden id="CollapseStatus" value="{!ModulePG.isShow}" />-->
                    <table>
                        <tr>
                            <td class="headingCollapse" style="border:0px !important">
                                <apex:outputpanel id="plusimage" >
                                    <table class="curvedEdges_expand" onclick="switchMenu('LineASection','{!$Component.minusimage}','{!$Component.plusimage}','true')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-expand ">
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputpanel>
                                <apex:outputpanel id="minusimage" style="display:none;">
                                    <table class="curvedEdges_collapse" onclick="switchMenu('LineASection','{!$Component.plusimage}','{!$Component.minusimage}','false')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-collapse ">
                                                </div>
                                            </td>
                                        </tr>
                                     </table>
                                </apex:outputpanel>
                            </td>
                            <td class="headingCollapse" style="border:0px !important">{!$Label.Funding_Needs}</td>
                        </tr>
                    </table>
                </th>
                <th style="width:8%">&nbsp;</th>
            </tr>
         
            <tr id="LineASection">
                <td width="19%" rowspan="2"> </td>
                <th><center>{!intCurrentYear-2}</center></th>
                <th><center>{!intCurrentYear-1}</center></th>
                <th><center>{!intCurrentYear}</center></th>
                <td class="smalltd" ></td>
                <th><center>{!intCurrentYear+1}</center></th>
                <th><center>{!intCurrentYear+2}</center></th>
                <th><center>{!intCurrentYear+3}</center></th>
            </tr>
            <tr id="LineASection">
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-2,intCurrentYear-3)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-2} 
                    </center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-1,intCurrentYear-2)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-1} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear,intCurrentYear-1)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear} 
                    </Center>
                </th>
                <td class="smalltd"></td>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+1,intCurrentYear)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+1} 
                    </Center>
                </th>                    
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+2,intCurrentYear+1)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+2} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+3,intCurrentYear+2)}  
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+3} 
                    </Center>
                </th>
            </tr>
            <apex:repeat id="rptInNational" value="{!lstWrapperFundingSourceNSF}" var="FS">
                <tr id="LineASection">
                    
                    <td class="LineThColor" colspan="3" width="43%">
                        <b>{!FS.strName}</b>
                    </td> 
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpYear" value="{!FS.objFundingSource.Current_Year__c}" onchange="limitDecimalPlaces(this); return onChangeNationalPlan('{!$Component.inpYear}','{!$Component.inpYear1Plus}','{!$Component.inpYear2Plus}','{!$Component.inpYear3Plus}','{!$Component.opTextLineA}');"/>
                    </td> 
                    <td class="smalltd"></td>
                    <td class="tdcenter">
                        <apex:inputField id="inpYear1Plus" value="{!FS.objFundingSource.Year_plus_1__c}" onchange="limitDecimalPlaces(this); return onChangeNationalPlan('{!$Component.inpYear}','{!$Component.inpYear1Plus}','{!$Component.inpYear2Plus}','{!$Component.inpYear3Plus}','{!$Component.opTextLineA}');"/>
                    </td>  
                    <td class="tdcenter">
                        <apex:inputField id="inpYear2Plus" value="{!FS.objFundingSource.Year_plus_2__c}" onchange="limitDecimalPlaces(this); return onChangeNationalPlan('{!$Component.inpYear}','{!$Component.inpYear1Plus}','{!$Component.inpYear2Plus}','{!$Component.inpYear3Plus}','{!$Component.opTextLineA}');"/>
                    </td> 
                    <td class="tdcenter">
                       <apex:inputField id="inpYear3Plus" value="{!FS.objFundingSource.Year_plus_3__c}" onchange="limitDecimalPlaces(this); return onChangeNationalPlan('{!$Component.inpYear}','{!$Component.inpYear1Plus}','{!$Component.inpYear2Plus}','{!$Component.inpYear3Plus}','{!$Component.opTextLineA}');"/>
                    </td>
                    <td class="borderNone">
                       <!-- <apex:commandLink reRender="HistoryPopup" status="Processing" action="{!ShowHistoryPopup}" rendered="{! if(GI.blnHistory == false,true,false)}">
                         
                            <apex:image styleClass="Image" url="{!$Resource.History}" style="height: 20px;width: 20px;" />                                                      
                           <apex:param value="{!CountIndicator-1}" name="HistoryIndiIndex"/>
                            <apex:param value="{!i}" name="HistoryPrograGap"/> 
                        </apex:commandLink>
                        <apex:commandButton value="Comment" styleClass="dialougeButtonColor" onclick="return openPopup('{!$Component.tstPopup}');"/>-->
                        <table>
                            <tr>
                                <td style="padding:1px;">
                                    <apex:commandLink action="{!actionShowHistoryPopUp}" status="Processing" reRender="HistoryPopup" >
                                        <apex:image styleClass="Image" url="{!$Resource.History}" style="height: 20px;width: 20px;" />   
                                        <apex:param value="{!FS.objFundingSource.id}" name="pramRecordId"/> 
                                        <apex:param value="{!FS.objFundingSource.Name}" name="pramRecordName"/> 
                                    </apex:commandLink>
                                </td>
                                <td style="padding:1px;">
                                    <apex:commandButton value="{!$Label.Comment}" styleClass="dialougeButtonColor" onclick="return openPopup('{!$Component.tstPopup}');"/>
                                </td>
                            </tr>
                        </table>
                            <apex:outputPanel id="tstPopup" style="display:none;">
                                <apex:outputPanel id="popupBackground1" styleClass="popupAssumptionBackground"/>
                                <apex:outputPanel id="custPopup1" styleClass="custAssumptionPopup">
                                <table style="border:1px solid black;width:100%">
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.CCM_Comments}:</th>                  
                                        <td style="display:{!IF(strLanguage != 'FRENCH' && strLanguage != 'RUSSIAN' && strLanguage != 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'FRENCH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'RUSSIAN','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                    </tr>
                                    <!-- TCS 10/09/2014 Profile Access Setting
                                    
                                    <tr style="display:{!if(CONTAINS($Profile.Name,'CM')||CONTAINS($Profile.Name,'PR'),'none','')}">-->
                                    <tr style="display:{!if(blnLFAComments==true,'','none')}">
                                        <th class="DiaglouePanelText">{!$Label.LFA_Comments}:</th>                  
                                        <td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"/></td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.GF_Comments}:</th>                  
                                        <td><!--<apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnTGFComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnTGFComments}" disabled="true" style="height:60px"/>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td align="center" colspan="2" style="text-align:center;">
                                            <apex:commandButton value="{!$Label.OK}" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                            &nbsp;&nbsp;&nbsp;<apex:commandButton value="{!$Label.Close}" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                        </td>
                                    </tr>
                                </table>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </td>     
                </tr>
            </apex:repeat>
            <tr id="LineASection">
                <th colspan="3" class="LineThColor">{!$Label.Line_A_Total_Funding_Needs}<!--LINE A: Total Funding needs for the National Strategic Plan--></th>               
                <td colspan="5" class="ColorGraytd">
                <apex:outputText id="opTextLineA" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.National_Strategic_Funding_Total__c}"/>
                </apex:outputText>
                <!--<apex:outputText id="opTextLineA" value="{!CPF_Report__c.National_Strategic_Funding_Total__c}"/>-->
                </td>
            </tr>
            <tr><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            <tr>
                <th colspan="8" class="headingCollapse">
                <!--<apex:inputHidden id="CollapseStatus" value="{!ModulePG.isShow}" />-->
                    <table>
                        <tr>
                            <td class="headingCollapse" style="border:0px !important">
                                <apex:outputpanel id="plusimageB" style="display:none;">
                                    <table class="curvedEdges_expand" onclick="switchMenu('LineBSection','{!$Component.minusimageB}','{!$Component.plusimageB}','true')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-expand ">
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputpanel>
                                <apex:outputpanel id="minusimageB">
                                    <table class="curvedEdges_collapse" onclick="switchMenu('LineBSection','{!$Component.plusimageB}','{!$Component.minusimageB}','false')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-collapse ">
                                                </div>
                                            </td>
                                        </tr>
                                     </table>
                                </apex:outputpanel>
                            </td>
                            <td class="headingCollapse" style="border:0px !important">{!$Label.Domestic_Resources}</td>
                        </tr>
                    </table>
                </th>
                <th style="width:8%">&nbsp;</th>
            </tr>
            
            <tr id="LineBSection">
                <td width="19%" rowspan="2" style="border:0px;" ></td>
                <th><center>{!intCurrentYear-2}</center></th>
                <th><center>{!intCurrentYear-1}</center></th>
                <th><center>{!intCurrentYear}</center></th>
                <td class="smalltd"></td>
                <th><center>{!intCurrentYear+1}</center></th>
                <th><center>{!intCurrentYear+2}</center></th>
                <th><center>{!intCurrentYear+3}</center></th>
            </tr>
            <tr id="LineBSection">
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-2,intCurrentYear-3)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-2} 
                    </center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-1,intCurrentYear-2)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-1} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear,intCurrentYear-1)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear} 
                    </Center>
                </th>
                <td class="smalltd"></td>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+1,intCurrentYear)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+1} 
                    </Center>
                </th>                    
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+2,intCurrentYear+1)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+2} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+3,intCurrentYear+2)}  
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+3} 
                    </Center>
                </th>
            </tr>
            <tr id="LineBSection">
                <th colspan="8" class="LineThColor">
                    <apex:outputPanel style="cursor:pointer !important;" >
                            {!$Label.Total_Resources}
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineBCD}','{!$Component.optTextLinkBCD}','','','','','');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineBCD}');" >
                    <img class="helpOrb" title="" alt="" src="/s.gif" height="40px" width="40px"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineBCD" styleClass="helpTextPopup" style="display:none;margin-top: 10px;">
                        <apex:outputText id="optTextLinkBCD">
                            <center>{!$Label.Lines_B_C_D}<!--LINES B, C and D: Previous, current and anticipated resources to meet the funding <br/> needs of the National Strategic Plan--></center>
                        </apex:outputText>
                    </apex:outputPanel>
                    <apex:variable value="{!0}" var="Count"/>
                    <apex:variable value="{!0}" var="Count1"/>
                </th>
                
            </tr>
            <apex:repeat id="rptLineBIn" value="{!lstWrapperFundingSourceB}" var="FS">
                <tr id="LineBSection">
                    <td>
                        {!FS.strName}
                    </td>  
                    <td class="tdcenter">
                        <apex:inputField id="inpBYear2" value="{!FS.objFundingSource.Year_2__c}" onchange="limitDecimalPlaces(this); onChangeLineB('{!lstWrapperFundingSourceB.size}','{!Count1}','2');"/>
                    </td>
                    <td class="tdcenter">
                        <apex:inputField id="inpBYear1" value="{!FS.objFundingSource.Year_1__c}" onchange="limitDecimalPlaces(this); onChangeLineB('{!lstWrapperFundingSourceB.size}','{!Count1}','1');"/>
                    </td>
                    <td class="tdcenter">
                        <apex:inputField id="inpBYear" value="{!FS.objFundingSource.Current_Year__c}" onchange="limitDecimalPlaces(this); onChangeLineB('{!lstWrapperFundingSourceB.size}','{!Count1}','');"/>
                    </td>
                    <td class="smalltd"></td>
                    <td class="tdcenter">
                        <apex:inputField id="inpBYear1Plus" value="{!FS.objFundingSource.Year_plus_1__c}" onchange="limitDecimalPlaces(this); onChangeLineB('{!lstWrapperFundingSourceB.size}','{!Count1}','1Plus');"/>
                    </td>
                    <td class="tdcenter">
                        <apex:inputField id="inpBYear2Plus" value="{!FS.objFundingSource.Year_plus_2__c}" onchange="limitDecimalPlaces(this); onChangeLineB('{!lstWrapperFundingSourceB.size}','{!Count1}','2Plus');"/>
                    </td> 
                    <td class="tdcenter">
                        <apex:inputField id="inpBYear3Plus" value="{!FS.objFundingSource.Year_plus_3__c}" onchange="limitDecimalPlaces(this); onChangeLineB('{!lstWrapperFundingSourceB.size}','{!Count1}','3Plus');"/>
                    </td>  
                    <td class="borderNone">
                        <!-- <apex:commandLink reRender="HistoryPopup" status="Processing" action="{!ShowHistoryPopup}" rendered="{! if(GI.blnHistory == false,true,false)}">
                         
                            <apex:image styleClass="Image" url="{!$Resource.History}" style="height: 20px;width: 20px;" />                                                      
                           <apex:param value="{!CountIndicator-1}" name="HistoryIndiIndex"/>
                            <apex:param value="{!i}" name="HistoryPrograGap"/> 
                        </apex:commandLink>
                        <apex:commandButton value="Comment" styleClass="dialougeButtonColor" onclick="return openPopup('{!$Component.tstPopup}');"/>-->
                        <table>
                            <tr>
                                <td style="padding:1px;">
                                    <apex:commandLink action="{!actionShowHistoryPopUp}" status="Processing" reRender="HistoryPopup" >
                                        <apex:image styleClass="Image" url="{!$Resource.History}" style="height: 20px;width: 20px;" />   
                                        <apex:param value="{!FS.objFundingSource.id}" name="pramRecordId"/> 
                                        <apex:param value="{!FS.objFundingSource.Name}" name="pramRecordName"/> 
                                    </apex:commandLink>
                                </td>
                                <td style="padding:1px;">
                                    <apex:commandButton value="{!$Label.Comment}" styleClass="dialougeButtonColor" onclick="return openPopup('{!$Component.tstPopup}');"/>
                                </td>
                            </tr>
                        </table>
                            <apex:outputPanel id="tstPopup" style="display:none;">
                                <apex:outputPanel id="popupBackground1" styleClass="popupAssumptionBackground"/>
                                <apex:outputPanel id="custPopup1" styleClass="custAssumptionPopup">
                                <table style="border:1px solid black;width:100%">
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.LFA_Comments}:</th>                  
                                        <!--<td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"/></td>-->
                                    <td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"  rendered="{!blnLFAComments}"/>
                                        <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnLFAComments}" disabled="true" style="height:60px"/></td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.CCM_Comments}:</th>                  
                                        <!--<td>
                                          <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                          <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>
                                        </td>-->
                                        <td style="display:{!IF(strLanguage != 'FRENCH' && strLanguage != 'RUSSIAN' && strLanguage != 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'FRENCH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'RUSSIAN','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.GF_Comments}:</th>                  
                                        <td><!--<apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea"/>-->
                                        <apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnTGFComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnTGFComments}" disabled="true" style="height:60px"/></td>
                                    </tr>
                                    <tr>
                                        <td align="center" colspan="2" style="text-align:center;">
                                            <apex:commandButton value="{!$Label.OK}" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                            &nbsp;&nbsp;&nbsp;<apex:commandButton value="{!$Label.Close}" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                        </td>
                                    </tr>
                                </table>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </td>                   
                </tr>
            </apex:repeat>
                
            <tr id="LineBSection">
                <th class="LineThColor">
                    <apex:outputPanel style="cursor:pointer !important;">
                            {!$Label.Line_B_Domestic_Resources}<!--LINE B: Domestic Resources-->
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineB}','{!$Component.optTextLinkB}','','','','','');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineB}');" >
                        <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineB" styleClass="helpTextPopup" style="display:none;margin-top: 10px;">
                        <apex:outputText id="optTextLinkB">
                            <center>{!$Label.Line_B_Domestic_Resources_long}<!--LINE B: Total previous, current <br/> and anticipated <br/> DOMESTIC resources--></center>
                        </apex:outputText>
                    </apex:outputPanel>
                </th>
                <!--<th class="LineThColor">LINE B: Total previous, current <br/> and anticipated <br/> DOMESTIC resources</th>-->
                <td class="ColorGraytd">
                    <apex:outputText id="optTextBYear2" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.B_Year_2_Total__c}"/>
                    </apex:outputText>
               <!-- <apex:outputText id="optTextBYear2" value="{!CPF_Report__c.B_Year_2_Total__c}"/>
                -->
                </td>
                <td class="ColorGraytd">
                   <!-- <apex:outputText id="optTextBYear1" value="{!CPF_Report__c.B_Year_1_Total__c}"/>-->
                    <apex:outputText id="optTextBYear1" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.B_Year_1_Total__c}"/>
                    </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextBYear" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.B_Current_Year_Total__c}"/>
                    </apex:outputText>
                <!--<apex:outputText id="optTextBYear" value="{!CPF_Report__c.B_Current_Year_Total__c}"/>-->
                </td>
                <td class="smalltd"></td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextBYear1Plus" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.B_Year_plus_1_Total__c}"/>
                    </apex:outputText>
                <!--<apex:outputtext id="optTextBYear1Plus" value="{!CPF_Report__c.B_Year_plus_1_Total__c}"/>-->
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextBYear2Plus" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.B_Year_plus_2_Total__c}"/>
                    </apex:outputText>
                <!--<apex:outputtext id="optTextBYear2Plus" value="{!CPF_Report__c.B_Year_plus_2_Total__c}"/>-->
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextBYear3Plus" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.B_Year_3_Total__c}"/>
                    </apex:outputText>
                <!--<apex:outputtext id="optTextBYear3Plus" value="{!CPF_Report__c.B_Year_3_Total__c}"/>-->
                </td>
            
            </tr>
            <tr><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            
            </table>
            <apex:outputPanel id="panel">
            <table class="table table-striped"  style="margin-bottom:0px !important;" >
            <tr>
                
                <th width="92%" colspan="8" class="headingCollapse">
                <!--<apex:inputHidden id="CollapseStatus" value="{!ModulePG.isShow}" />-->
                    <table>
                        <tr>
                            <td class="headingCollapse" style="border:0px !important">
                                <apex:outputpanel id="plusimageC" style="display:none;">
                                    <table class="curvedEdges_expand" onclick="switchMenu('LineCSection','{!$Component.minusimageC}','{!$Component.plusimageC}','true')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-expand ">
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputpanel>
                                <apex:outputpanel id="minusimageC">
                                    <table class="curvedEdges_collapse" onclick="switchMenu('LineCSection','{!$Component.plusimageC}','{!$Component.minusimageC}','false')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-collapse ">
                                                </div>
                                            </td>
                                        </tr>
                                     </table>
                                </apex:outputpanel>
                            </td>
                            <td class="headingCollapse" style="border:0px !important">{!$Label.External_Resources}</td>
                        </tr>
                    </table>
                </th>
                <th style="width:8%">&nbsp;</th>
            </tr>
           
            <tr id="LineCSection">
                <td width="19%" rowspan="2" style="border:0px;display:{!if(lstWrapperFundingSourceC.size == 0,'','none')}; padding-top: 18px; padding-right: 5px;padding-bottom: 0;" >
                    <apex:commandLink styleClass="TGFbtn TGFbtn-success pull-right" style="width:10px;height:18px;" action="{!AddNewFSC}" reRender="panel"  status="Processing">  <!-- rendered="{!if(AND(CountC == lstWrapperFundingSourceC.size,!blnReadOnly),true,false)}" -->
                        <i class="icon-plus icon-white" style="margin-left:-2px;"></i>
                    </apex:commandLink>
                </td>
                <td width="19%" rowspan="2" style="display:{!if(lstWrapperFundingSourceC.size > 0,'','none')};" ></td>
                <th><center>{!intCurrentYear-2}</center></th>
                <th><center>{!intCurrentYear-1}</center></th>
                <th><center>{!intCurrentYear}</center></th>
                <td class="smalltd"></td>
                <th><center>{!intCurrentYear+1}</center></th>
                <th><center>{!intCurrentYear+2}</center></th>
                <th><center>{!intCurrentYear+3}</center></th>
            </tr>
            <tr id="LineCSection">
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-2,intCurrentYear-3)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-2} 
                    </center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-1,intCurrentYear-2)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-1} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear,intCurrentYear-1)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear} 
                    </Center>
                </th>
                <td class="smalltd"></td>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+1,intCurrentYear)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+1} 
                    </Center>
                </th>                    
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+2,intCurrentYear+1)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+2} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+3,intCurrentYear+2)}  
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+3} 
                    </Center>
                </th>
            </tr>
            <apex:variable value="{!1}" var="CountC"/>
            <apex:repeat id="rptLineCIn" value="{!lstWrapperFundingSourceC}" var="FS">
                <tr id="LineCSection">
                    <td width="19%" style="padding-bottom:6px;">
                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td style="border-top:0px !important;">
                                <!-- TCS 10/09/2014 Profile Access Setting
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:15px;height:20px;" onclick="return OpenDeletePopup('{!$Component.tstpopupDelete}');" rendered="{!!blnReadOnly}">-->
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:15px;height:20px;" onclick="return OpenDeletePopup('{!$Component.tstpopupDelete}');" rendered="{!blnDel}">
                                        <i class="icon-trash icon-white" style="margin-top:3px;"></i> 
                                        
                                    </apex:commandLink>
                                    <apex:outputPanel id="tstpopupDelete" style="display:none;">
                                        <apex:outputPanel id="popupBackground" styleClass="popupBackground"/>
                                        <apex:outputPanel id="custPopup" styleClass="custPopup">
                                            <table width="100%" cellspacing="0" cellpadding="0" border="0" >
                                                <tr>
                                                    <td colspan="3" class="deletePopup">
                                                        <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="{!$Label.Are_you_sure}"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="3" class="deletePopup">
                                                        <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="{!$Label.Delete_Funding_Source}"/> <!--This will delete Funding Source.-->
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="47%" class="deletePopup">
                                                        <apex:commandButton styleClass="popupButtonYes" value="{!$Label.Yes}" action="{!DeleteNewFSC}" reRender="panel" status="Processing" oncomplete="updateAllValuesOfC('{!lstWrapperFundingSourceC.size}');">
                                                            <apex:param value="{!CountC-1}" name="DeleteIndex"/>
                                                        </apex:commandButton>
                                                    </td>
                                                    <td width="6%" class="deletePopup"></td>
                                                    <td width="47%" align="left" class="deletePopupCancel">
                                                        <apex:commandButton styleClass="popupButtonCancel" value="{!$Label.No}" onclick="return CloseDeletePopup('{!$Component.tstpopupDelete}');"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </td>
                                <td align="right" style="border-top:0px !important;">
                                    <apex:inputField onchange="externalSourceTypeChanged(this,'{!$Component.OtherExSourceType}');" value="{!FS.objFundingSource.External_Source_Type__c}" style="width:125px;"/><br/>
                                    <apex:inputField id="OtherExSourceType" style="display:{!if(FS.objFundingSource.External_Source_Type__c=='Other','','none')};" value="{!FS.objFundingSource.Other_External_Source__c}"/>
                                </td>
                            </tr>
                            <!--<tr>
                                <td colspan="2" align="right">
                                    <apex:inputField id="OtherExSourceType" style="display:{!if(FS.objFundingSource.External_Source_Type__c=='Other','','none')};" value="{!FS.objFundingSource.Other_External_Source__c}"/>
                                </td> 
                            </tr>-->
                            <tr>
                                <td colspan="2" align="right" style="display:{!if(CountC == lstWrapperFundingSourceC.size,'','none')}; padding-bottom: 0; padding-right: 0;">  <!--   -->
                                <!-- TCS 10/09/2014 Profile Access Setting
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-success pull-right" style="width:10px;height:18px;" action="{!AddNewFSC}" reRender="panel" rendered="{!if(AND(CountC == lstWrapperFundingSourceC.size,!blnReadOnly),true,false)}" status="Processing">-->  <!-- rendered="{!if(AND(CountC == lstWrapperFundingSourceC.size,!blnReadOnly),true,false)}" -->
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-success pull-right" style="width:10px;height:18px;" action="{!AddNewFSC}" reRender="panel" rendered="{!if(AND(CountC == lstWrapperFundingSourceC.size,blnDel),true,false)}" status="Processing">
                                        <i class="icon-plus icon-white" style="margin-left:-2px;"></i>
                                    </apex:commandLink>
                                </td>
                            </tr>
                        </table>
                    </td>  
                    <td class="tdcenter" style="width:12%">
                        <apex:inputField id="inpCYear2" value="{!FS.objFundingSource.Year_2__c}" onchange="limitDecimalPlaces(this); onChangeLineC('{!lstWrapperFundingSourceC.size}','{!Count1}','2');"/>
                   
                    </td>
                    <td class="tdcenter" style="width:12%">
                        <apex:inputField id="inpCYear1" value="{!FS.objFundingSource.Year_1__c}" onchange="limitDecimalPlaces(this); onChangeLineC('{!lstWrapperFundingSourceC.size}','{!Count1}','1');"/>
                    </td>
                    <td class="tdcenter" style="width:12%">
                        <apex:inputField id="inpCYear" value="{!FS.objFundingSource.Current_Year__c}" onchange="limitDecimalPlaces(this); onChangeLineC('{!lstWrapperFundingSourceC.size}','{!Count1}','');"/>
                    </td>
                    <td class="smalltd" width="1%"></td>
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpCYear1Plus" value="{!FS.objFundingSource.Year_plus_1__c}" onchange="limitDecimalPlaces(this); onChangeLineC('{!lstWrapperFundingSourceC.size}','{!Count1}','1Plus');"/>
                    </td>
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpCYear2Plus" value="{!FS.objFundingSource.Year_plus_2__c}" onchange="limitDecimalPlaces(this); onChangeLineC('{!lstWrapperFundingSourceC.size}','{!Count1}','2Plus');"/>
                    </td> 
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpCYear3Plus" value="{!FS.objFundingSource.Year_plus_3__c}" onchange="limitDecimalPlaces(this); onChangeLineC('{!lstWrapperFundingSourceC.size}','{!Count1}','3Plus');"/>
                    </td>  
                    <td style="width:8%" class="borderNone">
                   
                    <!--<apex:commandButton value="Comment" styleClass="dialougeButtonColor"  onclick="return openPopup('{!$Component.tstPopup}');"/>-->
                        <table>
                            <tr>
                                <td style="padding:1px;">
                                    <apex:commandLink action="{!actionShowHistoryPopUp}" status="Processing" reRender="HistoryPopup" >
                                        <apex:image styleClass="Image" url="{!$Resource.History}" style="height: 20px;width: 20px;" />   
                                        <apex:param value="{!FS.objFundingSource.id}" name="pramRecordId"/> 
                                        <apex:param value="{!FS.objFundingSource.Name}" name="pramRecordName"/> 
                                    </apex:commandLink>
                                </td>
                                <td style="padding:1px;">
                                    <apex:commandButton value="{!$Label.Comment}" styleClass="dialougeButtonColor" onclick="return openPopup('{!$Component.tstPopup}');"/>
                                </td>
                            </tr>
                        </table>
                        <apex:outputPanel id="tstPopup" style="display:none;">
                            <apex:outputPanel id="popupBackground1" styleClass="popupAssumptionBackground"/>
                            <apex:outputPanel id="custPopup1" styleClass="custAssumptionPopup">
                                <table style="border:1px solid black;width:100%">
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.LFA_Comments}:</th>                  
                                        <!--<td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"/></td>-->
                                        <td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"  rendered="{!blnLFAComments}"/>
                                        <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnLFAComments}" disabled="true" style="height:60px"/></td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.CCM_Comments}:</th>                  
                                        <!--<td>
                                          <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                          <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>
                                        </td>-->
                                        <td style="display:{!IF(strLanguage != 'FRENCH' && strLanguage != 'RUSSIAN' && strLanguage != 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'FRENCH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'RUSSIAN','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.GF_Comments}:</th>                  
                                        <td><!--<apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea"/>-->
                                        <apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnTGFComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnTGFComments}" disabled="true" style="height:60px"/></td>
                                    </tr>
                                    <tr>
                                        <td align="center" colspan="2" style="text-align:center;">
                                            <apex:commandButton value="{!$Label.OK}" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                            &nbsp;&nbsp;&nbsp;<apex:commandButton value="Close" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                        </td>
                                    </tr>
                                </table>
                            </apex:outputPanel>
                        </apex:outputPanel>
                        <apex:variable value="{!CountC+1}" var="CountC"/>
                    </td>                   
                </tr>
            </apex:repeat>
            </table>
            </apex:outputPanel>

            <table class="table table-striped">
            <tr id="LineCSection">
                 <th class="LineThColor" width="19%">
                    <apex:outputPanel style="cursor:pointer !important;">
                            {!$Label.Line_C_External_Resources}
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineC}','{!$Component.optTextLinkC}','','','','','');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineC}');">
                    <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineC" styleClass="helpTextPopup" style="display:none;margin-top: 10px;">
                        <apex:outputText id="optTextLinkC">
                            <center>{!$Label.Line_C_External_Resources_long}<!--LINE C: Total <br/> previous, current <br/> and anticipated <br/>EXTERNAL Resources (non- <br/>Global Fund)--></center>
                        </apex:outputText>
                    </apex:outputPanel>
                </th>
                <!--<th width="19%" class="LineThColor">LINE C: Total <br/> previous, current <br/> and anticipated <br/> EXTERNAL Resources (non- <br/>Global Fund)</th>-->
                <td width="12%" class="ColorGraytd" style="width:12%">
                <apex:outputText id="optTextCYear2" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.C_Year_2_Total__c}"/>
                </apex:outputText>
                <!--<apex:outputText id="optTextCYear2" value="{!CPF_Report__c.C_Year_2_Total__c}"/>-->
                </td>
                <td width="12%" class="ColorGraytd" style="width:12%">
                <apex:outputText id="optTextCYear1" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.C_Year_1_Total__c}"/>
                </apex:outputText>
                <!--<apex:outputText id="optTextCYear1" value="{!CPF_Report__c.C_Year_1_Total__c}"/>-->
                </td>
                <td width="12%" class="ColorGraytd" style="width:12%">
                <apex:outputText id="optTextCYear" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.C_Current_Year_Total__c}"/>
                </apex:outputText>
                <!--<apex:outputText id="optTextCYear" value="{!CPF_Report__c.C_Current_Year_Total__c}"/>-->
                </td>
                <td width="1%" class="smalltd"></td>
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="optTextCYear1Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.C_Year_plus_1_Total__c}"/>
                </apex:outputText>
                <!--<apex:outputtext id="optTextCYear1Plus" value="{!CPF_Report__c.C_Year_plus_1_Total__c}"/>--></td>
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="optTextCYear2Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.C_Year_plus_2_Total__c}"/>
                </apex:outputText>
                <!--<apex:outputtext id="optTextCYear2Plus" value="{!CPF_Report__c.C_Year_plus_2_Total__c}"/>--></td>
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="optTextCYear3Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.C_Year_plus_3_Total__c}"/>
                </apex:outputText>
                <!--<apex:outputtext id="optTextCYear3Plus" value="{!CPF_Report__c.C_Year_plus_3_Total__c}"/>--></td>
                <td width="8%">&nbsp;</td>
           </tr>
           <tr><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
           <tr>
                <th colspan="8" class="headingCollapse">
                <!--<apex:inputHidden id="CollapseStatus" value="{!ModulePG.isShow}" />-->
                    <table>
                        <tr>
                            <td class="headingCollapse" style="border:0px !important">
                                <apex:outputpanel id="plusimageD" style="display:none;">
                                    <table class="curvedEdges_expand" onclick="switchMenu('LineDSection','{!$Component.minusimageD}','{!$Component.plusimageD}','true')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-expand ">
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputpanel>
                                <apex:outputpanel id="minusimageD">
                                    <table class="curvedEdges_collapse" onclick="switchMenu('LineDSection','{!$Component.plusimageD}','{!$Component.minusimageD}','false')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-collapse ">
                                                </div>
                                            </td>
                                        </tr>
                                     </table>
                                </apex:outputpanel>
                            </td>
                            <td class="headingCollapse" style="border:0px !important">{!$Label.Global_Fund_Resources}</td>
                        </tr>
                    </table>
                </th>
                <th width="8%">&nbsp;</th>
            </tr>
            
            <tr id="LineDSection"> 
                <td width="19%" rowspan="2" style="border:0px;" ></td>
                <th><center>{!intCurrentYear-2}</center></th>
                <th><center>{!intCurrentYear-1}</center></th>
                <th><center>{!intCurrentYear}</center></th>
                <td class="smalltd"></td>
                <th><center>{!intCurrentYear+1}</center></th>
                <th><center>{!intCurrentYear+2}</center></th>
                <th><center>{!intCurrentYear+3}</center></th>
            </tr>
            <tr id="LineDSection">
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-2,intCurrentYear-3)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-2} 
                    </center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-1,intCurrentYear-2)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-1} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear,intCurrentYear-1)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear} 
                    </Center>
                </th>
                <td class="smalltd"></td>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+1,intCurrentYear)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+1} 
                    </Center>
                </th>                    
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+2,intCurrentYear+1)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+2} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+3,intCurrentYear+2)}  
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+3} 
                    </Center>
                </th>
            </tr>
           <apex:repeat id="rptLineDIn" value="{!lstWrapperFundingSourceD}" var="FS">
                <tr id="LineDSection">
                    <td width="19%">
                        {!FS.strName}
                    </td>  
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpDYear2" value="{!FS.objFundingSource.Year_2__c}" onchange="limitDecimalPlaces(this); onChangeLineD('{!lstWrapperFundingSourceD.size}','{!Count1}','2');"/>
                    </td>
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpDYear1" value="{!FS.objFundingSource.Year_1__c}" onchange="limitDecimalPlaces(this); onChangeLineD('{!lstWrapperFundingSourceD.size}','{!Count1}','1');"/>
                    </td>
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpDYear" value="{!FS.objFundingSource.Current_Year__c}" onchange="limitDecimalPlaces(this); onChangeLineD('{!lstWrapperFundingSourceD.size}','{!Count1}','');"/>
                    </td>
                    <td class="smalltd" width="1%"></td>
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpDYear1Plus" value="{!FS.objFundingSource.Year_plus_1__c}" onchange="limitDecimalPlaces(this); onChangeLineD('{!lstWrapperFundingSourceD.size}','{!Count1}','1Plus');"/>
                    </td>
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpDYear2Plus" value="{!FS.objFundingSource.Year_plus_2__c}" onchange="limitDecimalPlaces(this); onChangeLineD('{!lstWrapperFundingSourceD.size}','{!Count1}','2Plus');"/>
                    </td> 
                    <td class="tdcenter" width="12%">
                        <apex:inputField id="inpDYear3Plus" value="{!FS.objFundingSource.Year_plus_3__c}" onchange="limitDecimalPlaces(this); onChangeLineD('{!lstWrapperFundingSourceD.size}','{!Count1}','3Plus');"/>
                    </td> 
                    <td class="borderNone" width="8%">
                        <!--<apex:commandButton value="Comment" styleClass="dialougeButtonColor"  onclick="return openPopup('{!$Component.tstPopup}');"/>-->
                        <table>
                            <tr>
                                <td style="padding:1px;">
                                    <apex:commandLink action="{!actionShowHistoryPopUp}" status="Processing"  reRender="HistoryPopup">
                                        <apex:image styleClass="Image" url="{!$Resource.History}" style="height: 20px;width: 20px;" />   
                                        <apex:param value="{!FS.objFundingSource.id}" name="pramRecordId"/> 
                                        <apex:param value="{!FS.objFundingSource.Name}" name="pramRecordName"/> 
                                    </apex:commandLink>
                                </td>
                                <td style="padding:1px;">
                                    <apex:commandButton value="{!$Label.Comment}" styleClass="dialougeButtonColor"  onclick="return openPopup('{!$Component.tstPopup}');"/>
                                </td>
                            </tr>
                        </table>
                        <apex:outputPanel id="tstPopup" style="display:none;">
                            <apex:outputPanel id="popupBackground1" styleClass="popupAssumptionBackground"/>
                            <apex:outputPanel id="custPopup1" styleClass="custAssumptionPopup">
                                <table style="border:1px solid black;width:10%">
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.LFA_Comments}:</th>                  
                                       <!-- <td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"/></td>-->
                                         <td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"  rendered="{!blnLFAComments}"/>
                                        <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnLFAComments}" disabled="true" style="height:60px"/></td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.CCM_Comments}:</th>                  
                                        <!--<td>
                                          <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                          <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>
                                        </td>-->
                                        <td style="display:{!IF(strLanguage != 'FRENCH' && strLanguage != 'RUSSIAN' && strLanguage != 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'FRENCH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'RUSSIAN','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.GF_Comments}:</th>                  
                                        <td><!--<apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea"/>-->
                                        <apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnTGFComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnTGFComments}" disabled="true" style="height:60px"/></td>
                                    </tr>
                                    <tr>
                                        <td align="center" colspan="2" style="text-align:center;">
                                            <apex:commandButton value="{!$Label.OK}" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                            &nbsp;&nbsp;&nbsp;<apex:commandButton value="{!$Label.Close}" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                        </td>
                                    </tr>
                                </table>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </td>                    
                </tr>
            </apex:repeat>
                
            <tr id="LineDSection">
                <th class="LineThColor" width="19%">
                    <apex:outputPanel style="cursor:pointer !important;">
                            {!$Label.Line_D_GF_Resources}
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineD}','{!$Component.optTextLinkD}','','','','','');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineD}');" >
                        <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineD" styleClass="helpTextPopup" style="display:none;margin-top: 10px;">
                        <apex:outputText id="optTextLinkD">
                            <center>{!$Label.Line_D_GF_Resources_long}<!--LINE D:  Total <br/> previous, current <br/> and anticipated <br/> Global Fund <br/> Resources from <br/> existing grants and <br/> approved proposals--></center>
                        </apex:outputText>
                    </apex:outputPanel>
                </th>
                <!--<th class="LineThColor">LINE D:  Total <br/> previous, current <br/> and anticipated <br/> Global Fund <br/> Resources from <br/> existing grants and <br/> approved proposals</th>-->
                <td class="ColorGraytd">
                <apex:outputText id="optTextDYear2" value="{0,number,###,###,###}">
                    <apex:param value="{!objCPFReport.D_Year_2_Total__c}"/>
                </apex:outputText>
                </td>
                
                <td class="ColorGraytd">
                <apex:outputText id="optTextDYear1" value="{0,number,###,###,###}">
                    <apex:param value="{!objCPFReport.D_Year_1_Total__c}"/>
                </apex:outputText></td>
                
                <td class="ColorGraytd">
                <apex:outputText id="optTextDYear" value="{0,number,###,###,###}">
                    <apex:param value="{!objCPFReport.D_Current_Year_Total__c}"/>
                </apex:outputText>
                </td>
                
                <td class="smalltd"></td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextDYear1Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!objCPFReport.D_Year_plus_1_Total__c}"/>
                </apex:outputText>
                </td>
                
                <td class="ColorGraytd">
                <apex:outputText id="optTextDYear2Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!objCPFReport.D_Year_plus_2_Total__c}"/>
                </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextDYear3Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!objCPFReport.D_Year_3_Total__c}"/>
                </apex:outputText>
                </td>
                <td style="padding-left:30px;">
                    <apex:commandButton value="{!$Label.Refresh}" styleClass="dialougeButtonColor" onclick="return RefreshLineDConfirm();"/>
                </td>
            </tr>
            <tr><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            <!--<tr class="smalltr">
                <td colspan="8"></td>
            </tr>-->
            <tr>
                <th colspan="8" class="headingCollapse">
                <!--<apex:inputHidden id="CollapseStatus" value="{!ModulePG.isShow}" />-->
                    <table>
                        <tr>
                            <td class="headingCollapse" style="border:0px !important">
                                <apex:outputpanel id="plusimageEI" style="display:none;">
                                    <table class="curvedEdges_expand" onclick="switchMenu('LineEISection','{!$Component.minusimageEI}','{!$Component.plusimageEI}','true')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-expand ">
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputpanel>
                                <apex:outputpanel id="minusimageEI">
                                    <table class="curvedEdges_collapse" onclick="switchMenu('LineEISection','{!$Component.plusimageEI}','{!$Component.minusimageEI}','false')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-collapse ">
                                                </div>
                                            </td>
                                        </tr>
                                     </table>
                                </apex:outputpanel>
                            </td>
                            <td class="headingCollapse" style="border:0px !important">{!$Label.Total_Request}</td>
                        </tr>
                    </table>
                </th>
            </tr>
            
            <tr id="LineEISection">
                <td width="19%" rowspan="2" style="border:0px;" ></td>
                <th><center>{!intCurrentYear-2}</center></th>
                <th><center>{!intCurrentYear-1}</center></th>
                <th><center>{!intCurrentYear}</center></th>
                <td class="smalltd"></td>
                <th><center>{!intCurrentYear+1}</center></th>
                <th><center>{!intCurrentYear+2}</center></th>
                <th><center>{!intCurrentYear+3}</center></th>
            </tr>
            <tr id="LineEISection">
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-2,intCurrentYear-3)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-2} 
                    </center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-1,intCurrentYear-2)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-1} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear,intCurrentYear-1)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear} 
                    </Center>
                </th>
                <td class="smalltd"></td>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+1,intCurrentYear)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+1} 
                    </Center>
                </th>                    
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+2,intCurrentYear+1)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+2} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+3,intCurrentYear+2)}  
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+3} 
                    </Center>
                </th>
            </tr>
            <tr id="LineEISection">
                <th width="43%" colspan="3" class="LineThColor" align="right">{!$Label.Anticipated_Resources}<!--Total anticipated resources (annual amounts)--></th>
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="ARYear" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.Anticipated_Resources_Current_Year__c}"/>
                </apex:outputText></td>
                <td width="1%" class="ColorGraytd"></td>
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="ARYear1Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.Anticipated_Resources_Year_1__c}"/>
                </apex:outputText>
                <!--<apex:outputText id="ARYear1Plus" value="{!CPF_Report__c.Anticipated_Resources_Year_1__c}"/>-->
                </td>
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="ARYear2Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.Anticipated_Resources_Year_2__c}"/>
                </apex:outputText></td>
                
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="ARYear3Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.Anticipated_Resources_Year_3__c}"/>
                </apex:outputText>
                </td>
                <td width="8%">&nbsp;</td>
            </tr>
            <tr id="LineEISection">
                <th colspan="3" class="LineThColor" align="right">{!$Label.Line_E_Total_Resources}<!--LINE E : Total anticipated resources (Line B+C+D)--></th>
                <td colspan="5" class="ColorGraytd">
                <apex:outputText id="ARAllYearTotal" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.Anticipated_Resources_Total__c}"/>
                </apex:outputText>
                </td>
            </tr>
            <tr id="LineEISection"><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            <tr id="LineEISection">
                <th colspan="3" class="LineThColor" align="right">{!$Label.Anticipated_Funding_Gap}<!--Annual Anticipated Funding Gap (Total funding <br/> need - Total  anticipated  funding gap)--></th>
                <td class="ColorGraytd">
                <apex:outputText id="AFGYear" value="{0,number,###,###,###}">
                    <apex:param value="{!AnnualAnticipatedFundingGapCurr}"/>
                </apex:outputText>
                </td>
                <td class="ColorGraytd"></td>
                <td class="ColorGraytd">
                <apex:outputText id="AFGYear1Plus" value="{0,number,###,###,###}">
                    <!-- <apex:param value="{!CPF_Report__c.Anticipated_Funding_Gap_Year_1__c}"/> -->
                    <apex:param value="{!AnnualAnticipatedFundingGap1}"/>
                    
                </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="AFGYear2Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!AnnualAnticipatedFundingGap2}"/>
                    
                </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="AFGYear3Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!AnnualAnticipatedFundingGap3}"/>
                    
                </apex:outputText>
               </td>
            </tr>
            <tr id="LineEISection">
                <th colspan="3" class="LineThColor" align="right">{!$Label.Line_F_Total_Funding_Gap}<!--LINE F: Total anticipated funding gap  (Line A - E)--></th>
                <td colspan="5" class="ColorGraytd">
                <apex:outputText id="AFGAllYearTotal" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.Anticipated_Funding_Gap_Total__c}"/>
                </apex:outputText>
               </td>
            </tr>
            <tr id="LineEISection"><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            <tr id="LineEISection">
                <th colspan="3" class="LineThColor" align="right">{!$Label.Line_G_Total_Request}<!--LINE G: Total Funding Request to the Global Fund--></th>
                <td class="ColorGraytd">
                <apex:outputText id="TFRYear" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.Total_Y1__c}"/>
                </apex:outputText>
                </td>
                <td class="ColorGraytd"></td>
                <td class="ColorGraytd">
                <apex:outputText id="TFRYear1Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.Total_Y2__c}"/>
                </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="TFRYear2Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.Total_Y3__c}"/>
                </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="TFRYear3Plus" value="{0,number,###,###,###}" style="display:{!if(CPF_Report__c.Concept_Note__r.Number_of_Years__c == '4',true,false)};">
                    <apex:param value="{!CPF_Report__c.Total_Y4__c}"/>
                </apex:outputText>
               </td>
            </tr>            
            
            <!--<apex:repeat id="rptLineIIn" value="{!lstWrapperFundingSourceI}" var="FS">
                <tr id="LineEISection">
                    <th class="LineThColor" colspan="4">{!FS.strName}</th>  
                    <td class="smalltd"></td>
                    <td class="ColorGraytd">
                        <apex:outputtext id="inpIYear1Plus" value="{!FS.objFundingSource.Year_plus_1__c}"/>--> <!-- onchange="limitDecimalPlaces(this); return onChangeLineI('{!lstWrapperFundingSourceI.size}','1Plus');"/>-->
                    <!--</td>  
                    <td class="ColorGraytd">
                        <apex:outputtext id="inpIYear2Plus" value="{!FS.objFundingSource.Year_plus_2__c}"/>
                    </td> 
                    <td class="ColorGraytd">
                       <apex:outputtext id="inpIYear3Plus" value="{!FS.objFundingSource.Year_plus_3__c}"/>
                    </td>
                    <td class="borderNone" style="padding:0px;text-align: center;">
                        <apex:commandButton value="Comment"  styleClass="dialougeButtonColor" onclick="return openPopup('{!$Component.tstPopup}');"/>
                            <apex:outputPanel id="tstPopup" style="display:none;">
                                <apex:outputPanel id="popupBackground1" styleClass="popupAssumptionBackground"/>
                                <apex:outputPanel id="custPopup1" styleClass="custAssumptionPopup">
                                <table style="border:1px solid black;width:100%">
                                    <tr>
                                        <th class="DiaglouePanelText">LFA Comments:</th>                  
                                        <td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"/></td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">CCM Comments:</th>                  
                                        <td><apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea"/></td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">Global Fund Comments:</th>                  
                                        <td><apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea"/></td>
                                    </tr>
                                    <tr>
                                        <td align="center" colspan="2" style="text-align:center;">
                                            <apex:commandButton value="OK" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                            &nbsp;&nbsp;&nbsp;<apex:commandButton value="Close" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                        </td>
                                    </tr>
                                </table>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </td>     
                </tr>
            </apex:repeat>-->
            
            <tr id="LineEISection">
                <th colspan="3" class="LineThColor">{!$Label.Line_H_Funding_Request_Allocated_Amount}<!--LINE H: Funding request within the Indicative Amount--></th>
                <td class="ColorGraytd">
                    <apex:outputText id="FRYear" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.Indicative_Y1__c}"/>
                    </apex:outputText>
                </td>
                <td class="ColorGraytd"></td>
                <td class="ColorGraytd">
                    <apex:outputText id="FRYear1Plus" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.Indicative_Y2__c}"/>
                    </apex:outputText>
                </td>
                <td class="ColorGraytd">
                    <apex:outputText id="FRYear2Plus" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.Indicative_Y3__c}"/>
                    </apex:outputText>
                </td>
                <td class="ColorGraytd">
                    <apex:outputText id="FRYear3Plus" value="{0,number,###,###,###}" style="display:{!if(CPF_Report__c.Concept_Note__r.Number_of_Years__c == '4',true,false)};">
                        <apex:param value="{!CPF_Report__c.Indicative_Y4__c}"/>
                    </apex:outputText>
                </td>
                
            </tr>
            <tr id="LineEISection">
                <th colspan="3" class="LineThColor">{!$Label.Line_I_Funding_Request_Above_Allocated}<!--LINE I: Funding request above the Indicative Amount--></th>
                <td class="ColorGraytd">
                    <apex:outputText id="FRAYear" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.Above_Indicative_Y1__c}"/>
                    </apex:outputText>
                </td>
                <td class="ColorGraytd"></td>
                <td class="ColorGraytd">
                    <apex:outputText id="FRAYear1Plus" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.Above_Indicative_Y2__c}"/>
                    </apex:outputText>
                </td>
                <td class="ColorGraytd">
                    <apex:outputText id="FRAYear2Plus" value="{0,number,###,###,###}">
                        <apex:param value="{!CPF_Report__c.Above_Indicative_Y3__c}"/>
                    </apex:outputText>
                </td>
                <td class="ColorGraytd">
                    <apex:outputText id="FRAYear3Plus" value="{0,number,###,###,###}" style="display:{!if(CPF_Report__c.Concept_Note__r.Number_of_Years__c == '4',true,false)};">
                        <apex:param value="{!CPF_Report__c.Above_Indicative_Y4__c}"/>
                    </apex:outputText>
                </td>
            </tr>
            <tr>
                <th colspan="8" class="headingFontAndColor"><center>{!$Label.Government_Health_Spending_Overall}<!--Part Two: Overall Health Sector - Government Health Spending--></center></th>
            </tr>
            <tr>
                <th colspan="8" class="headingCollapse">
                
                    <table>
                        <tr>
                            <td class="headingCollapse" style="border:0px !important">
                                <apex:outputpanel id="plusimageJ" style="display:none;">
                                    <table class="curvedEdges_expand" onclick="switchMenu('LineJSection','{!$Component.minusimageJ}','{!$Component.plusimageJ}','true')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-expand ">
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputpanel>
                                <apex:outputpanel id="minusimageJ">
                                    <table class="curvedEdges_collapse" onclick="switchMenu('LineJSection','{!$Component.plusimageJ}','{!$Component.minusimageJ}','false')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-collapse ">
                                                </div>
                                            </td>
                                        </tr>
                                     </table>
                                </apex:outputpanel>
                            </td>
                            <td class="headingCollapse" style="border:0px !important">{!$Label.Government_Health_Spending}</td>
                        </tr>
                    </table>
                </th>
            </tr>
            <!-- <tr id="LineJSection">
                <td width="19%" rowspan="3" style="border:0px;" ></td>
                <th colspan="3" class="LineThColor" style="width:36%"><center>Current and previous</center></th>
                <td class="smalltd" width="1%"></td>
                <th colspan="3" style="width:36%" class="LineThColor"><center>Estimated</center></th>
                <th style="width:8%">&nbsp;</th>
            </tr> -->
            <tr id="LineJSection">
                <td width="19%" rowspan="2" style="border:0px;" ></td>
                <th><center>{!intCurrentYear-2}</center></th>
                <th><center>{!intCurrentYear-1}</center></th>
                <th><center>{!intCurrentYear}</center></th>
                <td class="smalltd"></td>
                <th><center>{!intCurrentYear+1}</center></th>
                <th><center>{!intCurrentYear+2}</center></th>
                <th><center>{!intCurrentYear+3}</center></th>
            </tr>
            <tr id="LineJSection">
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-2,intCurrentYear-3)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-2} 
                    </center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-1,intCurrentYear-2)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-1} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear,intCurrentYear-1)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear} 
                    </Center>
                </th>
                <td class="smalltd"></td>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+1,intCurrentYear)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+1} 
                    </Center>
                </th>                    
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+2,intCurrentYear+1)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+2} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+3,intCurrentYear+2)}  
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+3} 
                    </Center>
                </th>
            </tr>
            <apex:repeat id="rptLineJIn" value="{!lstWrapperFundingSourceJ}" var="FS">
                <tr id="LineJSection">
                    <td>
                        {!FS.strName}
                    </td>  
                    <td class="tdcenter">
                        <apex:inputField id="inpJYear2" value="{!FS.objFundingSource.Year_2__c}" onchange="limitDecimalPlaces(this); onChangeLineJ('{!lstWrapperFundingSourceJ.size}','{!Count1}','2');"/>
                    </td>
                    <td class="tdcenter">
                        <apex:inputField id="inpJYear1" value="{!FS.objFundingSource.Year_1__c}" onchange="limitDecimalPlaces(this); onChangeLineJ('{!lstWrapperFundingSourceJ.size}','{!Count1}','1');"/>
                    </td>
                    <td class="tdcenter">
                        <apex:inputField id="inpJYear" value="{!FS.objFundingSource.Current_Year__c}" onchange="limitDecimalPlaces(this); onChangeLineJ('{!lstWrapperFundingSourceJ.size}','{!Count1}','');"/>
                    </td>
                    <td class="smalltd"></td>
                    <td class="tdcenter">
                        <apex:inputField id="inpJYear1Plus" value="{!FS.objFundingSource.Year_plus_1__c}" onchange="limitDecimalPlaces(this); onChangeLineJ('{!lstWrapperFundingSourceJ.size}','{!Count1}','1Plus');"/>
                    </td>
                    <td class="tdcenter">
                        <apex:inputField id="inpJYear2Plus" value="{!FS.objFundingSource.Year_plus_2__c}" onchange="limitDecimalPlaces(this); onChangeLineJ('{!lstWrapperFundingSourceJ.size}','{!Count1}','2Plus');"/>
                    </td> 
                    <td class="tdcenter">
                        <apex:inputField id="inpJYear3Plus" value="{!FS.objFundingSource.Year_plus_3__c}" onchange="limitDecimalPlaces(this); onChangeLineJ('{!lstWrapperFundingSourceJ.size}','{!Count1}','3Plus');"/>
                    </td>
                    <td class="borderNone">
                        <!--  <apex:commandButton value="Comment" styleClass="dialougeButtonColor"  onclick="return openPopup('{!$Component.tstPopup}');"/>-->
                        <table>
                            <tr>
                                <td style="padding:1px;">
                                    <apex:commandLink action="{!actionShowHistoryPopUp}" status="Processing" reRender="HistoryPopup" >
                                        <apex:image styleClass="Image" url="{!$Resource.History}" style="height: 20px;width: 20px;" />   
                                        <apex:param value="{!FS.objFundingSource.id}" name="pramRecordId"/> 
                                        <apex:param value="{!FS.objFundingSource.Name}" name="pramRecordName"/> 
                                    </apex:commandLink>
                                </td>
                                <td style="padding:1px;">
                                    <apex:commandButton value="{!$Label.Comment}" styleClass="dialougeButtonColor"  onclick="return openPopup('{!$Component.tstPopup}');"/>
                                </td>
                            </tr>
                        </table>
                        <apex:outputPanel id="tstPopup" style="display:none;">
                            <apex:outputPanel id="popupBackground1" styleClass="popupAssumptionBackground"/>
                            <apex:outputPanel id="custPopup1" styleClass="custAssumptionPopup">
                                <table style="border:1px solid black;width:100%">
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.LFA_Comments}:</th>                  
                                     <!--   <td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"/></td>-->
                                        <td><apex:inputField value="{!FS.objFundingSource.LFA_Comments__c}" styleclass="DiaglouePanelTextarea"  rendered="{!blnLFAComments}"/>
                                        <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnLFAComments}" disabled="true" style="height:60px"/></td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.CCM_Comments}:</th>                  
                                        <!--<td>
                                          <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                          <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>
                                        </td>-->
                                        <td style="display:{!IF(strLanguage != 'FRENCH' && strLanguage != 'RUSSIAN' && strLanguage != 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'FRENCH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_French__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'RUSSIAN','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Russian__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                        <td style="display:{!IF(strLanguage == 'SPANISH','','none')}">
                                        <!-- TCS 10/09/2014 Profile Access Setting
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnReadOnly}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnReadOnly}" disabled="true" style="height:60px"/>-->
                                            <apex:inputField value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnCCMComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.CCM_Comments_Spanish__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnCCMComments}" disabled="true" style="height:60px"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="DiaglouePanelText">{!$Label.GF_Comments}:</th>                  
                                        <td><!--<apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea"/>-->
                                        <apex:inputField value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!blnTGFComments}"/>
                                            <apex:inputTextArea value="{!FS.objFundingSource.Global_Fund_Comments__c}" styleclass="DiaglouePanelTextarea" rendered="{!!blnTGFComments}" disabled="true" style="height:60px"/></td>
                                    </tr>
                                    <tr>
                                        <td align="center"  colspan="2" style="text-align:center;">
                                            <apex:commandButton value="{!$Label.OK}" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                            &nbsp;&nbsp;&nbsp;<apex:commandButton value="{!$Label.Close}" styleClass="DiaglouePanelButtonSaveAndCancel" onclick="return closePopup('{!$Component.tstPopup}');"/>
                                        </td>
                                    </tr>
                                </table>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </td>                     
                </tr>
            </apex:repeat>
                
            <tr id="LineJSection">
                <th class="LineThColor">
                    <apex:outputPanel style="cursor:pointer !important;">
                            {!$Label.Government_Health}
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineJ}','{!$Component.optTextLinkJ}','','','','','');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineJ}');" >
                        <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineJ" styleClass="helpTextPopup" style="display:none;margin-top: 10px;">
                        <apex:outputText id="optTextLinkJ">
                            <center>
                            {!$Label.Line_J_Govt_Health_Spending}</center>
                        </apex:outputText>
                    </apex:outputPanel>
                </th>
                <td class="ColorGraytd">
                <apex:outputText id="optTextJYear2" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.J_Year_2_Total__c}"/>
                </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextJYear1" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.J_Year_1_Total__c}"/>
                </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextJYear" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.J_Current_Year_Total__c}"/>
                </apex:outputText>
                </td>
                <td class="smalltd"></td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextJYear1Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.J_Year_plus_1_Total__c}"/>
                </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextJYear2Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.J_Year_plus_2_Total__c}"/>
                </apex:outputText>
                </td>
                <td class="ColorGraytd">
                <apex:outputText id="optTextJYear3Plus" value="{0,number,###,###,###}">
                    <apex:param value="{!CPF_Report__c.J_Year_3_Total__c}"/>
                </apex:outputText>
                </td>
            </tr>
            <tr><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            
            <tr>
                <th colspan="8" class="headingFontAndColor">
                    <apex:outputPanel style="cursor:pointer !important;">
                        <center>{!$Label.Counterpart_Fnancing}
                            <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optPartThree}','{!$Component.optTextPartThree}','','','','','');"
                                 onmouseout="onMouseOutHelpTextHide('{!$Component.optPartThree}');" >
                                <img class="helpOrb" title="" alt="" src="/s.gif"/>
                            </apex:outputpanel>                       
                        </center> 
                    </apex:outputPanel>
                    <apex:outputPanel id="optPartThree" styleClass="helpTextPopup" style="display:none;margin-top: 28px;">
                        <apex:outputText id="optTextPartThree" >
                            <center>{!$Label.CPF_Pop_Up_Income}<!--Low income = 5%, lower lower-middle income = 20%,  
                            <br/>
                            upper lower-middle income (high level) = 40%, upper-middle income = 60%--></center>
                        </apex:outputText>
                    </apex:outputPanel>
                </th>
            </tr>
            <tr>
                <th colspan="8" class="headingCollapse">
                <!--<apex:inputHidden id="CollapseStatus" value="{!ModulePG.isShow}" />-->
                    <table>
                        <tr>
                            <td class="headingCollapse" style="border:0px !important">
                                <apex:outputpanel id="plusimageKP" style="display:none;">
                                    <table class="curvedEdges_expand" onclick="switchMenu('LineKPSection','{!$Component.minusimageKP}','{!$Component.plusimageKP}','true')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-expand ">
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputpanel>
                                <apex:outputpanel id="minusimageKP">
                                    <table class="curvedEdges_collapse" onclick="switchMenu('LineKPSection','{!$Component.plusimageKP}','{!$Component.minusimageKP}','false')">
                                        <tr>
                                            <td style="border-width:0px;height:7px;width:6px;padding:4px;" align="center" valign="middle">
                                                <div class="arrow-collapse ">
                                                </div>
                                            </td>
                                        </tr>
                                     </table>
                                </apex:outputpanel>
                            </td>
                            <td class="headingCollapse" style="border:0px !important">{!$Label.Counterpart_Financing}</td>
                        </tr>
                    </table>
                </th>
            </tr>
            <tr id="LineKPSection">
                <td width="19%" rowspan="2" style="border:0px;" ></td>
                <th><center>{!intCurrentYear-2}</center></th>
                <th><center>{!intCurrentYear-1}</center></th>
                <th><center>{!intCurrentYear}</center></th>
                <td class="smalltd"></td>
                <th><center>{!intCurrentYear+1}</center></th>
                <th><center>{!intCurrentYear+2}</center></th>
                <th><center>{!intCurrentYear+3}</center></th>
            </tr>
            <tr id="LineKPSection">
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-2,intCurrentYear-3)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-2} 
                    </center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear-1,intCurrentYear-2)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear-1} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear,intCurrentYear-1)}
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear} 
                    </Center>
                </th>
                <td class="smalltd"></td>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+1,intCurrentYear)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+1} 
                    </Center>
                </th>                    
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+2,intCurrentYear+1)} 
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+2} 
                    </Center>
                </th>
                <th>
                    <center>
                        <span id="SM">{!strStartMonth}</span>/{!if(strImplementCycle == 'January - December',intCurrentYear+3,intCurrentYear+2)}  
                         - 
                        <span id="EM">{!strEndMonth}</span>/{!intCurrentYear+3} 
                    </Center>
                </th>
            </tr>
            <tr id="LineKPSection">
                <th width="19%" class="LineThColor">
                    <apex:outputPanel style="cursor:pointer !important;">
                         {!$Label.Government_Resources}
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineK}','{!$Component.optTextLinkK}','','','','','');"
                         onmouseout="onMouseOutHelpTextHide('{!$Component.optLineK}');" >
                        <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineK" styleClass="helpTextPopup" style="display:none;margin-top: 28px;">
                        <apex:outputText id="optTextLinkK">
                            <center>
                            {!$Label.Line_K_Govt_Resources_NSP}
                            {!$Label.Line_K_Govt_Resources_NSP_sum}
                            <!--LINE K: Total government resources towards the National Strategic Plan in current and previous years    
                            Line K = B1 + B2 + B3 + B4 entries  in current and past 2 years--></center>
                        </apex:outputText>
                    </apex:outputPanel>
                </th>
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="optTotalK2" value="{0,number,###,###,###}">
                <apex:param value="{!TotalK2}"/>
                </apex:outputText>
                </td>
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="optTotalK1" value="{0,number,###,###,###}">
                <apex:param value="{!TotalK1}"/>
                </apex:outputText>
                </td>
                <td width="12%" class="ColorGraytd">
                <apex:outputText id="optTotalK" value="{0,number,###,###,###}">
                <apex:param value="{!TotalK}"/>
                </apex:outputText>
                </td>
                <td class="smalltd" width="1%" ></td>
                <td colspan="3" width="36%" ><apex:outputtext /></td>
                <td width="8%"></td>
            </tr>
            <tr id="LineKPSection"><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            <tr id="LineKPSection">
                <th class="LineThColor">
                    <apex:outputPanel style="cursor:pointer !important;">
                             {!$Label.Average_Government_Resources}
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineL}','{!$Component.optTextLinkL}','','','','','');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineL}');" >
                        <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineL" styleClass="helpTextPopup" style="display:none;margin-top: 28px;">
                        <apex:outputText id="optTextLinkL">
                             {!$Label.Line_L_Annual_Average_Govt_Resources_NSP}<!--LINE L: Yearly average of government  resources towards the National Strategic Plan in current and previous years-->
                            <center>{!$Label.Line_L_Annual_Average_Govt_Resources_NSP_def}<!--Line L = Average of Line K entries for past 3 years--></center>
                        </apex:outputText>
                    </apex:outputPanel>
                </th>
                <td colspan="3" class="ColorGraytd">
                <apex:outputText id="LAverage" value="{0,number,###,###,###}">
                    <apex:param value="{!LAverage}"/>
                </apex:outputText>                
                </td>
                <td class="smalltd"></td>
                <td colspan="3"><apex:outputtext /></td>
            </tr>
            <tr id="LineKPSection"><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            <tr id="LineKPSection">
                <th colspan="3" class="LineThColor">
                    <apex:outputPanel style="cursor:pointer !important;">
                            {!$Label.Average_Request_Allocated}<!--Average of request within indicative-->
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineM}','{!$Component.optTextLinkM}','','','','','');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineM}');" >
                        <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineM" styleClass="helpTextPopup" style="display:none;margin-top: 10px;">
                        <apex:outputText id="optTextLinkM">
                            <center>
                            {!$Label.Line_M_Annual_Average_GF_Request_Allocated_Amount}<br/>
                            <!--LINE M: Yearly average of Global Fund Funding Request within the Indicative Amount (including existing commitments)<br/>-->
                            {!$Label.Line_M_Annual_Average_GF_Request_Allocated_Amount_def}
                            <!--Line M = Average of Line D  and Line H entries for upcoming Y1, Y2, Y3 funding request--></center>
                        </apex:outputText>
                    </apex:outputPanel>
                </th>
                
                <!-- <td colspan="3" class="ColorGraytd"><apex:outputText id="MAverage" value="{!CPF_Report__c.M_Average__c}"/></td> -->
               <td colspan="5" class="ColorGraytd"><apex:outputText id="MAverage" value="{0,number,###,###,###}"><apex:param value="{!MAverage}"/></apex:outputText></td>
                
            </tr>
            <tr id="LineKPSection"><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            <tr id="LineKPSection">
                <th colspan="7" class="YellowField">
                    <apex:outputPanel style="cursor:pointer !important;">
                            {!$Label.CPF_Existing_Commitments}<!--Counterpart financing based on existing commitments-->
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineN}','{!$Component.optTextLinkN}','','','','','');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineN}');" >
                        <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineN" styleClass="helpTextPopup" style="display:none;margin-top: 10px;">
                        <apex:outputText id="optTextLinkN">
                            <!-- <center>
                            Line N: Counterpart financing based on existing Global Fund commitments and indicative financing = (calculation of government contribution)
                            </center>-->
                            <table width="50%" border="1" cellpadding="0" cellspacing="0">
                                <tr>
                                    <td colspan="3" style="align:center;background: lightgrey !important;">
                                        <apex:outputText value="{!$Label.Line_N_CPF_Existing_GF_Commitments}"/>
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td rowspan="2" style="vertical-align:middle;background: lightgrey !important;">
                                        <apex:outputText value="{!$Label.Line_N} ="/><!--Line N =-->
                                    </td>
                                    <td style="background: lightgrey !important;">
                                        <apex:outputText style="align:center">
                                            <center>{!$Label.Line_L}<!--[Average of total government resources for past 3 years(Line L)]--></center>
                                        </apex:outputText>
                                    </td>
                                    <td rowspan="2" style="vertical-align:middle;background: lightgrey !important;">
                                        <apex:outputText value="X 100"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background: lightgrey !important;">
                                        <center><apex:outputText >
                                        {!$Label.Line_M_L}
                                        <!--[Average Global Fund resources for upcoming Y1, Y2, Y3 (Line M)] + <br/>
                                        [Average of total government resources for past 3 <br/>
                                        years (Line L)]-->
                                        </apex:outputText></center>
                                    </td>
                                </tr>
                            </table>
                        </apex:outputText>
                    </apex:outputPanel>
                </th>
               <!-- <th colspan="7" class="YellowField">Line N: Counterpart financing based on existing Global Fund <br/> commitments and indicative financing = <br/> (calculation of government contribution)</th>-->
                <td class="ColorGraytd"><apex:outputText id="NAverage" value="{!NAverage}"/>%<!--{!if(NAverage == 0,'','%')}--></td>
            </tr>
            <tr id="LineKPSection">
                <th colspan="3" class="LineThColor">
                    <apex:outputPanel style="cursor:pointer !important;">
                             {!$Label.Average_Total_Request}<!--Average of total request-->
                    </apex:outputPanel>
                    <apex:outputpanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineO}','{!$Component.optTextLinkOTextFirst}','{!$Component.optTextLinkOText1}','{!$Component.optTextLinkOText2}','{!$Component.optTextLinkOText3}','{!$Component.optTextLinkOText4}','{!$Component.optTextLinkOText5}');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineO}');" >
                    <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineO" styleClass="helpTextPopup" style="display:none;margin-top: 10px;top:90% !important;">
                       {!$Label.Line_O_Average_Funding_Request_GF}<br/>
                       <!--LINE O: Yearly average of Total Funding Request to the Global Fund (including existing commitments)-->
                       {!$Label.Line_O_Average_D_G}
                       <!--<br/>Line O = Average of Line D and Line G entries for upcoming Y1, Y2, Y3 funding request-->
                       <!-- <table width="50%" border="1" cellpadding="0" cellspacing="0">
                           
                            <tr>
                                <td colspan="3" style="align:center;background: lightgrey !important;">
                                    <apex:outputText id="optTextLinkOTextFirst" value="LINE O: Yearly average of Total Funding Request to the Global Fund (including existing commitments)"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" style="align:center;background: lightgrey !important;">
                                    <apex:outputText id="optTextLinkOText1" value="Line O = Average of Line D and Line G entries for upcoming Y1, Y2, Y3 funding request"/>
                                </td>
                            </tr>
                            <tr>
                                <td rowspan="2" style="vertical-align:middle;background: lightgrey !important;">
                                    <apex:outputText id="optTextLinkOText2" value="Line O ="/>
                                </td>
                                <td style="background: lightgrey !important;">
                                    <apex:outputText id="optTextLinkOText3" style="align:center">
                                        <center>[Average of total government resources for past 3 <br/>years(Line L)]</center>
                                    </apex:outputText>
                                </td>
                                <td rowspan="2" style="vertical-align:middle;background: lightgrey !important;">
                                    <apex:outputText id="optTextLinkOText4" value="X 100"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="background: lightgrey !important;">
                                    <center><apex:outputText id="optTextLinkOText5">
                                    [Average Global Fund resources for upcoming Y1, Y2, <br/>
                                    Y3 (Line M)] + <br/>
                                    [Average of total government resources for past 3 <br/>
                                    years (Line L)]
                                    </apex:outputText></center>
                                </td>
                            </tr>
                        </table>-->
                    </apex:outputPanel>
                </th>
                
                <td colspan="5" class="ColorGraytd"><apex:outputText id="OAverage" value="{0,number,###,###,###}"><apex:param value="{!OAverage}"/></apex:outputText></td>
            </tr>
            <tr id="LineKPSection"><td colspan="8" style="border: 2px solid #000000;padding:0px;"></td></tr>
            <tr id="LineKPSection">
                <th colspan="7" class="YellowField">
                    <apex:outputPanel style="cursor:pointer !important;" >
                             {!$Label.CPF_Total_Request}<!--Counterpart financing based on total funding request-->
                    </apex:outputPanel>
                    <apex:outputPanel style="cursor:pointer !important;" onmouseover="onMouseOverHelpTextShow('{!$Component.optLineP}','{!$Component.optTextLinkPText1}','{!$Component.optTextLinkPTextFirst}','{!$Component.optTextLinkPText2}','{!$Component.optTextLinkPText3}','{!$Component.optTextLinkPText4}','');"
                             onmouseout="onMouseOutHelpTextHide('{!$Component.optLineP}');" >
                    <img class="helpOrb" title="" alt="" src="/s.gif"/>
                    </apex:outputpanel>
                    <apex:outputPanel id="optLineP" styleClass="helpTextPopup" style="display:none;margin-top: -10px;top:92% !important;">
                        <table width="50%" border="1" cellpadding="0" cellspacing="0">
                            <tr>
                                <td colspan="3" style="background: lightgrey !important;">
                                    <apex:outputText id="optTextLinkPTextFirst" value="{!$Label.Line_P_CPF_Existing_GF_Commitments}"></apex:outputText> <!--Line P: Counterpart financing based on existing Global Fund commitments and total funding request = (calculation of government contribution)-->
                                </td>
                            </tr>
                            <tr>
                                <td rowspan="2" style="vertical-align:middle;background: lightgrey !important;">
                                    <apex:outputText id="optTextLinkPText1" value="{!$Label.Line_P} ="/><!--Line P =-->
                                </td>
                                <td style="background: lightgrey !important;">
                                    <apex:outputText id="optTextLinkPText2" style="align:center;background: lightgrey !important;">
                                        <center>{!$Label.Line_P_text}<!--[Average of total government resources for past 3 <br/>years(Line L)]--></center>
                                    </apex:outputText>
                                </td>
                                <td rowspan="2" style="vertical-align:middle;background: lightgrey !important;">
                                    <apex:outputText id="optTextLinkPText3" value="X 100"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="background: lightgrey !important;">
                                    <center><apex:outputText id="optTextLinkPText4">
                                    {!$Label.Line_O_L}
                                    <!--[Average Global Fund resources for upcoming Y1, Y2, <br/>
                                    Y3 (Line O)] + <br/>
                                    [Average of total government resources for past 3 <br/>
                                    years (Line L)]-->
                                    <!--Is Line O here a typo? Should it be Line M? Or is Line 2013 a typo?-->
                                    </apex:outputText></center>
                                </td>
                            </tr>
                        </table>
                    </apex:outputPanel>
                </th>
                <td class="ColorGraytd"><apex:outputText id="PAverage" value="{!PAverage}"/>%<!--{!if(PAverage == 0,'','%')}-->
                    
                </td>
            </tr>
            
        </table>
        <script>
            function onMouseOverHelpTextShow(PopupPanelId,HelpTextValueFirst,HelpTextValue1,HelpTextValue2,HelpTextValue3,HelpTextValue4,HelpTextValue5) {
                if(HelpTextValueFirst.innerHTML != ''){
                    document.getElementById(PopupPanelId).style.display = ''; 
                }
                if(HelpTextValue1.innerHTML != ''){
                    document.getElementById(PopupPanelId).style.display = ''; 
                }
                if(HelpTextValue2.innerHTML != ''){
                    document.getElementById(PopupPanelId).style.display = ''; 
                }
                if(HelpTextValue3.innerHTML != ''){
                    document.getElementById(PopupPanelId).style.display = ''; 
                }
                if(HelpTextValue4.innerHTML != ''){
                    document.getElementById(PopupPanelId).style.display = ''; 
                }
                if(HelpTextValue5.innerHTML != ''){
                    document.getElementById(PopupPanelId).style.display = ''; 
                }
            }
            function onMouseOutHelpTextHide(PopupPanelId){     
              document.getElementById(PopupPanelId).style.display = 'none';        
            }
            
            function RemoveComma(CostValue){
                
                var ReComma = new RegExp("\\,","g");
                var ReQuate = new RegExp("\\'","g");
                CostValue = CostValue.replace(ReComma,"");
                CostValue = CostValue.replace(ReQuate,"");
                CostValue = CostValue.replace(",.",".");
                CostValue = CostValue.replace("'.",".");
                return CostValue;
            }
            function updateAllValuesOfC(size){
                var sizeC = size;//'{!lstWrapperFundingSourceC.size}';
                for(var i=0;i<sizeC;i++){
                    onChangeLineC(sizeC,i,'2');
                    onChangeLineC(sizeC,i,'1');
                    onChangeLineC(sizeC,i,'');
                    onChangeLineC(sizeC,i,'1Plus');
                    onChangeLineC(sizeC,i,'2Plus');
                    onChangeLineC(sizeC,i,'3Plus');
                }
                if(sizeC == '0')
                {
                    document.getElementById('page:frm:optTextCYear1').innerHTML = '0';
                    document.getElementById('page:frm:optTextCYear2').innerHTML = '0';
                    document.getElementById('page:frm:optTextCYear').innerHTML = '0';
                    document.getElementById('page:frm:optTextCYear1Plus').innerHTML = '0';
                    document.getElementById('page:frm:optTextCYear2Plus').innerHTML = '0';
                    document.getElementById('page:frm:optTextCYear3Plus').innerHTML = '0';
                }
            }
            function onChangeNationalPlan(CurrentYear,Year1,Year2,Year3,Answer) {
                var cy = document.getElementById(CurrentYear).value;
                var y1 = document.getElementById(Year1).value;
                var y2 = document.getElementById(Year2).value;
                var y3 = document.getElementById(Year3).value;
                
                cy = RemoveComma(cy);
                y1 = RemoveComma(y1);
                y2 = RemoveComma(y2);
                y3 = RemoveComma(y3);
                
                if(cy == '') cy = 0;
                if(y1 == '') y1 = 0;
                if(y2 == '') y2 = 0;                
                if(y3 == '') y3 = 0;
                
                document.getElementById(Answer).innerHTML = addCommas(parseFloat(cy)+parseFloat(y1)+parseFloat(y2)+parseFloat(y3));
                
                var totalAFGCY = parseFloat(cy) - parseFloat(RemoveComma(document.getElementById('page:frm:ARYear').innerHTML));
                document.getElementById('page:frm:AFGYear').innerHTML = addCommas(totalAFGCY);
                
                var totalAFG1 = parseFloat(y1) - parseFloat(RemoveComma(document.getElementById('page:frm:ARYear1Plus').innerHTML));
                document.getElementById('page:frm:AFGYear1Plus').innerHTML = addCommas(totalAFG1);
               
                var totalAFG2 = parseFloat(y2) - parseFloat(RemoveComma(document.getElementById('page:frm:ARYear2Plus').innerHTML));
                document.getElementById('page:frm:AFGYear2Plus').innerHTML = addCommas(totalAFG2);
               
                var totalAFG3 = parseFloat(y3) - parseFloat(RemoveComma(document.getElementById('page:frm:ARYear3Plus').innerHTML));
                document.getElementById('page:frm:AFGYear3Plus').innerHTML = addCommas(totalAFG3); 
                
                document.getElementById('page:frm:AFGAllYearTotal').innerHTML = addCommas(totalAFGCY + totalAFG1 + totalAFG2 + totalAFG3);
                
            }
            
            function CalculateTotalAR(){
                var ARYear = 0;
                var val = RemoveComma(document.getElementById('page:frm:ARYear').innerHTML);
                if(val != ''){
                    ARYear = parseFloat(val);
                }
                var AR1Plus = 0;
                var val = RemoveComma(document.getElementById('page:frm:ARYear1Plus').innerHTML);
                if(val != ''){
                    AR1Plus = parseFloat(val);
                }
                var AR2Plus = 0;
                var val = RemoveComma(document.getElementById('page:frm:ARYear2Plus').innerHTML);
                if(val != ''){
                    AR2Plus = parseFloat(val);
                }
                var AR3Plus = 0;
                var val = RemoveComma(document.getElementById('page:frm:ARYear3Plus').innerHTML);
                if(val != ''){
                    AR3Plus = parseFloat(val);
                }                        
                document.getElementById('page:frm:ARAllYearTotal').innerHTML = addCommas(ARYear + AR1Plus + AR2Plus + AR3Plus);
            }
            
            function CalculateTotalAFG(){
                
                var ARCurr = 0;
                var val = RemoveComma(document.getElementById('page:frm:AFGYear').innerHTML);
                if(val != ''){
                    ARCurr = parseFloat(val);
                    
                }
                
                var AR1Plus = 0;
                var val = RemoveComma(document.getElementById('page:frm:AFGYear1Plus').innerHTML);
                if(val != ''){
                    AR1Plus = parseFloat(val);
                    
                }
                var AR2Plus = 0;
                var val = RemoveComma(document.getElementById('page:frm:AFGYear2Plus').innerHTML);
                if(val != ''){
                    AR2Plus = parseFloat(val);
                    
                }
                var AR3Plus = 0;
                var val = RemoveComma(document.getElementById('page:frm:AFGYear3Plus').innerHTML);
                if(val != ''){
                    AR3Plus = parseFloat(val);
                    
                }                        
                document.getElementById('page:frm:AFGAllYearTotal').innerHTML = addCommas(ARCurr + AR1Plus + AR2Plus + AR3Plus);
            }
            
            function onChangeLineB(lstSize,Count,Num) {
                if(lstSize > 0){
                    var Total = 0;
                    
                    for(var i=0;i<lstSize;i++) {
                        if(document.getElementById('page:frm:rptLineBIn:'+i+':inpBYear'+Num) != null) {
                            var val = RemoveComma(document.getElementById('page:frm:rptLineBIn:'+i+':inpBYear'+Num).value);
                            if( val == '' || isNaN(val) == true) {
                                Total += 0;
                            } else {
                                Total += parseFloat(val);
                            }
                        }
                    }
                    if(Total > 0){
                        document.getElementById('page:frm:optTextBYear'+Num).innerHTML = addCommas(Total);
                    }else{
                        document.getElementById('page:frm:optTextBYear'+Num).innerHTML = '';
                    }
                    
                    if(Num == '1' || Num == '2' || Num == ''){
                        var TotalK = 0;
                        var val = RemoveComma(document.getElementById('page:frm:rptLineBIn:0:inpBYear'+Num).value);
                        if(val == '' || isNaN(val) == true) {
                            TotalK += 0; 
                        }else{
                            TotalK += parseFloat(val);
                        }
                        var val = RemoveComma(document.getElementById('page:frm:rptLineBIn:1:inpBYear'+Num).value);
                        if(val == '' || isNaN(val) == true) {
                            TotalK += 0; 
                        }else{
                            TotalK += parseFloat(val);
                        }
                        var val = RemoveComma(document.getElementById('page:frm:rptLineBIn:2:inpBYear'+Num).value);
                        if(val == '' || isNaN(val) == true) {
                            TotalK += 0; 
                        }else{
                            TotalK += parseFloat(val);
                        }
                        var val = RemoveComma(document.getElementById('page:frm:rptLineBIn:3:inpBYear'+Num).value);
                        if(val == '' || isNaN(val) == true) {
                            TotalK += 0; 
                        }else{
                            TotalK += parseFloat(val);
                        }
                        if(TotalK > 0){
                            document.getElementById('page:frm:optTotalK'+Num).innerHTML = addCommas(TotalK);
                        }else{
                            document.getElementById('page:frm:optTotalK'+Num).innerHTML = '';
                        }
                        
                        var NumAlt1;
                        var NumAlt2;
                        if(Num == '1') {
                            NumAlt1 = '2';
                            NumAlt2 = '';
                        }else if(Num == '2'){
                            NumAlt1 = '1';
                            NumAlt2 = '';
                        }else if(Num == ''){
                            NumAlt1 = '1';
                            NumAlt2 = '2';
                        }
                        var BYear1 = 0;
                        var val = RemoveComma(document.getElementById('page:frm:optTextBYear'+NumAlt1).innerHTML);
                        if(val != ''){
                            BYear1 = parseFloat(val);
                        }
                        var BYear2 = 0;
                        var val = RemoveComma(document.getElementById('page:frm:optTextBYear'+NumAlt2).innerHTML);
                        if(val != ''){
                            BYear2 = parseFloat(val);
                        }
                        
                        //document.getElementById('page:frm:LAverage').innerHTML = addCommas((Total + BYear1 + BYear2)/3);
                        //document.getElementById('page:frm:LAverage').innerHTML = addCommas(TotalK/3);
                        
                        var totalForLAvg = parseFloat(RemoveComma(document.getElementById('page:frm:optTotalK2').innerHTML)) + parseFloat(RemoveComma(document.getElementById('page:frm:optTotalK1').innerHTML)) + parseFloat(RemoveComma(document.getElementById('page:frm:optTotalK').innerHTML));
                        if(totalForLAvg > 0){
                            document.getElementById('page:frm:LAverage').innerHTML = addCommas(parseFloat(totalForLAvg/3));
                        }else{
                            document.getElementById('page:frm:LAverage').innerHTML = ''
                        }
                        
                        
                        var totalForN = parseFloat(RemoveComma(document.getElementById('page:frm:LAverage').innerHTML)) + parseFloat(RemoveComma(document.getElementById('page:frm:MAverage').innerHTML));
                        if(totalForN > 0){
                            document.getElementById('page:frm:NAverage').innerHTML = addCommas((parseFloat(RemoveComma(document.getElementById('page:frm:LAverage').innerHTML))/totalForN)*100);
                        }else{
                            document.getElementById('page:frm:NAverage').innerHTML = ''
                        }
                        
                        var totalForP = parseFloat(RemoveComma(document.getElementById('page:frm:OAverage').innerHTML)) + parseFloat(RemoveComma(document.getElementById('page:frm:LAverage').innerHTML));
                        if(totalForP > 0){
                            document.getElementById('page:frm:PAverage').innerHTML = addCommas((parseFloat(RemoveComma(document.getElementById('page:frm:LAverage').innerHTML)))/totalForP*100);
                        }else{
                            document.getElementById('page:frm:PAverage').innerHTML = ''
                        }
                    }
                    
                    if(Num == '1Plus' || Num == '2Plus' || Num == '3Plus' || Num == ''){
                        var TotalC = 0;
                        var val = RemoveComma(document.getElementById('page:frm:optTextCYear'+Num).innerHTML);
                        if(val != ''){
                            TotalC = parseFloat(val);
                        }
                        var TotalD = 0;
                        var val = RemoveComma(document.getElementById('page:frm:optTextDYear'+Num).innerHTML);
                        if(val != ''){
                            TotalD = parseFloat(val);
                        }
                        
                        var TotalAR = 0;
                        var TotalAR = Total + TotalC + TotalD;
                        if(TotalAR > 0){
                            document.getElementById('page:frm:ARYear'+Num).innerHTML = addCommas(TotalAR);
                        }else{
                            document.getElementById('page:frm:ARYear'+Num).innerHTML = '';
                        }                   
                        //document.getElementById('page:frm:AFGYear'+Num).innerHTML = addCommas(Total - TotalAR);
                        
                        document.getElementById('page:frm:AFGYear'+Num).innerHTML = addCommas(parseFloat(RemoveComma(document.getElementById('page:frm:rptInNational:0:inpYear'+Num).value)) - TotalAR);
                        
                        CalculateTotalAR();
                        CalculateTotalAFG();
                    }
                }
            }
            function onChangeLineC(lstSize,Count,Num) {
                if(lstSize > 0){
                    var Total = 0;
                    for(var i=0;i<lstSize;i++) {
                        if(document.getElementById('page:frm:rptLineCIn:'+i+':inpCYear'+Num) != null) {
                            var val = RemoveComma(document.getElementById('page:frm:rptLineCIn:'+i+':inpCYear'+Num).value);
                            if(val == '' || isNaN(val) == true) {
                                Total += 0;
                            } else {
                                Total += parseFloat(val);
                            }
                        }
                    }
                    if(Total > 0){
                        document.getElementById('page:frm:optTextCYear'+Num).innerHTML = addCommas(Total);
                    }else{
                        document.getElementById('page:frm:optTextCYear'+Num).innerHTML = '0';
                    }
                    if(Num == '1Plus' || Num == '2Plus' || Num == '3Plus' || Num == ''){
                        var TotalB = 0;
                        var val = RemoveComma(document.getElementById('page:frm:optTextBYear'+Num).innerHTML);
                        if(val != ''){
                            TotalB = parseFloat(val);
                        }
                        var TotalD = 0;
                        var val = RemoveComma(document.getElementById('page:frm:optTextDYear'+Num).innerHTML);
                        if(val != ''){
                            TotalD = parseFloat(val);
                        }
                        
                        var TotalAR = 0;
                        var TotalAR = Total + TotalB + TotalD;
                        if(TotalAR > 0){
                            document.getElementById('page:frm:ARYear'+Num).innerHTML = addCommas(TotalAR);
                        }else{
                            document.getElementById('page:frm:ARYear'+Num).innerHTML = '';
                        }                   
                        
                        //document.getElementById('page:frm:AFGYear'+Num).innerHTML = addCommas(Total - TotalAR);
                        if(document.getElementById('page:frm:rptInNational:0:inpYear'+Num).value == ''){
                            document.getElementById('page:frm:AFGYear'+Num).innerHTML = addCommas(0 - TotalAR);
                        }else{
                            document.getElementById('page:frm:AFGYear'+Num).innerHTML = addCommas(parseFloat(RemoveComma(document.getElementById('page:frm:rptInNational:0:inpYear'+Num).value)) - TotalAR);
                        }
                        CalculateTotalAR();
                        CalculateTotalAFG();
                        
                    }
                }
           }
           function onChangeLineD(lstSize,Count,Num) {
                if(lstSize > 0){
                    var Total = 0;
                    for(var i=0;i<lstSize;i++) {
                        if(document.getElementById('page:frm:rptLineDIn:'+i+':inpDYear'+Num) != null) {
                            var val = RemoveComma(document.getElementById('page:frm:rptLineDIn:'+i+':inpDYear'+Num).value);
                            if(val == '' || isNaN(val) == true) {
                                Total += 0;
                            } else {
                                Total += parseFloat(val);
                            }
                        }
                    }
                    if(Total > 0){
                        document.getElementById('page:frm:optTextDYear'+Num).innerHTML = addCommas(Total);
                    }
                    if(Num == '1Plus' || Num == '2Plus' || Num == '3Plus' || Num == ''){
                        var TotalC = 0;
                        var val = RemoveComma(document.getElementById('page:frm:optTextCYear'+Num).innerHTML);
                        if(val != ''){
                            TotalC = parseFloat(val);
                        }
                        var TotalB = 0;
                        var val = RemoveComma(document.getElementById('page:frm:optTextBYear'+Num).innerHTML);
                        if(val != ''){
                            TotalB = parseFloat(val);
                        }
                        
                        var TotalAR = 0;
                        var TotalAR = Total + TotalC + TotalB;
                        if(TotalAR > 0){
                            document.getElementById('page:frm:ARYear'+Num).innerHTML = addCommas(TotalAR);
                        }else{
                            document.getElementById('page:frm:ARYear'+Num).innerHTML = '';
                        }                   
                        //document.getElementById('page:frm:AFGYear'+Num).innerHTML = addCommas(Total - TotalAR);                      
                        document.getElementById('page:frm:AFGYear'+Num).innerHTML = addCommas(parseFloat(RemoveComma(document.getElementById('page:frm:rptInNational:0:inpYear'+Num).innerHTML)) - TotalAR);
                        
                        CalculateTotalAR();
                        CalculateTotalAFG();
                    }
                    if(Num == '1Plus' || Num == '2Plus' || Num == '3Plus' || Num == ''){
                        var NumAlt1;
                        var NumAlt2;
                        if(Num == '1Plus') {
                            NumAlt1 = '2Plus';
                            NumAlt2 = '3Plus';
                        }else if(Num == '2Plus'){
                            NumAlt1 = '1Plus';
                            NumAlt2 = '3Plus';
                        }else if(Num == '3Plus'){
                            NumAlt1 = '1Plus';
                            NumAlt2 = '2Plus';
                        }
                        var DYear1 = 0
                        var val = RemoveComma(document.getElementById('page:frm:optTextDYear'+NumAlt1).innerHTML);
                        if(val != ''){
                            DYear1 = parseFloat(val);
                        }
                        var DYear2 = 0;
                        var val = RemoveComma(document.getElementById('page:frm:optTextDYear'+NumAlt2).innerHTML);
                        if(val != ''){
                            DYear2 = parseFloat(val);
                        }
                        
                        var CountAvgM = 1;
                        var FRA = 0;
                        var val = RemoveComma(document.getElementById('page:frm:FRYear').innerHTML);
                        if(val != '' || isNaN(val) != true){
                            FRA = parseFloat(val);
                        }
                        var FRA1 = 0;
                        var val = RemoveComma(document.getElementById('page:frm:FRYear1Plus').innerHTML);
                        if(val != '' || isNaN(val) != true){
                            FRA1 = parseFloat(val);
                            CountAvgM ++;
                        }
                        var FRA2 = 0;
                        var val = RemoveComma(document.getElementById('page:frm:FRYear2Plus').innerHTML);
                        if(val != '' || isNaN(val) != true){
                            FRA2 = parseFloat(val);
                            CountAvgM ++;
                        }
                        var FRA3 = 0;
                        var val = RemoveComma(document.getElementById('page:frm:FRYear3Plus').innerHTML);
                        if(val != '' || isNaN(val) != true){
                            FRA3 = parseFloat(val);
                            CountAvgM ++;
                        }
                        
                        var CountAvgO = 1;
                        var FR = 0;
                        var val = RemoveComma(document.getElementById('page:frm:TFRYear').innerHTML);
                        if(val != '' || isNaN(val) != true){
                            FR = parseFloat(val);
                        }
                        
                        var FR1 = 0;
                        var val = RemoveComma(document.getElementById('page:frm:TFRYear1Plus').innerHTML);
                        if(val != '' || isNaN(val) != true){
                            FR1 = parseFloat(val);
                            CountAvgO ++;
                        }
                        
                        var FR2 = 0;
                        var val = RemoveComma(document.getElementById('page:frm:TFRYear2Plus').innerHTML);
                        if(val != '' || isNaN(val) != true){
                            FR2 = parseFloat(val);
                            CountAvgO ++;
                        }
                        var FR3 = 0;
                        var val = RemoveComma(document.getElementById('page:frm:TFRYear3Plus').innerHTML);
                        if(val != '' || isNaN(val) != true){
                            FR3 = parseFloat(val);
                            CountAvgO ++;
                        }
                        
                        //document.getElementById('page:frm:MAverage').innerHTML = addCommas((Total + DYear1 + DYear2 + FRA1 + FRA2 + FRA3)/3);
                        document.getElementById('page:frm:MAverage').innerHTML = addCommas((FRA + FRA1 + FRA2 + FRA3)/CountAvgM);
                        if(isNaN(document.getElementById('page:frm:MAverage').innerHTML) == true){
                            document.getElementById('page:frm:MAverage').innerHTML = '';
                        }
                        
                        //document.getElementById('page:frm:OAverage').innerHTML = addCommas((Total + DYear1 + DYear2 + FR1 + FR2 + FR3)/3);
                        document.getElementById('page:frm:OAverage').innerHTML = addCommas((FR + FR1 + FR2 + FR3)/CountAvgO);
                        if(isNaN(document.getElementById('page:frm:OAverage').innerHTML) == true){
                            document.getElementById('page:frm:OAverage').innerHTML = '';
                        }
                        var totalForN = parseFloat(RemoveComma(document.getElementById('page:frm:LAverage').innerHTML)) + parseFloat(RemoveComma(document.getElementById('page:frm:MAverage').innerHTML));
                        if(totalForN > 0){
                            document.getElementById('page:frm:NAverage').innerHTML = addCommas((parseFloat(document.getElementById('page:frm:LAverage').innerHTML)/totalForN)*100);
                        }else{
                            document.getElementById('page:frm:NAverage').innerHTML = ''
                        }
                        
                        var totalForP = parseFloat(RemoveComma(document.getElementById('page:frm:OAverage').innerHTML)) + parseFloat(RemoveComma(document.getElementById('page:frm:LAverage').innerHTML));
                        if(totalForP > 0){
                            document.getElementById('page:frm:PAverage').innerHTML = addCommas((parseFloat(document.getElementById('page:frm:LAverage').innerHTML))/totalForP*100);
                        }else{
                            document.getElementById('page:frm:PAverage').innerHTML = ''
                        }
                    }
                }
           }
           
           function onChangeLineJ(lstSize,Count,Num) {
                if(lstSize > 0){
                    var Total = 0;
                    for(var i=0;i<lstSize;i++) {
                        if(document.getElementById('page:frm:rptLineJIn:'+i+':inpJYear'+Num) != null) {
                            var val = RemoveComma(document.getElementById('page:frm:rptLineJIn:'+i+':inpJYear'+Num).value);
                            if(val == '' || isNaN(val) == true) {
                                Total += 0;
                            } else {
                                Total += parseFloat(val);
                            }
                        }
                    }
                    if(Total > 0){
                        document.getElementById('page:frm:optTextJYear'+Num).innerHTML = addCommas(Total);
                    }else{
                        document.getElementById('page:frm:optTextJYear'+Num).innerHTML = '';
                    }
               }
           }
           function CalculateTotalFR(FR,FRA,Total){
                var TotalFR = 0;
                var val = RemoveComma(document.getElementById(FR).value);
                if(val == '' || isNaN(val) == true){
                    TotalFR += 0;
                }else{
                    TotalFR += parseFloat(val);
                }
                var val = RemoveComma(document.getElementById(FRA).value);
                if(val == '' || isNaN(val) == true){
                    TotalFR += 0;
                }else{
                    TotalFR += parseFloat(val);
                }
                if(TotalFR > 0){
                    document.getElementById(Total).innerHTML = addCommas(TotalFR);
                }else{
                    document.getElementById(Total).innerHTML = '';
                }
            }
            function onChangeLineI(lstSize,Num){
                if(lstSize > 0){
                    var Total = 0;
                    for(var i=0;i<lstSize;i++) {
                        if(document.getElementById('page:frm:rptLineIIn:'+i+':inpIYear'+Num) != null) {
                            var val = RemoveComma(document.getElementById('page:frm:rptLineIIn:'+i+':inpIYear'+Num).value);
                            if(val == '' || isNaN(val) == true) {
                                Total += 0;
                            } else {
                                Total += parseFloat(val);
                            }
                        }
                    }
                    if(Total > 0){
                        document.getElementById('page:frm:TFRYear'+Num).innerHTML = addCommas(Total);
                    }else{
                        document.getElementById('page:frm:TFRYear'+Num).innerHTML = '';
                    }
               }    
            
            }
            function openPopup(popupId){
                document.getElementById(popupId).style.display = '';
                return false;
            }
            function closePopup(popupId){
                document.getElementById(popupId).style.display = 'none';
                return false;
            }
            function OpenDeletePopup(popupId){
                document.getElementById(popupId).style.display = '';
                return false;
            }
            function CloseDeletePopup(popupId){
                document.getElementById(popupId).style.display = 'none';
                return false;
            }
            
            function limitDecimalPlaces(input){
                if(input.value!=''){
                    
                    var RemoveCommaValue = RemoveComma(input.value);
                    if(isNaN(RemoveCommaValue)==false){                       
                        input.value = Math.round(RemoveCommaValue*100)/100;
                    }else{
                        alert("{!$Label.Enter_Amount}"); <!--Please enter a valid Amount.-->
                        input.value='';
                        return false;
                    }
                }
            }
            function addCommas(nStr){
                nStr = Math.round(nStr*100)/100;
                nStr += '';
                x = nStr.split('.');
                x1 = x[0];
                x2 = x.length > 1 ? '.' + x[1] : '';
                var rgx = /(\d+)(\d{3})/;
                while (rgx.test(x1)) {
                    x1 = x1.replace(rgx, '$1' + ',' + '$2');
                }
                return x1 + x2;
            }
            function addCommasother(nStr){
                nStr = Math.round(nStr*100)/100;
                nStr += '';
                x = nStr.split('.');
                x1 = x[0];
                x2 = x.length > 1 ? '.' + x[1] : '';
                var rgx = /(\d+)(\d{3})/;
                while (rgx.test(x1)) {
                    x1 = x1.replace(rgx, '$1' + "'" + '$2');
                }
                return x1 + x2;
            }
            function externalSourceTypeChanged(pickList,otherTextboxID){
                var objOtherTextBox = document.getElementById(otherTextboxID);
                if(pickList.options[pickList.selectedIndex].text=='Other'){                    
                    objOtherTextBox.value ='';
                    objOtherTextBox.style.display='';
                }else{
                    objOtherTextBox.value ='';
                    objOtherTextBox.style.display='none';
                }
            }
            switchMenu('LineBSection','page:frm:minusimage','page:frm:plusimage','true');
            switchMenu('LineCSection','page:frm:minusimage','page:frm:plusimage','true');
            switchMenu('LineDSection','page:frm:minusimage','page:frm:plusimage','true');
            switchMenu('LineEISection','page:frm:minusimage','page:frm:plusimage','true');
            switchMenu('LineJSection','page:frm:minusimage','page:frm:plusimage','true');
            switchMenu('LineKPSection','page:frm:minusimage','page:frm:plusimage','true');
            
            function switchMenu(obj,obj1,obj2,val) 
            {
                //document.getElementById(hdn).value = val; 
                var AllTr = document.getElementsByTagName("tr");
                for(var i=0;i<AllTr.length;i++){
                    //alert(AllTr[i].id);
                    if(AllTr[i].id == obj){
                        if ( AllTr[i].style.display != 'none' ) {
                            AllTr[i].style.display = 'none';
                        }
                        else {
                            AllTr[i].style.display = '';
                        }
                    }
                }
                
                var e2 = document.getElementById(obj1);                                       
                if ( e2.style.display != 'none' ) {
                e2.style.display = 'none';
                }
                else {
                e2.style.display = '';
                }
                 var e3 = document.getElementById(obj2);                                       
                if ( e2.style.display != 'none' ) {
                e3.style.display = 'none';
                }
                else {
                e3.style.display = '';
                }
            }
            function changeStartAndEndMonth(cycle){
                if(cycle.value != '' && cycle.value != 'January - December'){
                    if(cycle.value.indexOf(" - ") != -1){
                        var splitMonths = cycle.value.split(" - ");
                        var StartMonth = splitMonths[0];
                        var EndMonth = splitMonths[1];
                        var StartMonthTotal = document.getElementsByTagName("span");
                        for(var i=0;i<StartMonthTotal.length;i++){
                            if(StartMonthTotal[i].id == 'SM')
                                StartMonthTotal[i].innerHTML = getMonth(StartMonth);
                            if(StartMonthTotal[i].id == 'EM')
                                StartMonthTotal[i].innerHTML = getMonth(EndMonth);
                        }
                    }
                }
            }
            
            function getMonth(strMonth){
                var strMonthNumber = '';
                if(strMonth == '{!$Label.January}') strMonthNumber = '01';
                if(strMonth == '{!$Label.February}') strMonthNumber = '02'; 
                if(strMonth == '{!$Label.March}') strMonthNumber = '03';
                if(strMonth == '{!$Label.April}') strMonthNumber = '04';
                if(strMonth == '{!$Label.May}') strMonthNumber = '05';
                if(strMonth == '{!$Label.June}') strMonthNumber = '06';
                if(strMonth == '{!$Label.July}') strMonthNumber = '07';
                if(strMonth == '{!$Label.August}') strMonthNumber = '08';
                if(strMonth == '{!$Label.September}') strMonthNumber = '9';
                if(strMonth == '{!$Label.October}') strMonthNumber = '10';
                if(strMonth == '{!$Label.November}') strMonthNumber = '11';
                if(strMonth == '{!$Label.December}') strMonthNumber = '12';
                return strMonthNumber;
            }
            function RefreshLineDConfirm(){
                var conf = confirm('{!$Label.Quick_Save_Warning}'); <!--Any unsaved data will be lost upon running the Existing Global Fund Resources Query. Please click "Quick Save" first to save your data.-->
                if(conf == true){
                    actRefreshLineD();
                    return false;
                }else{
                    return false;
                }
            }
        </script>
    <apex:outputPanel id="HistoryPopup" >
    <apex:outputPanel id="popupBackgroundH" styleClass="popupBackgroundHistory" rendered="{! if(blnHistory  == true,true,false)}" />
        <apex:outputPanel id="custPopupH" styleClass="custPopupHistory" rendered="{! if(blnHistory  == true,true,false)}">
        
            <table>
            <tr>
                <td>
                    <apex:dynamicComponent componentValue="{!showHistoryPopup}" id="dynCompoHistory" />
                </td>
            </tr>
            <tr>
                <td align="center" style="">
                    <apex:commandButton value="OK" action="{!HidePopupHistory}" style="width:50px" reRender="frm" status="Processing"> 
                    </apex:commandButton>
                </td>
            </tr>
            </table> 
              
        </apex:outputPanel>
    </apex:outputPanel>
     <script>
        var nodes = document.getElementsByTagName('input');
        for(var i = 0; i < nodes.length; i++)
        {
            if(nodes[i].type == "text" && nodes[i].id != 'phSearchInput'){
                // TCS 10/09/2014 Profile Access Setting
                //nodes[i].disabled = {!blnReadOnly};
                nodes[i].disabled = {!!blnIPFields};
              
                
            }
        }
        var nodesSelect = document.getElementsByTagName('select');
        for(var i = 0; i < nodesSelect.length; i++)
        {
            //TCS 10/09/2014 Profile Access Setting
            //nodesSelect[i].disabled = {!blnReadOnly};
            nodesSelect[i].disabled = {!!blnIPFields};
         }
     </script>  
    
    </apex:form>
</apex:page>