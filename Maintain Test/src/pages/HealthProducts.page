<apex:page id="page" standardController="Page__c" extensions="ctrlHealthProducts" showHeader="true" sidebar="false" tabstyle="Grant_Making_home__tab">
    <apex:stylesheet value="{!URLFOR($Resource.GoalsJs, 'assets/css/bootstrap.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.GoalsJs, 'assets/css/bootstrap-responsive.css')}"/>
    <apex:includeScript value="{!$Resource.jquery142}" />
    <style>
        .headerRowUpper{
            border:1px solid #E0E3E5 !important;
            font-weight:bold !important;         
        }
        .headerRowLower{
            border:1px solid #E0E3E5 !important;
            font-weight:bold !important;
            background-color:#0066BB !important;
            color:white !important;
            white-space: normal !important;
        }
        .totalRow{
            border-top:1px;
            font-weight:bold !important;
        }
        .TDstyle{
            /*border-top:1px solid #E0E3E5 !important;
            border-left:1px solid #E0E3E5 !important;
            border-bottom:1px solid #E0E3E5 !important;*/
            border:1px solid #E0E3E5 !important;
            vertical-align: top;
        }
        input{
            width: 50px;
        }
        label {
            font-weight: bold;
            display: inherit;
        }
        .rightspace{
            margin-right:5px;
        }
        .pageContent {
            color: #4A4A56; 
            font-size: 0.9em; 
            font-weight: bold; 
            padding-left: 1px;
        }
        .pageTitleIcon {
            margin-top: 5px;
            background-image: url("/img/sprites/master.png");
            background-position: 0 -1058px;
            height: 32px;
            width: 32px;
            display: inline;
            float: left;
            margin-right: 5px;
            margin-left: 10px;
        }
        .pageDescription{
            font-size: 1.8em; 
            font-weight: normal;
            line-height: 1.1em;
        }
        .sidebarMenu{
            width : 270px;
        }
        .custPopup{
            background-color: #ededed;
            border-width: 0px;
            border-radius:10px;
            border-style: solid;
            z-index: 9999;
            left: 50%;
            margin-top:-60px;
            padding:10px;
            position: absolute;
            width:300px;
            height:130px;
        }
        .popupBackground{
            background-color:black;
            opacity: 0.50;
            filter: alpha(opacity = 20);
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 9998;
            top: 0;
            left: 0;
        }
        .popupButtonYes{
            background-color: #49C739 !important;
            background-image: none !important;
            color: white !important;
            font-size: 12.9pt !important;
            font-weight: bold !important;
            height: 30px !important;;
            width: 90px !important;;
        }
        .popupButtonCancel{
            background-color: #d82516 !important;
            background-image: none !important;
            color: white !important;
            font-size: 12.9pt !important;
            font-weight: bold !important;
            height: 30px !important;;
            width: 90px !important;;
        }
        .deletePopup{
            background-color: #EDEDED !important;
            border-top: 0px !important;
            text-align:center !important;
        }
        .deletePopupCancel{
            background-color: #EDEDED !important;
            border-top: 0px !important;
            text-align:left !important;
        }
        .TGFbtn-mini{
            margin-top:6px;
        }
        h3{
            font-size:24px;
        }
        h4{
            font-size:18px;
        }
        .active {
            pointer-events: none;
            cursor: default;
        }
        .webkitright {
            text-align: right;
            white-space: nowrap;
        };
        .headerSearchContainer {
            margin-top: -20px !important;
        }    
        .phHeaderCustomLogo .headerSearchLeftRoundedCorner {
            margin-top: -20px !important;
        } 
        .TGFbtn-mini{
            margin-top:6px;
        }
        .custDialogPopup{
            background-color: white;
            border-width: 0px;
            border-radius:10px;
            border-style: solid;
            /*z-index: 9999;*/
            z-index: 51;
            left: 6%;
            padding:10px;
            position: absolute;
            top:30%;
           
        }
        .popupDialogBackground{
            background-color:black;
            opacity: 0.20;
            filter: alpha(opacity = 20);
            position: absolute;
            width: 100%;
            height: 100%;
            /*z-index: 9998;*/
            z-index: 50;
            top: 0;
            left: 0;
           
        }
        .imgclass:hover{  
            background-image: url(/img/help/helpOrbs.gif);  
            background-repeat: no-repeat;  
            width: 16px;  
            height: 15px;     
            background-position: right;  
         
        }  
        .imgclass{  
            background-image: url(/img/help/helpOrbs.gif);  
            background-repeat: no-repeat;  
            width: 16px;  
            height: 15px;  
        } 
    </style>
    <script>
      $(document).ready(function () {
          $('label.tree-toggler').click(function () {
              $(this).parent().children('ul.tree').toggle(300);
          });
          
           if ( $.browser.webkit ) {
            $("#phHeaderLogoImage").parents("table").find("td").eq(2).removeClass("right").addClass("webkitright");  
           };
      });
    </script>
    <div class="margin20">
    <!--<ul class="breadcrumb">
        <li>
            <a href="{!if($Profile.Name=='PR Standard Portal User','/GM','')}{!if($Profile.Name=='PR Manager Portal User','/GM','')}{!if($Profile.Name=='PR Read-Only Portal User','/GM','')}{!if($Profile.Name=='LFA GM Admin Portal User','/GM','')}{!if($Profile.Name=='LFA GM Editor Portal User','/GM','')}{!if($Profile.Name=='PR Only Portal User','/GM','')}/apex/OpenConceptNotesH" class="link">{!strConceptNotes }</a>
            <span class="divider">/</span>
        </li>
        <li>
            <a href="{!if($Profile.Name=='PR Standard Portal User','/GM','')}{!if($Profile.Name=='PR Manager Portal User','/GM','')}{!if($Profile.Name=='PR Read-Only Portal User','/GM','')}{!if($Profile.Name=='LFA GM Admin Portal User','/GM','')}{!if($Profile.Name=='LFA GM Editor Portal User','/GM','')}{!if($Profile.Name=='PR Only Portal User','/GM','')}/apex/openconceptnotesH?id={!Page__c.Concept_Note__r.CCM_new__r.Country__c}" class="link">{!Page__c.Concept_Note__r.CCM_new__r.Country__r.Name}</a>
            <span class="divider">/</span>
        </li>
        <li>
            {!Module__c.Implementation_Period__r.Name}                    
        </li>
    </ul>-->
    <h3>
        {!$label.PSM_Products_and_Costs}
    </h3>
    
    <chatter:feedWithFollowers id="chatterFeed" entityId="{!Page__c.Id}"/>
    </div>
    
     <span class="pull-right">
         <!--  <a href="#" class="link">{!$label.See_Help}</a>  -->
          <a href="{!if((CONTAINS($Profile.Name,'PR') || CONTAINS($Profile.Name,$label.Applicant_CM_Admin) || CONTAINS($Profile.Name,$label.Applicant_CM_Read_Write) || CONTAINS($Profile.Name,$label.Applicant_CM_Read_Only) || CONTAINS($Profile.Name,$label.LFA_GM_Admin_Portal_User)),'/GM','')}/apex/GrantMakingGuidance?Id={!strGuidanceId}&lang={!strLanguage}" target="_blank" class="link">{!$label.See_Help}</a>
    </span>
    
    <br/>
    <apex:form id="frm">
    
        <apex:actionFunction action="{!fillGenericProduct}" name="actfillGenericProduct" status="Processing" reRender="frm">
            <apex:param value="" name="CostInputId" id="CostInputId"/>
            <apex:param value="" name="ChangeIndexGP" id="ChangeIndexGP"/>            
        </apex:actionFunction>
        
        <apex:actionFunction action="{!fillStrenthAndUnit}" name="actfillStrenthAndUnit" status="Processing" reRender="frm">
            <apex:param value="" name="GenericProductId" id="GenericProductId"/>
            <apex:param value="" name="ChangeIndex" id="ChangeIndex"/>            
        </apex:actionFunction>
        
         <apex:actionfunction action="{!ConvertIntervention}" name="Refreshdate" reRender="Refresh"/>
        <!--<apex:inputHidden value="{!intIndex}" id="hdnIndex"/>-->
        <div class="containerTGF">
            <br/>
        <table class="middle" cellpadding="10px">
          <tr>
            <td>    
                <apex:commandLink id="cmdLinkSaveGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-success" action="{!if($Profile.Name=='PR Standard Portal User','/GM','')}{!if($Profile.Name=='PR Manager Portal User','/GM','')}{!if($Profile.Name=='PR Read-Only Portal User','/GM','')}{!if($Profile.Name=='LFA GM Admin Portal User','/GM','')}{!if($Profile.Name=='LFA GM Editor Portal User','/GM','')}{!if($Profile.Name=='PR Only Portal User','/GM','')}/apex/grantmakingoverview?id={!strImplementationPeriodId}">
                      <strong>{!$Label.Back_to_Grant_Making_Overview}</strong>                                            
                </apex:commandLink>
            </td>
            <td>
                <apex:outputtext value="Select Category : " style="font-weight:bold;margin-left:20px;font-size:120%"/>               
                <apex:selectlist size="1" style="margin-left:10px;vertical-algin:middle;margin-top:18px" value="{!strSelectedCatagory}">
                    <apex:selectOptions value="{!CatagoryOptions}"></apex:selectOptions>
                    <apex:actionSupport event="onchange" action="{!selectedCatagory}" reRender="frm" status="Processing"/>
                </apex:selectlist>
            </td>
            <td style="padding-left:200px">            
                <apex:commandLink id="cmdConvertInterventionToBudgetLines" styleClass="TGFbtn TGFbtn-mini TGFbtn-primary" onclick="return CheckInterventionSplit();" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == '{!$label.PSM_Hub}') || ($Profile.Name == 'System Administrator') || ($Profile.Name == 'FPM') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'Country Team')) ,true,false)}"> <!-- "{!If(blndbutton,'TGFbtn TGFbtn-mini TGFbtn-success active','TGFbtn TGFbtn-mini TGFbtn-success')}" -->
                     <strong> {!$Label.Refresh_Detailed_Budget_with_PSM_Costs}  </strong>  
                    
                </apex:commandLink>
            </td>
            <td ><!-- 
               <apex:actionregion >
               <apex:outputpanel id="Refresh">
                
                <apex:outputtext value="{!If(isnull(Page__c.Implementation_Period__r.Last_Product_Roll_up__c),'','Budget last refreshed: ')}" style="font-size:120%;font-weight:bold;margin-left:12px;vertical-align:middle"/> 
                <apex:outputtext value="{!Page__c.Implementation_Period__r.Last_Product_Roll_up__c}" rendered="{!if(isnull(Page__c.Implementation_Period__r.Last_Product_Roll_up__c),false,true)}" style="font-size:120%;vertical-align:middle"/>
               
                </apex:outputpanel>
                 </apex:actionRegion>
                 -->
            </td>
          </tr>
        </table>                  
            
                <table width="100%">
                <tr>
                    <td valign="top" align="left">
                        <!--<div class="side_menu sidebarMenu">
                            <div class="well" style=" padding: 8px 0;">
                                <div>
                                    <ul class="nav nav-list">
                                        <li>
                                            <div class="tree-toggler nav-header">
                                                <a href="{!if($Profile.Name=='PR Standard Portal User','/GM','')}{!if($Profile.Name=='PR Manager Portal User','/GM','')}{!if($Profile.Name=='PR Read-Only Portal User','/GM','')}{!if($Profile.Name=='LFA GM Admin Portal User','/GM','')}{!if($Profile.Name=='LFA GM Editor Portal User','/GM','')}{!if($Profile.Name=='PR Only Portal User','/GM','')}/apex/grantmakingoverview?id={!strImplementationPeriodId}" class="link">Summary</a>
                                            </div>
                                        </li>
                                        <li class="divider">
                                        </li>
                                        <apex:repeat id="page" value="{!lstPageTodisplay}" var="P">
                                        
                                            <li>
                                                <div class="tree-toggler nav-header {!if(P.Id = Module__c.Id,' active ','')} ">
                                                    <a href="{!if($Profile.Name=='PR Standard Portal User','/GM','')}/apex/{!P.URL_prefix__c}?id={!P.Id}" class="link">{!P.Name}</a>
                                                </div>
                                            </li>
                                            <li class="divider">
                                            </li>
                                        </apex:repeat>
                                    </ul>
                                </div>
                            </div>
                        </div>-->
                    </td>
                    <td valign="top" align="left" class="indicatorSide">   
                        <apex:inputHidden value="{!strSelectedYear}" id="hdnSelectedYear"/>
                        <table width="100%" cellspacing="0" cellsspacing="0" border="0" class="list">
                            <thead class="rich-table-thead">
                                <tr class="headerRow">
                                    <th width="50%"></th>
                                    <th class="headerRowUpper" id="MainThYear1" style="color:{!if(strSelectedYear == 'Year1','#FFFFFF','#00688B')};text-decoration:{!if(strSelectedYear != 'Year1','underline','')};background-color:{!if(strSelectedYear == 'Year1','#434445','#DFEFF0')};" onclick="displayYearToggle('MainThYear1','{!$Component.hdnSelectedYear}','Year1','Year1th','Year1td');">
                                        <apex:outputlabel value="Year 1" styleclass="link"/>
                                    </th>                
                                    <th class="headerRowUpper" id="MainThYear2" style="color:{!if(strSelectedYear == 'Year2','#FFFFFF','#00688B')};text-decoration:{!if(strSelectedYear != 'Year2','underline','')};background-color:{!if(strSelectedYear == 'Year2','#434445','#E7F2D5')};" onclick="displayYearToggle('MainThYear2','{!$Component.hdnSelectedYear}','Year2','Year2th','Year2td');">
                                        <apex:outputlabel value="Year 2" styleclass="link"/>
                                    </th>                
                                    <th class="headerRowUpper" id="MainThYear3" style="color:{!if(strSelectedYear == 'Year3','#FFFFFF','#00688B')};text-decoration:{!if(strSelectedYear != 'Year3','underline','')};background-color:{!if(strSelectedYear == 'Year3','#434445','#FAF3CA')};" onclick="displayYearToggle('MainThYear3','{!$Component.hdnSelectedYear}','Year3','Year3th','Year3td');">
                                        <apex:outputlabel value="Year 3" styleclass="link"/>
                                    </th>               
                                    <th class="headerRowUpper" id="MainThYear4" style="color:{!if(strSelectedYear == 'Year4','#FFFFFF','#00688B')};text-decoration:{!if(strSelectedYear != 'Year4','underline','')};background-color:{!if(strSelectedYear == 'Year4','#434445','#F0E1E2')};display:{!if(strLengthYears != null && strLengthYears == '4','','none')}" onclick="displayYearToggle('MainThYear4','{!$Component.hdnSelectedYear}','Year4','Year4th','Year4td');">
                                        <apex:outputlabel value="Year 4" styleclass="link"/>
                                   </th>
                                </tr>
                            </thead>
                         </table>
                         <div style="display:{!if(isnull(strSelectedCatagory),'','none')};font-size:12px;font-weight:bold">
                             <apex:outputtext value="Please select a category."/>
                         </div>
                         <table class="table table-striped" style="display:{!if(isnull(strSelectedCatagory),'none',if(strSelectedCatagory != 'PSM Cost','','none'))};">
                             <thead>
                                <tr class="headerRow">
                                    <th class="headerRowLower" width="2%">
                                        <apex:outputlabel value="#"/>
                                    </th>                                                   
                                    <th class="headerRowLower" width="10%">
                                        <apex:outputlabel value="Product Category"/>
                                    </th>                
                                    <th class="headerRowLower" width="15%" style="display:{!if(strSelectedCatagory == 'PSM Costs','none','')}">
                                        <apex:outputlabel value="Product Name"/>
                                    </th>                
                                    <th class="headerRowLower" width="10%" style="display:{!if(strSelectedCatagory == 'PSM Costs','none','')}">
                                        <apex:outputlabel value="Specification"/>
                                    </th>
                                    <th class="headerRowLower" width="10%">
                                        <apex:outputlabel value="Recipient"/>
                                    </th>
                                                     
                                    
                                    <th class="headerRowLower" id="Year1th_UC" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year1','','none'))}">
                                        <apex:outputlabel value="Unit Cost Y1"/>
                                    </th>
                                    <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};background-color:white !important;"></th>              
                                    <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:outputlabel value="Q1"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:outputlabel value="Q2"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:outputlabel value="Q3"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:outputlabel value="Q4"/>
                                    </th>
                                    <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:outputlabel value="Total Y1"/>
                                    </th>
                                    
                                    <th class="headerRowLower" id="Year2th_UC" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year2','','none'))}">
                                        <apex:outputlabel value="Unit Cost Y2"/>
                                    </th>
                                    <th class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};background-color:white !important;"></th>
                                    <th class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                        <apex:outputlabel value="Q5"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                        <apex:outputlabel value="Q6"/>
                                    </th>                
                                    <th  class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                        <apex:outputlabel value="Q7"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                        <apex:outputlabel value="Q8"/>
                                    </th>
                                    <th class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                        <apex:outputlabel value="Total Y2"/>
                                    </th>
                                    
                                    <th class="headerRowLower" id="Year3th_UC" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year3','','none'))}">
                                        <apex:outputlabel value="Unit Cost Y3"/>
                                    </th>
                                    <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};background-color:white !important;"></th>
                                    <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                        <apex:outputlabel value="Q9"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                        <apex:outputlabel value="Q10"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                        <apex:outputlabel value="Q11"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                        <apex:outputlabel value="Q12"/>
                                    </th>
                                    <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                        <apex:outputlabel value="Total Y3"/>
                                    </th>
                                    
                                    <th class="headerRowLower" id="Year4th_UC" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year4','','none'))}">
                                        <apex:outputlabel value="Unit Cost Y4"/>
                                    </th>
                                    <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};background-color:white !important;"></th>
                                    <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                        <apex:outputlabel value="Q13"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                        <apex:outputlabel value="Q14"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                        <apex:outputlabel value="Q15"/>
                                    </th>                
                                    <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                        <apex:outputlabel value="Q16"/>
                                    </th>
                                    <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                        <apex:outputlabel value="Total Y4"/>
                                    </th>
                                    <th class="headerRowLower">
                                        <apex:outputlabel value="Grand Total"/>
                                    </th>
                                </tr>
                            </thead>
                            <apex:actionFunction action="{!SaveProduct}" reRender="frm" status="Processing" name="actSaveProduct">
                                <apex:param value="" name="SaveIndex" id="SaveIndex"/>
                                <apex:param value="" name="CPId" id="CPId"/>
                            </apex:actionFunction>
                            <apex:actionFunction name="actSavePSMSplit" action="{!SavePSMSplit}" status="Processing" rerender="frm"/> <!-- -->
                            <!--<apex:actionFunction action="{!SelectUnitMeasure}" reRender="frm" status="Processing" name="actSelectUnitMeasure">
                                <apex:param value="" name="SelectIndex" id="SelectIndex"/>
                            </apex:actionFunction>
                            
                            <apex:actionFunction name="actSaveAssumptionNew" action="{!SaveAssumptionNew}" status="Processing" rerender="frm" />-->
                            <apex:variable value="{!1}" var="Count"/>
                            <apex:repeat id="rptBudgetLine" value="{!lstProducts}" var="Product">
                                <tr>
                                    <td class="dataCell TDstyle" >
                                        <apex:outputText value="{!Count}"/>
                                    </td>                                    
                                    
                                   <td class="dataCell TDstyle" >
                                        
                                        <apex:outputPanel >
                                            <apex:selectList id="SelCI" value="{!Product.strCostInputName}" size="1" style="width:150px;" rendered="{!!Product.blnIsEditable}"  onchange="return SelectGenericProductName(this.value,'{!Count-1}');">
                                                <apex:selectOptions value="{!CostInputOptions}"></apex:selectOptions>
                                            </apex:selectList> 
                                            
                                            <apex:outputText value="{!Product.strCostInputName}" rendered="{!Product.blnIsEditable}"/>  &nbsp;&nbsp;
                                            
                                            <apex:outputPanel rendered="{!Product.blnIsEditable && If(Product.objProduct.Cost_Input__r.Is_Inactive__c=true,true,false)}">                                                          
                                              <!--  <img src="/s.gif" Class="imgclass" title="Cost Input is inactive" />  -->
                                                <apex:image url="{!$Resource.Alert_Icon}" title="Cost Input is inactive"/>
                                            </apex:outputPanel>
                                        </apex:outputPanel> 
                                        
                                        <!--<apex:outputPanel rendered="{!if(Product.objProduct.Product_Main_Category__c == 'Other Products',true,false)}"> 
                                            <apex:inputField id="SelCIOther" value="{!Product.objProduct.Product_Category__c}" rendered="{!!Product.blnIsEditable}"/>
                                            <apex:outputField value="{!Product.objProduct.Product_Category__c}" rendered="{!Product.blnIsEditable}"/>
                                        </apex:outputPanel>-->
                                        
                                    </td> 
                                    
                                    <td class="dataCell TDstyle" style="display:{!if(strSelectedCatagory == 'PSM Costs','none','')} !important">
                                        <apex:outputPanel rendered="{!if(Product.objProduct.Product_Main_Category__c != 'Other Products',true,false)}">
                                            <apex:selectList id="SelGP" value="{!Product.strGenericProductName}" size="1" style="width:150px;" rendered="{!!Product.blnIsEditable}" onchange="return SelectStrenthAndUnit(this.value,'{!Count-1}');">
                                                <apex:selectOptions value="{!Product.ProductNameOptions}"></apex:selectOptions>
                                            </apex:selectList>
                                            <apex:outputText value="{!Product.strGenericProductName}" rendered="{!Product.blnIsEditable}"/> &nbsp;&nbsp;
                                            <!-- Icon for inactive product -->
                                            <apex:outputPanel rendered="{!Product.blnIsEditable && If(Product.objProduct.Catalog_Product__r.Generic_Product__r.Is_Inactive__c=true,true,false)}">                                                          
                                                <apex:image url="{!$Resource.Alert_Icon}" title="This Generic Product is inactive"/>
                                            </apex:outputPanel>
                                            <!-- Complete -->
                                        </apex:outputPanel> 
                                        <apex:outputPanel rendered="{!if(Product.objProduct.Product_Main_Category__c == 'Other Products',true,false)}"> 
                                            <apex:inputField id="SelGPOther" style="height: 20px;width: 170px;resize:none;" value="{!Product.objProduct.Product_Name__c}" rendered="{!!Product.blnIsEditable}"/>
                                            <apex:outputField value="{!Product.objProduct.Product_Name__c}" rendered="{!Product.blnIsEditable}"/>
                                        </apex:outputPanel>                                                           
                                    </td>
                                    <td class="dataCell TDstyle" style="display:{!if(strSelectedCatagory == 'PSM Costs','none','')}">
                                        <apex:outputPanel rendered="{!if(Product.objProduct.Product_Main_Category__c != 'Other Products',true,false)}">
                                            <apex:selectList id="SelSU" value="{!Product.strStrengthAndUnit}" size="1" style="width:150px;" rendered="{!!Product.blnIsEditable}">
                                                <apex:selectOptions value="{!Product.StrengthAndUnitOptions}"></apex:selectOptions>
                                            </apex:selectList>
                                            <apex:outputText value="{!Product.strStrengthAndUnit}" rendered="{!Product.blnIsEditable}"/>
                                        </apex:outputPanel> 
                                        <apex:outputPanel rendered="{!if(Product.objProduct.Product_Main_Category__c == 'Other Products',true,false)}"> 
                                            <apex:inputField id="SelSUOther" value="{!Product.objProduct.Strength_Shape__c}" style="width:100px" rendered="{!!Product.blnIsEditable}"/>
                                            <apex:outputField value="{!Product.objProduct.Strength_Shape__c}" rendered="{!Product.blnIsEditable}"/>
                                        </apex:outputPanel> 
                                    </td>
                                    
                                    <td class="dataCell TDstyle" >
                                        <apex:outputPanel rendered="{!if(Product.objProduct.Product_Main_Category__c != 'Other Products',true,false)}">
                                            <apex:selectList id="SelImp" value="{!Product.strImplementer}" size="1" style="width:150px;" rendered="{!!Product.blnIsEditable}">
                                                <apex:selectOptions value="{!ImplementersOptions}"></apex:selectOptions>
                                            </apex:selectList>
                                            <apex:outputText value="{!Product.strImplementer}" rendered="{!Product.blnIsEditable}" />
                                        </apex:outputPanel> 
                                        <apex:outputPanel rendered="{!if(Product.objProduct.Product_Main_Category__c == 'Other Products',true,false)}"> 
                                            <apex:selectList id="SelImpOther" value="{!Product.strImplementer}" size="1" style="width:150px;" rendered="{!!Product.blnIsEditable}">
                                                <apex:selectOptions value="{!ImplementersOptions}"></apex:selectOptions>
                                            </apex:selectList>
                                            <apex:outputText value="{!Product.strImplementer}" rendered="{!Product.blnIsEditable}"/>
                                        </apex:outputPanel> 
                                    </td>
                                    
                                    <td id="Year1td_UC" class="dataCell TDstyle" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year1','','none'))};">
                                        <apex:inputText id="txtY1Amount" value="{!Product.objProduct.Unit_Cost_Y1__c}" onchange="CalculateTotalYear1('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY1}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Unit_Cost_Y1__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>                                                               
                                    <td id="Year1td" style="display:{!if(strSelectedYear == 'Year1','','none')};font-weight:bold;" class="dataCell TDstyle">
                                        <apex:outputText value="Qty" rendered="{!if(strSelectedCatagory !='PSM Costs',true,false)}"/>
                                        <apex:outputText value="{!Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c}" rendered="{!if(strSelectedCatagory =='PSM Costs',true,false)}"/>
                                    </td>
                                    <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:inputField id="txtQ1Quantity" value="{!Product.objProduct.Quantity_Q1__c}" onchange="CalculateTotalYear1('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY1}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>3,'none','')}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q1__c}" rendered="{!Product.blnIsEditable}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>3,'none','')}"/>
                                    </td>
                                    <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:inputField id="txtQ2Quantity" value="{!Product.objProduct.Quantity_Q2__c}" onchange="CalculateTotalYear1('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY1}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>6,'none','')}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q2__c}" rendered="{!Product.blnIsEditable}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>6,'none','')}"/>
                                    </td>
                                    <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};"> 
                                        <apex:inputField id="txtQ3Quantity" value="{!Product.objProduct.Quantity_Q3__c}" onchange="CalculateTotalYear1('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY1}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>9,'none','')}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q3__c}" rendered="{!Product.blnIsEditable}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>9,'none','')}"/>
                                    </td>
                                    <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:inputField id="txtQ4Quantity" value="{!Product.objProduct.Quantity_Q4__c}" onchange="CalculateTotalYear1('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY1}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q4__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:outputText id="txtTotalQtyY1" value="{0,number,###,###,###}">
                                            <apex:param value="{!Product.TotalQuantityYear1}"/>
                                        </apex:outputText><br/>
                                        <apex:outputtext value="{!Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}" styleclass="rightspace"/>
                                        <apex:outputfield value="{!Product.objProduct.Cost_Y1__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}"/> 
                                    </td>
                                    <!--<td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                        <apex:outputText id="GrantTotalQtyY1" value="{!Product.GrantTotalQuantityYear1}"/>
                                    </td>-->
                                    <td id="Year2td_UC" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year2','','none'))};" class="dataCell TDstyle">
                                        <apex:inputField id="txtY2Amount" value="{!Product.objProduct.Unit_Cost_Y2__c}" onchange="CalculateTotalYear2('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY2}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Unit_Cost_Y2__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};font-weight:bold;" class="dataCell TDstyle">
                                        <apex:outputText value="Qty" rendered="{!if(strSelectedCatagory !='PSM Costs',true,false)}"/>
                                        <apex:outputText value="{!Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c}" rendered="{!if(strSelectedCatagory =='PSM Costs',true,false)}"/>                                        
                                    </td>
                                    <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle"> 
                                        <apex:inputField id="txtQ5Quantity" value="{!Product.objProduct.Quantity_Q5__c}" onchange="CalculateTotalYear2('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY2}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q5__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ6Quantity" value="{!Product.objProduct.Quantity_Q6__c}" onchange="CalculateTotalYear2('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY2}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q6__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle"> 
                                        <apex:inputField id="txtQ7Quantity" value="{!Product.objProduct.Quantity_Q7__c}" onchange="CalculateTotalYear2('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY2}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                         <apex:outputField value="{!Product.objProduct.Quantity_Q7__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ8Quantity" value="{!Product.objProduct.Quantity_Q8__c}" onchange="CalculateTotalYear2('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY2}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                         <apex:outputField value="{!Product.objProduct.Quantity_Q8__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                        <apex:outputText id="txtTotalQtyY2" value="{0,number,###,###,###}">
                                            <apex:param value="{!Product.TotalQuantityYear2}"/>
                                        </apex:outputText>
                                        <br/>
                                        <apex:outputtext value="{!Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}" styleclass="rightspace"/>
                                        <apex:outputfield value="{!Product.objProduct.Cost_Y2__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}"/>
                                    </td>
                                    <!--<td id="Year2td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                        <apex:outputText id="GrantTotalQtyY2" value="{!Product.GrantTotalQuantityYear2}"/>
                                    </td>-->
                                    <td id="Year3td_UC" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year3','','none'))};" class="dataCell TDstyle">
                                        <apex:inputField id="txtY3Amount" value="{!Product.objProduct.Unit_Cost_Y3__c}" onchange="CalculateTotalYear3('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY3}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                         <apex:outputField value="{!Product.objProduct.Unit_Cost_Y3__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};font-weight:bold;" class="dataCell TDstyle">
                                        <apex:outputText value="Qty" rendered="{!if(strSelectedCatagory !='PSM Costs',true,false)}"/>
                                        <apex:outputText value="{!Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c}" rendered="{!if(strSelectedCatagory =='PSM Costs',true,false)}"/>
                                    </td>
                                    <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ9Quantity" value="{!Product.objProduct.Quantity_Q9__c}" onchange="CalculateTotalYear3('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY3}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q9__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ10Quantity" value="{!Product.objProduct.Quantity_Q10__c}" onchange="CalculateTotalYear3('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY3}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q10__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ11Quantity" value="{!Product.objProduct.Quantity_Q11__c}" onchange="CalculateTotalYear3('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY3}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q11__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ12Quantity" value="{!Product.objProduct.Quantity_Q12__c}" onchange="CalculateTotalYear3('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY3}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q12__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                        <apex:outputText id="txtTotalQtyY3" value="{0,number,###,###,###}">
                                            <apex:param value="{!Product.TotalQuantityYear3}"/>
                                        </apex:outputText>
                                        <br/>
                                        <apex:outputtext value="{!Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}" styleclass="rightspace"/>
                                        <apex:outputfield value="{!Product.objProduct.Cost_Y3__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}"/>
                                    </td>
                                    <!--<td id="Year3td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year3','','none')};"> 
                                        <apex:outputText id="GrantTotalQtyY3" value="{!Product.GrantTotalQuantityYear3}"/>
                                    </td>-->
                                    <td id="Year4td_UC" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year4','','none'))};" class="dataCell TDstyle">
                                        <apex:inputField id="txtY4Amount" value="{!Product.objProduct.Unit_Cost_Y4__c}" onchange="CalculateTotalYear4('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY4}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Unit_Cost_Y4__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};font-weight:bold;" class="dataCell TDstyle">
                                        <apex:outputText value="Qty" rendered="{!if(strSelectedCatagory !='PSM Costs',true,false)}"/>
                                        <apex:outputText value="{!Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c}" rendered="{!if(strSelectedCatagory =='PSM Costs',true,false)}"/>
                                    </td>
                                    <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ13Quantity" value="{!Product.objProduct.Quantity_Q13__c}" onchange="CalculateTotalYear4('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY4}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q13__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ14Quantity" value="{!Product.objProduct.Quantity_Q14__c}" onchange="CalculateTotalYear4('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY4}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q14__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ15Quantity" value="{!Product.objProduct.Quantity_Q15__c}" onchange="CalculateTotalYear4('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY4}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q15__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                        <apex:inputField id="txtQ16Quantity" value="{!Product.objProduct.Quantity_Q16__c}" onchange="CalculateTotalYear4('{!$Component.txtY1Amount}','{!$Component.txtY2Amount}','{!$Component.txtY3Amount}','{!$Component.txtY4Amount}','{!$Component.txtQ1Quantity}','{!$Component.txtQ2Quantity}','{!$Component.txtQ3Quantity}','{!$Component.txtQ4Quantity}','{!$Component.txtQ5Quantity}','{!$Component.txtQ6Quantity}','{!$Component.txtQ7Quantity}','{!$Component.txtQ8Quantity}','{!$Component.txtQ9Quantity}','{!$Component.txtQ10Quantity}','{!$Component.txtQ11Quantity}','{!$Component.txtQ12Quantity}','{!$Component.txtQ13Quantity}','{!$Component.txtQ14Quantity}','{!$Component.txtQ15Quantity}','{!$Component.txtQ16Quantity}','{!$Component.txtTotalQtyY4}','{!$Component.GrantTotalQtyY4}')" rendered="{!!Product.blnIsEditable}"/>
                                        <apex:outputField value="{!Product.objProduct.Quantity_Q16__c}" rendered="{!Product.blnIsEditable}"/>
                                    </td>
                                    <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                        <apex:outputText id="txtTotalQtyY4" value="{0,number,###,###,###}">
                                            <apex:param value="{!Product.TotalQuantityYear4}"/>
                                        </apex:outputText>
                                        <br/>
                                        <apex:outputtext value="{!Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}" styleclass="rightspace"/>
                                        <apex:outputfield value="{!Product.objProduct.Cost_Y4__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}"/>
                                    </td>
                                    <td class="dataCell TDstyle">
                                        <apex:outputText id="GrantTotalQtyY4" value="{0,number,###,###,###}"> 
                                            <apex:param value="{!Product.GrantTotalQuantityYear4}"/>
                                        </apex:outputText>
                                        <br/>
                                        <apex:outputtext value="{!Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}" styleclass="rightspace"/>
                                        <apex:outputfield value="{!Product.objProduct.Total_Cost__c}" rendered="{!if(strSelectedCatagory=='PSM Costs',false,Product.blnIsEditable)}"/>
                                        <br/>
                                        <apex:commandLink styleclass="{!if(Product.lstPSMSplits != null && Product.lstPSMSplits.size > 0,'TGFbtn TGFbtn-mini TGFbtn-success','TGFbtn TGFbtn-mini TGFbtn-warning')}" style="border-right:1px solid #E0E3E5 !important;" action="{!OpenInterventionSplitPopup}" status="Processing" rerender="frm" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'FPM') || ($Profile.Name == '{!$label.PSM_Hub}') || ($Profile.Name == 'System Administrator')) ,true,false)}">
                                            <strong>Intervention Split</strong>
                                            <apex:param value="{!Count-1}" name="OpenIndex" Id="OpenIndex4"/>
                                            <apex:param value="Product" name="type" id="type1"/>                                            
                                        </apex:commandLink>
                                        <apex:outputLabel style="display:none;" id="hdnlstPSMSplits" value="{!Product.lstPSMSplits.size}" />
          <!--INTERVENTION SPLIT POP-UP STARTS HERE-->
                                        <apex:outputPanel id="tstpopup1" >
                                            <apex:outputPanel id="popupBackground1" styleClass="popupAssumptionBackground" rendered="{!Product.blnHasChild}"/>
                                            <apex:outputPanel id="custPopup1" styleClass="custAssumptionPopup" rendered="{!Product.blnHasChild}">
                                                
                                                <table width="100%">
                                                    <tr>
                                                        <td colspan="4">
                                                            <h4>
                                                                {!if(strSelectedCatagory=='Other Products',Product.objProduct.Product_Name__c,if(strSelectedCatagory=='PSM Costs',Product.objProduct.Cost_Input__r.Name,Product.objProduct.Catalog_Product__r.Product_Name__c))}
                                                            </h4>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table class="table table-striped">
                                                     <thead>
                                                        <tr class="headerRow">
                                                            <th></th>
                                                            <th class="headerRowLower" >
                                                                <apex:outputlabel value="Intervention"/>
                                                            </th>                
                                                            <th class="headerRowLower" >
                                                                <apex:outputlabel value="Y1 %"/>
                                                            </th>                
                                                            <th class="headerRowLower" >
                                                                <apex:outputlabel value="Y2 %"/>
                                                            </th>                
                                                            <th class="headerRowLower" >
                                                                <apex:outputlabel value="Y3 %"/>
                                                            </th>
                                                            <th class="headerRowLower">
                                                                <apex:outputlabel value="Y4 %"/>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <apex:variable value="{!0}" var="CountPSM"/>
                                                    <apex:repeat id="rptBudgetLine" value="{!Product.lstPSMSplit}" var="objPSM">
                                                        <tr>   
                                                            <td class="dataCell TDstyle">
                                                                <apex:commandLink id="cmdLinkDeleteGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:30px;height:25px;margin-top:6px;display:{!if(Product.blnIsEditable != true,'none','')};" onclick="return OpenDeletePopup('{!$Component.tstpopup1}')">
                                                                    <i class="icon-trash icon-white" style="margin-top:6px"></i> 
                                                                </apex:commandLink>
                                                                <apex:outputPanel id="tstpopup1" style="display:none;">
                                                                    <apex:outputPanel id="popupBackground1" styleClass="popupBackground"/>
                                                                    <apex:outputPanel id="custPopup1" styleClass="custPopup">
                                                                        <table width="100%" cellspacing="0" cellpadding="0" border="0" >
                                                                            <tr>
                                                                                <td colspan="3" class="deletePopup">
                                                                                    <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="Are you sure?"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td colspan="3" class="deletePopup">
                                                                                    <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="This PSM Split will be deleted."/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td width="47%" class="deletePopup">
                                                                                    <apex:commandButton styleClass="popupButtonYes" action="{!DeletePSMSplit}" value="Yes" reRender="frm" status="Processing">
                                                                                        <apex:param value="{!CountPSM}" name="DeleteIndex" />
                                                                                    </apex:commandButton>
                                                                                </td>
                                                                                <td width="6%" class="deletePopup"></td>
                                                                                <td width="47%" align="left" class="deletePopupCancel">
                                                                                    <apex:commandButton styleClass="popupButtonCancel" value="Cancel" onclick="return ClosePopup('{!$Component.tstpopup1}');"/>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </td>                                       
                                                            <td class="dataCell TDstyle">
                                                                <apex:selectList id="txtIntervention" value="{!objPSM.objPSMSplit.Intervention__c}" size="1" style="width:300px">
                                                                    <apex:selectOptions value="{!InterventionsOptions}"></apex:selectOptions>
                                                                </apex:selectList>
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                <apex:inputField id="PerY1" value="{!objPSM.objPSMSplit.Y1__c}" onchange="CalculateTotalY1(this,'{!Count-1}','{!CountPSM}',{!Product.lstPSMSplit.size});"/>
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                <apex:inputField id="PerY2" value="{!objPSM.objPSMSplit.Y2__c}" onchange="CalculateTotalY2(this,'{!Count-1}',{!Product.lstPSMSplit.size});"/>
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                <apex:inputField id="PerY3" value="{!objPSM.objPSMSplit.Y3__c}" onchange="CalculateTotalY3(this,'{!Count-1}','{!CountPSM}',{!Product.lstPSMSplit.size});"/>
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                <apex:inputField id="PerY4" value="{!objPSM.objPSMSplit.Y4__c}" onchange="CalculateTotalY4(this,'{!Count-1}',{!Product.lstPSMSplit.size});"/>
                                                            </td>
                                                        </tr>
                                                        <apex:variable value="{!CountPSM+1}" var="CountPSM"/>
                                                    </apex:repeat>
                                                    <tr>
                                                        <td class="dataCell TDstyle" colspan="2" style="text-align:right;">
                                                            <apex:outputText value="Total"/>
                                                        </td> 
                                                        <td class="dataCell TDstyle">
                                                            <apex:outputText id="txtTotalY1" value="{!Product.TotalY1}"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:outputText id="txtTotalY2" value="{!Product.TotalY2}"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:outputText id="txtTotalY3" value="{!Product.TotalY3}"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:outputText id="txtTotalY4" value="{!Product.TotalY4}"/>
                                                        </td>
                                                    </tr>
                                                    
                                                    <!--<tr id="NewPSMTR" style="display:none;">
                                                        <td class="dataCell TDstyle">
                                                            <apex:selectList value="{!objPSMNew.PSMSplitIntervention}" size="1" style="width:80px">
                                                                <apex:selectOptions value="{!InterventionsOptions}"></apex:selectOptions>
                                                            </apex:selectList>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField value="{!objPSMNew.objPSMSplit.Y1__c}"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField value="{!objPSMNew.objPSMSplit.Y2__c}"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField value="{!objPSMNew.objPSMSplit.Y3__c}"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField value="{!objPSMNew.objPSMSplit.Y4__c}"/>
                                                        </td>
                                                    </tr>-->
                                                    
                                                    <tr>
                                                        <td></td>
                                                        <td id="AddButtonTD" colspan="5"  style="text-align:left;">
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success"  action="{!AddPSMSplit}" status="Processing" rerender="frm" >
                                                                <i class="icon-plus-sign icon-white"></i>
                                                                <strong> Add Intervention</strong>
                                                            </apex:commandLink>
                                                        </td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td class="dataCell TDstyle" colspan="6" style="text-align:center;">
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:37px;align:right;" onclick="return SaveAssumptionRecords('{!Count-1}',{!Product.lstPSMSplit.size});" rerender="frm">
                                                                <strong>Save</strong>
                                                            </apex:commandLink>
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="align:left;" action="{!CancelInterventionSplitPopup}" status="Processing" rerender="frm"> 
                                                                <strong>Cancel</strong>
                                                            </apex:commandLink>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </apex:outputPanel>
             <!--JAVASCRIPT TO AUTO-FILL YEARS 2,3,4 ONCHANGE OF YEAR1 IN POP-UP. ALSO ADD UP WITHIN COLUMNS.-->                               
                                            <script>
                                                function calculate(){
                                                    var size = '{!Product.lstPSMSplit.size}';
                                                    var Index = '{!Count-1}';
                                                    if(size > 0){
                                                        var TotalY1 = 0;
                                                        var TotalY2 = 0;
                                                        var TotalY3 = 0;
                                                        var TotalY4 = 0;
                                                        for(var i=0;i<size;i++){
                                                            if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY1').value != ''){
                                                                if(TotalY1 == 0) TotalY1 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY1').value);
                                                                else TotalY1 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY1').value);
                                                            }
                                                            if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY2').value != ''){
                                                                if(TotalY2 == 0) TotalY2 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY2').value);
                                                                else TotalY2 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY2').value);
                                                            }
                                                            if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY3').value != ''){
                                                                if(TotalY3 == 0) TotalY3 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY3').value);
                                                                else TotalY3 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY3').value);
                                                            }
                                                            if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value != ''){
                                                                if(TotalY4 == 0) TotalY4 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value);
                                                                else TotalY4 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value);
                                                            }
                                                        }
                                                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY1').innerHTML != ''){
                                                            document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY1').innerHTML = ''
                                                        }
                                                        if(TotalY1 != 0){
                                                            document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY1').innerHTML = TotalY1;
                                                        }
                                                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY2').innerHTML != ''){
                                                            document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY2').innerHTML = ''
                                                        }
                                                        if(TotalY2 != 0){
                                                            document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY2').innerHTML = TotalY2;
                                                        }
                                                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML != ''){
                                                            document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML = ''
                                                        }
                                                        if(TotalY3 != 0){
                                                            document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML = TotalY3;
                                                        }
                                                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML != ''){
                                                            document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML = ''
                                                        }
                                                        if(TotalY4 != 0){
                                                            document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML = TotalY4;
                                                        }
                                                    }
                                                }
                                                calculate();
                                                
                                                function closePanel()
                                                {
                                                    document.getElementById('cmdConvertInterventionToBudgetLines').disabled;
                                                }
                                                    
                                            </script>
                                        </apex:outputPanel>
             <!--END INTERVENTION SPLIT POP-UP-->
                                    </td>
                                    <td class="dataCell TDstyle" style="border: 1px solid #E0E3E5 !important;" width="35px">
                                        <apex:commandLink id="cmdLinkEditGoal" reRender="frm" Status="Processing" styleClass="TGFbtn TGFbtn-mini TGFbtn-primary" action="{!EditProduct}" style="display:{!if(Product.blnIsEditable != true,'none','')};width:30px;height:25px;" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Only}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == 'PSM Hub') || ($Profile.Name == 'FPM') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'System Administrator')) ,true,false)}">
                                            <i class="icon-edit icon-white" style="margin-top:6px"></i>
                                            <apex:param value="{!Count-1}" name="EditIndex"/>
                                        </apex:commandLink>
                                        
                                        <apex:commandLink id="cmdLinkSaveGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return ValidateSave('{!$Component.SelCI}','{!$Component.SelGP}','{!$Component.SelSU}','{!$Component.SelImp}','{!Count-1}');" style="display:{!if(Product.blnIsEditable == true,'none',if(Product.objProduct.Product_Main_Category__c != 'Other Products' && strSelectedCatagory != 'PSM Costs','','none'))};width:40px;" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Only}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == 'PSM Hub') || ($Profile.Name == 'FPM') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'System Administrator')) ,true,false)}">
                                            <strong>Save</strong>                                            
                                        </apex:commandLink> 
                                        
                                        <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return ValidateSaveOther('{!$Component.SelCI}','{!$Component.SelGPOther}','{!$Component.SelSUOther}','{!$Component.SelImpOther}','{!Count-1}');" style="display:{!if(Product.blnIsEditable == true,'none',if(Product.objProduct.Product_Main_Category__c == 'Other Products','','none'))};width:40px;" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Only}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == 'PSM Hub') || ($Profile.Name == 'FPM') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'System Administrator')) ,true,false)}">
                                            <strong>Save</strong>                                            
                                        </apex:commandLink>
                                        
                                        <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return ValidateSavePSMCost('{!$Component.SelCI}','{!$Component.SelImp}','{!Count-1}');" style="display:{!if(Product.blnIsEditable == true,'none',if(strSelectedCatagory == 'PSM Costs','','none'))};width:40px;" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Only}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == 'PSM Hub') || ($Profile.Name == 'FPM') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'System Administrator')) ,true,false)}">
                                            <strong>Save</strong>                                            
                                        </apex:commandLink>

                                        <apex:commandLink id="cmdLinkCancelGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" reRender="frm" action="{!CancelProduct}" Status="Processing" style="display:{!if(Product.blnIsEditable == true,'none','')};width:55px;" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Only}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == 'PSM Hub') || ($Profile.Name == 'FPM') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'System Administrator')) ,true,false)}">
                                            <strong>Cancel</strong>
                                            <apex:param value="{!Count-1}" name="CancelIndex" />
                                        </apex:commandLink>
                                        <!-- Changes for DIALOG BOX -->
                                        
                                        <apex:commandLink style="width:98px;" styleClass="{!IF(isblank(Product.objProduct.PR_Comments__c),'TGFbtn TGFbtn-mini TGFbtn-warning','TGFbtn TGFbtn-mini TGFbtn-success')}" action="{!OpenDialogeBoxRecord}" status="Processing" rerender="frm" rendered="{!if(Product.blnIsEditable == false,'false','true')}">
                                            <apex:param name="OpenBLIndex" value="{!Count-1}"/>
                                            <apex:outputLabel value="{!$Label.Dialoge_Header}" style="align:left"/>
                                            <i class="icon-search icon-white" style="display:{!if(isblank(Product.objProduct.LFA_Comments__c),'none','')}"></i>
                                            <i class="icon-certificate icon-white" style="display:{!if(isblank(Product.objProduct.TGF_Comments__c),'none','')}"></i>
                                        </apex:commandLink>
                                        <apex:outputPanel id="dialogPouup">
                                            <apex:outputPanel styleClass="popupDialogBackground" rendered="{!Product.blnHasNoChild}"/>
                                            <apex:outputPanel styleClass="custDialogPopup" rendered="{!Product.blnHasNoChild}" style="left: 31% !important;">
                                                <table width="100%">
                                                    <tr>
                                                        <td width="20%">
                                                            <b><apex:outputLabel value="{!$Label.Dialoge_PR_Comment}"/></b><br/>
                                                            <apex:outputtext value="Last update : " rendered="{!if(isblank(Product.objProduct.Latest_PR_Comment__c)==false,true,false)}"/><br/>
                                                            <apex:outputfield value="{!Product.objProduct.Latest_PR_Comment__c}"/>
                                                        </td>
                                                        <td>
                                                            <apex:inputField style="height: 50px;resize: none;width: 90%;" value="{!Product.objProduct.PR_Comments__c}" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == 'System Administrator')) ,true,false)}"/>
                                                             <apex:outputField style="height: 50px;resize: none;width: 90%;" value="{!Product.objProduct.PR_Comments__c}" rendered="{!If(NOT(($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == 'System Administrator')) ,true,false)}"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td width="20%">
                                                            <b><apex:outputLabel value="{!$Label.Dialoge_LFA_Comment}"/></b><br/>
                                                            <apex:outputtext value="Last update : " rendered="{!if(isblank(Product.objProduct.Latest_LFA_Comment__c)==false,true,false)}"/><br/>
                                                            <apex:outputfield value="{!Product.objProduct.Latest_LFA_Comment__c}"/>
                                                        </td>
                                                        <td>
                                                            <apex:inputField style="height: 50px;resize: none;width: 90%;" value="{!Product.objProduct.LFA_Comments__c}" rendered="{!If((($Profile.Name == 'LFA Coordination') || ($Profile.Name == 'LFA Coordination Admin') || ($Profile.Name == 'LFA GM Admin Portal User') ||($Profile.Name == 'LFA GM Editor Portal User') || ($Profile.Name == 'LFA Portal User') || ($Profile.Name == 'System Administrator')) ,true,false)}"/>
                                                            <apex:outputField style="height: 50px;resize: none;width: 90%;" value="{!Product.objProduct.LFA_Comments__c}" rendered="{!If(NOT(($Profile.Name == 'LFA Coordination') || ($Profile.Name == 'LFA Coordination Admin') || ($Profile.Name == 'LFA GM Admin Portal User') ||($Profile.Name == 'LFA GM Editor Portal User') || ($Profile.Name == 'LFA Portal User') || ($Profile.Name == 'System Administrator')) ,true,false)}"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td width="20%">
                                                            <b><apex:outputLabel value="{!$Label.Dialoge_TGF_Comment}"/></b><br/>
                                                            <apex:outputtext value="Last update : " rendered="{!if(isblank(Product.objProduct.Latest_TGF_Comment__c)==false,true,false)}"/><br/>
                                                            <apex:outputfield value="{!Product.objProduct.Latest_TGF_Comment__c}"/> 
                                                        </td>
                                                        <td>
                                                            <apex:inputField style="height: 50px;resize: none;width: 90%;" value="{!Product.objProduct.TGF_Comments__c}" rendered="{!If((($Profile.Name == 'Country Team') || ($Profile.Name == 'FPM') || ($Profile.Name == 'Technical Hub') || ($Profile.Name == 'Management') || ($Profile.Name == 'Access to Funding') || ($Profile.Name == 'Finance Officer') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'System Administrator')) ,true,false)}"/>                                                            
                                                            <apex:outputField style="height: 50px;resize: none;width: 90%;" value="{!Product.objProduct.TGF_Comments__c}" rendered="{!If(NOT(($Profile.Name == 'Country Team') || ($Profile.Name == 'FPM') || ($Profile.Name == 'Technical Hub') || ($Profile.Name == 'Management') || ($Profile.Name == 'Access to Funding') || ($Profile.Name == 'Finance Officer') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'System Administrator')) ,true,false)}"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="dataCell TDstyle" colspan="2" style="text-align:center;">
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:37px;align:right;" action="{!SaveDialogeBox}" status="Processing" rerender="frm">
                                                                <apex:param value="{!Count-1}" name="SaveBLIndex"/>
                                                                <strong><apex:outputLabel value="{!$Label.Save}"/></strong>
                                                            </apex:commandLink>
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="align:left;" action="{!CancelDialogeBox}" status="Processing" rerender="frm"> 
                                                                <apex:param name="CancelBLIndex" value="{!Count-1}"/>
                                                                <strong><apex:outputLabel value="{!$Label.Cancel}"/></strong>
                                                            </apex:commandLink>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="resourcetTable" colspan="2">
                                                            <div id="boxscroll" class="chatterFeedPanel">
                                                                <apex:iframe id="ifResourceChatter" height="225px" scrolling="true" src="/apex{!if($Profile.Name=='PR Standard Portal User','/GM','')}/ServiceChatter?ServiceId={!Product.objProduct.Id}" />
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                        
                                        <!-- DIALOG BOX CHANGES COMPLETED --->
                                        
                                        <apex:commandLink id="cmdLinkDeleteGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:30px;height:25px;margin-top:6px;display:{!if(Product.blnIsEditable != true,'none','')};" onclick="return OpenDeletePopup('{!$Component.tstpopup}')" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Only}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == 'System Administrator') || ($Profile.Name == 'FPM') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'PSM Hub')) ,true,false)}">
                                            <i class="icon-trash icon-white" style="margin-top:6px"></i> 
                                        </apex:commandLink>
                                        <apex:outputPanel id="tstpopup" style="display:none;">
                                            <apex:outputPanel id="popupBackground" styleClass="popupBackground"/>
                                            <apex:outputPanel id="custPopup" styleClass="custPopup">
                                                <table width="100%" cellspacing="0" cellpadding="0" border="0" >
                                                    <tr>
                                                        <td colspan="3" class="deletePopup">
                                                            <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="Are you sure?"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="3" class="deletePopup">
                                                            <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="This Product will be deleted."/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td width="47%" class="deletePopup">
                                                            <apex:commandButton styleClass="popupButtonYes" action="{!DeleteProduct}" value="Yes" reRender="frm" status="Processing">
                                                                <apex:param value="{!Count-1}" name="DeleteIndex" />
                                                            </apex:commandButton>
                                                        </td>
                                                        <td width="6%" class="deletePopup"></td>
                                                        <td width="47%" align="left" class="deletePopupCancel">
                                                            <apex:commandButton styleClass="popupButtonCancel" value="Cancel" onclick="return ClosePopup('{!$Component.tstpopup}');"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </td>
                                </tr>
                                <apex:variable value="{!Count + 1}" var="Count"/>
                             </apex:repeat>
                             <tr id="btnAddBudgetLine">
                                 <td colspan="2" style="border-bottom:0px !important;display:{!if(isnull(strSelectedCatagory),'none','')}">
                                     <apex:commandLink styleClass="TGFbtn TGFbtn-success pull-right" onclick="return DisplayNewBudgetlineRow();" style="width:140px;" rendered="{!If((($Profile.Name == '{!$label.PR_Admin}') || ($Profile.Name == '{!$label.PR_Read_Write_Edit}') || ($Profile.Name == '{!$label.PSM_Hub}') || ($Profile.Name == 'System Administrator') || ($Profile.Name == 'FPM') || ($Profile.Name == 'PSM Officer') || ($Profile.Name == 'PSM Hub')) ,true,false)}">
                                        <i class="icon-plus icon-white"></i> 
                                        <strong>{!if(strSelectedCatagory=='PSM Costs','Add PSM Cost','Add Product')}</strong>
                                     </apex:commandLink>
                                 </td>
                             </tr>
                             <!---------------------------------------------------------------------->
                             <!--<apex:actionFunction action="{!SelectUnitMeasureNew}" reRender="frm" status="Processing" name="actSelectUnitMeasureNew" oncomplete="completeOnchangeNewRow();">
                                 <apex:param value="" name="CostInputId" id="CostInputId"/>
                             </apex:actionFunction>-->
                             <tr id="newBudgetLine1" style="display:none;">
                                <td class="dataCell TDstyle" >
                                    <apex:outputText value="{!Count}"/>                                    
                                </td>
                                <td class="dataCell TDstyle" >                                    
                                    <apex:selectList id="SelCINew" value="{!objNewProduct.strCostInputName}" size="1" style="width:150px;">
                                        <apex:actionSupport event="onchange" action="{!fillGenericProductNew}" reRender="frm" status="Processing" oncomplete="DisplayNewBudgetlineRow();"/>
                                        <apex:selectOptions value="{!CostInputOptions}"></apex:selectOptions>
                                    </apex:selectList> 
                                    <!--<apex:inputField id="SelCINewOther" value="{!objNewProduct.objProduct.Product_Category__c}" rendered="{!if(strSelectedCatagory == 'Other Products',true,false)}"/>-->
                                </td>
                                <td class="dataCell TDstyle" style="display:{!if(strSelectedCatagory == 'PSM Costs','none','')}">
                                    <apex:selectList id="SelGPNew" value="{!objNewProduct.strGenericProductName}" size="1" style="width:150px;" rendered="{!if(strSelectedCatagory != 'Other Products',true,false)}" onchange="return SelectStrenthAndUnit(this.value,'{!Count-1}');">
                                        <apex:actionSupport event="onchange" action="{!fillStrenthAndUnitNew}" reRender="frm" status="Processing" oncomplete="DisplayNewBudgetlineRow();"/>
                                        <apex:selectOptions value="{!objNewProduct.ProductNameOptions}"></apex:selectOptions>
                                    </apex:selectList>
                                    <apex:inputField id="SelGPNewOther"  value="{!objNewProduct.objProduct.Product_Name__c}" style="width:170px;height:20px;resize:none;" rendered="{!if(strSelectedCatagory == 'Other Products',true,false)}"/>
                                </td>
                                <td class="dataCell TDstyle" style="display:{!if(strSelectedCatagory == 'PSM Costs','none','')}">
                                    <apex:selectList id="SelSUNew" value="{!objNewProduct.strStrengthAndUnit}" size="1" style="width:150px;" rendered="{!if(strSelectedCatagory != 'Other Products',true,false)}">
                                        <apex:selectOptions value="{!objNewProduct.StrengthAndUnitOptions}"></apex:selectOptions>
                                    </apex:selectList>
                                    <apex:inputField id="SelSUNewOther" value="{!objNewProduct.objProduct.Strength_Shape__c}" style="width:100px" rendered="{!if(strSelectedCatagory == 'Other Products',true,false)}"/>
                                </td>
                                <td class="dataCell TDstyle" >
                                     <apex:selectList id="SelImpNew" value="{!objNewProduct.strImplementer}" size="1" style="width:150px;">
                                        <apex:selectOptions value="{!ImplementersOptions}"></apex:selectOptions>
                                    </apex:selectList>
                                </td>
                                
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year1','','none'))};">
                                   <apex:inputText id="txtY1AmountNew" value="{!objNewProduct.objProduct.Unit_Cost_Y1__c}" onchange="CalculateTotalYear1('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY1New}','{!$Component.txtGrantTotalQtyNewY1}')"/>
                                </td>
                                <td id="Year1td" style="display:{!if(strSelectedYear == 'Year1','','none')};font-weight:bold;" class="dataCell TDstyle">
                                    <apex:outputText value="{!if(strSelectedCatagory == 'PSM Costs',Page__c.Implementation_Period__r.Currency_of_Grant_Agreement__c,'Qty')}"/>
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:inputField id="txtQ1QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q1__c}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>3,'none','')}" onchange="CalculateTotalYear1('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY1New}','{!$Component.txtGrantTotalQtyNewY1}')"/>
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:inputField id="txtQ2QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q2__c}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>6,'none','')}" onchange="CalculateTotalYear1('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY1New}','{!$Component.txtGrantTotalQtyNewY1}')"/>
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:inputField id="txtQ3QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q3__c}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>9,'none','')}" onchange="CalculateTotalYear1('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY1New}','{!$Component.txtGrantTotalQtyNewY1}')"/>
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:inputField id="txtQ4QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q4__c}" onchange="CalculateTotalYear1('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY1New}','{!$Component.txtGrantTotalQtyNewY1}')"/>
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:outputText id="txtTotalQtyY1New" value="{0,number,###,###,###}">
                                        <apex:param value="{!objNewProduct.TotalQuantityYear1}"/>
                                    </apex:outputText>
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:outputText id="txtGrantTotalQtyNewY1" value="{0,number,###,###,###}"> 
                                        <apex:param value="{!objNewProduct.GrantTotalQuantityYear1}"/>
                                    </apex:outputText>
                                </td>
                                
                                <td id="Year2td" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year2','','none'))};" class="dataCell TDstyle">
                                    <apex:inputField id="txtY2AmountNew" value="{!objNewProduct.objProduct.Unit_Cost_Y2__c}" onchange="CalculateTotalYear2('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY2New}','{!$Component.txtGrantTotalQtyNewY2}')"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};font-weight:bold;" class="dataCell TDstyle">
                                    <apex:outputText value="Qty"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle"> 
                                    <apex:inputField id="txtQ5QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q5__c}" onchange="CalculateTotalYear2('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY2New}','{!$Component.txtGrantTotalQtyNewY2}')"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ6QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q6__c}" onchange="CalculateTotalYear2('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY2New}','{!$Component.txtGrantTotalQtyNewY2}')"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle"> 
                                    <apex:inputField id="txtQ7QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q7__c}" onchange="CalculateTotalYear2('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY2New}','{!$Component.txtGrantTotalQtyNewY2}')"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ8QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q8__c}" onchange="CalculateTotalYear2('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY2New}','{!$Component.txtGrantTotalQtyNewY2}')"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                    <apex:outputText id="txtTotalQtyY2New"  value="{0,number,###,###,###}">
                                        <apex:param value="{!objNewProduct.TotalQuantityYear2}"/>
                                    </apex:outputText>
                                </td>
                                <td id="Year2td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                    <apex:outputText id="txtGrantTotalQtyNewY2" value="{0,number,###,###,###}"> 
                                        <apex:param value="{!objNewProduct.GrantTotalQuantityYear2}"/>
                                    </apex:outputText>
                                </td>                                
                                <td id="Year3td" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year3','','none'))};" class="dataCell TDstyle">
                                    <apex:inputField id="txtY3AmountNew" value="{!objNewProduct.objProduct.Unit_Cost_Y3__c}" onchange="CalculateTotalYear3('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY3New}','{!$Component.txtGrantTotalQtyNewY3}')"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};font-weight:bold;" class="dataCell TDstyle">
                                    <apex:outputText value="Qty"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ9QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q9__c}" onchange="CalculateTotalYear3('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY3New}','{!$Component.txtGrantTotalQtyNewY3}')"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ10QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q10__c}" onchange="CalculateTotalYear3('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY3New}','{!$Component.txtGrantTotalQtyNewY3}')"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ11QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q11__c}" onchange="CalculateTotalYear3('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY3New}','{!$Component.txtGrantTotalQtyNewY3}')"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ12QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q12__c}" onchange="CalculateTotalYear3('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY3New}','{!$Component.txtGrantTotalQtyNewY3}')"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:outputText id="txtTotalQtyY3New" value="{0,number,###,###,###}">
                                        <apex:param value="{!objNewProduct.TotalQuantityYear3}"/>
                                    </apex:outputText>
                                </td>
                                <td id="Year3td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                    <apex:outputText id="txtGrantTotalQtyNewY3" value="{0,number,###,###,###}">
                                        <apex:param value="{!objNewProduct.GrantTotalQuantityYear3}"/>
                                     </apex:outputText>
                                </td>
                                
                                <td id="Year4td" style="display:{!if(strSelectedCatagory == 'PSM Costs','none',if(strSelectedYear == 'Year4','','none'))};" class="dataCell TDstyle">
                                    <apex:inputField id="txtY4AmountNew" value="{!objNewProduct.objProduct.Unit_Cost_Y4__c}" onchange="CalculateTotalYear4('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY4New}','{!$Component.txtGrantTotalQtyNewY4}')"/>
                                </td>
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};font-weight:bold;" class="dataCell TDstyle">
                                    <apex:outputText value="Qty"/>
                                </td>
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ13QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q13__c}" onchange="CalculateTotalYear4('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY4New}','{!$Component.txtGrantTotalQtyNewY4}')"/>
                                </td>
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ14QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q14__c}" onchange="CalculateTotalYear4('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY4New}','{!$Component.txtGrantTotalQtyNewY4}')"/>
                                </td>
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ15QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q15__c}" onchange="CalculateTotalYear4('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY4New}','{!$Component.txtGrantTotalQtyNewY4}')"/>
                                </td>
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ16QuantityNew" value="{!objNewProduct.objProduct.Quantity_Q16__c}" onchange="CalculateTotalYear4('{!$Component.txtY1AmountNew}','{!$Component.txtY2AmountNew}','{!$Component.txtY3AmountNew}','{!$Component.txtY4AmountNew}','{!$Component.txtQ1QuantityNew}','{!$Component.txtQ2QuantityNew}','{!$Component.txtQ3QuantityNew}','{!$Component.txtQ4QuantityNew}','{!$Component.txtQ5QuantityNew}','{!$Component.txtQ6QuantityNew}','{!$Component.txtQ7QuantityNew}','{!$Component.txtQ8QuantityNew}','{!$Component.txtQ9QuantityNew}','{!$Component.txtQ10QuantityNew}','{!$Component.txtQ11QuantityNew}','{!$Component.txtQ12QuantityNew}','{!$Component.txtQ13QuantityNew}','{!$Component.txtQ14QuantityNew}','{!$Component.txtQ15QuantityNew}','{!$Component.txtQ16QuantityNew}','{!$Component.txtTotalQtyY4New}','{!$Component.txtGrantTotalQtyNewY4}')"/>
                                </td>
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:outputText id="txtTotalQtyY4New" value="{0,number,###,###,###}">
                                        <apex:param value="{!objNewProduct.TotalQuantityYear4}"/>
                                    </apex:outputText>
                                </td>
                                <td id="Year4td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                    <apex:outputText id="txtGrantTotalQtyNewY4" value="{0,number,###,###,###}">
                                        <apex:param value="{!objNewProduct.GrantTotalQuantityYear4}"/>
                                    </apex:outputText>
                                </td>
                               <td class="dataCell TDstyle" style="padding-right: 5px;border-right:1px solid #E0E3E5 !important;">
                                    <apex:actionFunction name="actSaveProduct1" action="{!SaveProduct}" reRender="frm" status="Processing" oncomplete="CancelNewBudgetlineRow();">
                                        <apex:param value="" name="SaveIndex" id="SaveIndex1"/>
                                        <apex:param value="" name="CPId" id="CPId1"/>
                                    </apex:actionFunction>
                                   <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:37px;border-right:1px solid #E0E3E5 !important;" onclick="return ValidateSaveNew('{!$Component.SelCINew}','{!$Component.SelGPNew}','{!$Component.SelSUNew}','{!$Component.SelImpNew}','{!if(lstProducts != null && lstProducts.size > 0,lstProducts.size+1,1)}');" rendered="{!if(strSelectedCatagory != 'Other Products',if(strSelectedCatagory != 'PSM Costs',true,false),false)}" >                                        
                                    <strong>Save</strong> 
                                    </apex:commandLink>
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:37px;border-right:1px solid #E0E3E5 !important;" onclick="return ValidateSaveNewOther('{!$Component.SelCINew}','{!$Component.SelGPNewOther}','{!$Component.SelSUNewOther}','{!$Component.SelImpNew}','{!if(lstProducts != null && lstProducts.size > 0,lstProducts.size+1,1)}');" rendered="{!if(strSelectedCatagory == 'Other Products',true,false)}">
                                        <strong>Save</strong>
                                    </apex:commandLink>
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:37px;border-right:1px solid #E0E3E5 !important;" onclick="return ValidateSaveNewPSMCost('{!$Component.SelCINew}','{!$Component.SelGPNewOther}','{!$Component.SelSUNewOther}','{!$Component.SelImpNew}','{!if(lstProducts != null && lstProducts.size > 0,lstProducts.size+1,1)}');" rendered="{!if(strSelectedCatagory == 'PSM Costs',true,false)}">
                                        <strong>Save</strong>
                                    </apex:commandLink>
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" onclick="return CancelNewBudgetlineRow();"> 
                                        <strong>Cancel</strong>
                                    </apex:commandLink>
                                </td>
                            </tr>
                            
                        </table>
                        
                        <!--<table class="table table-striped" style="display:{!if(strSelectedCatagory == 'PSM Cost','','none')};">
                         <thead>
                            <tr class="headerRow">
                                <th class="headerRowLower" width="2%">
                                    <apex:outputlabel value="#"/>
                                </th>                                                   
                                <th class="headerRowLower" width="10%">
                                    <apex:outputlabel value="Cost input"/>
                                </th>                
                                <th class="headerRowLower" width="15%">
                                    <apex:outputlabel value="Recipient"/>
                                </th>
                                
                                <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:outputlabel value="Q1"/>
                                </th>                
                                <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:outputlabel value="Q2"/>
                                </th>                
                                <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:outputlabel value="Q3"/>
                                </th>                
                                <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:outputlabel value="Q4"/>
                                </th>
                                <th class="headerRowLower" id="Year1th" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:outputlabel value="Total Cost - Year 1"/>
                                </th>
                                
                                <th class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                    <apex:outputlabel value="Q5"/>
                                </th>                
                                <th class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                    <apex:outputlabel value="Q6"/>
                                </th>                
                                <th  class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                    <apex:outputlabel value="Q7"/>
                                </th>                
                                <th class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                    <apex:outputlabel value="Q8"/>
                                </th>
                                <th class="headerRowLower" id="Year2th" style="display:{!if(strSelectedYear == 'Year2','','none')};">
                                    <apex:outputlabel value="Total Cost - Year 2"/>
                                </th>
                                
                                <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                    <apex:outputlabel value="Q9"/>
                                </th>                
                                <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                    <apex:outputlabel value="Q10"/>
                                </th>                
                                <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                    <apex:outputlabel value="Q11"/>
                                </th>                
                                <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                    <apex:outputlabel value="Q12"/>
                                </th>
                                <th class="headerRowLower" id="Year3th" style="display:{!if(strSelectedYear == 'Year3','','none')};">
                                    <apex:outputlabel value="Total Cost - Year 3"/>
                                </th>
                                
                                <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                    <apex:outputlabel value="Q13"/>
                                </th>                
                                <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                    <apex:outputlabel value="Q14"/>
                                </th>                
                                <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                    <apex:outputlabel value="Q15"/>
                                </th>                
                                <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                    <apex:outputlabel value="Q16"/>
                                </th>
                                <th class="headerRowLower" id="Year4th" style="display:{!if(strSelectedYear == 'Year4','','none')};">
                                    <apex:outputlabel value="Total Cost - Year 4"/>
                                </th>
                                <th class="headerRowLower">
                                    <apex:outputlabel value="Total Cost"/>
                                </th>
                                <th>
                                </th>
                            </tr>
                        </thead>
                        <apex:actionFunction action="{!SavePSMCost}" reRender="frm" status="Processing" name="actSavePSMCost" oncomplete="CancelNewPSMCostRow();">
                            <apex:param value="" name="SaveIndex" id="SaveIndexPSM"/>
                        </apex:actionFunction>
                        <!--<apex:actionFunction name="actSavePSMSplit" action="{!SavePSMSplit}" status="Processing" rerender="frm"/>
                        <apex:actionFunction action="{!SelectUnitMeasure}" reRender="frm" status="Processing" name="actSelectUnitMeasure">
                            <apex:param value="" name="SelectIndex" id="SelectIndex"/>
                        </apex:actionFunction>  
                        <apex:actionFunction name="actSaveAssumptionNew" action="{!SaveAssumptionNew}" status="Processing" rerender="frm" />
                        
                        <apex:variable value="{!1}" var="CountPSMCost"/>
                        <apex:repeat id="rptPSMCost" value="{!lstPSMCosts}" var="PSMCost">
                            <tr>
                                <td class="dataCell TDstyle" >
                                    <apex:outputText value="{!Count}"/>
                                </td>                                    
                                <td class="dataCell TDstyle" >
                                    <apex:selectList id="SelCIPSMCost" value="{!PSMCost.strCostInputNamePSMCost}" size="1" style="width:150px;" rendered="{!!PSMCost.blnIsEditable}">
                                        <apex:selectOptions value="{!CostInputOptionsPSMCost}"></apex:selectOptions>
                                    </apex:selectList>
                                    <apex:outputText value="{!PSMCost.strCostInputNamePSMCost}" rendered="{!PSMCost.blnIsEditable}"/>                                        
                                </td>                       
                                <td class="dataCell TDstyle" >
                                    <apex:selectList id="SelImpPSMCost" value="{!PSMCost.strPayee}" size="1" style="width:150px;" rendered="{!!PSMCost.blnIsEditable}">
                                        <apex:selectOptions value="{!ImplementersOptions}"></apex:selectOptions>
                                    </apex:selectList>
                                    <apex:outputText value="{!PSMCost.strPayee}" rendered="{!PSMCost.blnIsEditable}" />
                                </td>
                                
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:inputField id="txtQ1Cost" value="{!PSMCost.objPSMCost.Q1_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY1('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY1}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q1_Cost__c}" rendered="{!PSMCost.blnIsEditable}" />
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:inputField id="txtQ2Cost" value="{!PSMCost.objPSMCost.Q2_Cost__c}" rendered="{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>6,false,!PSMCost.blnIsEditable)}" onchange="CalculateTotalCostY1('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY1}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q2_Cost__c}" rendered="{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>6,false,PSMCost.blnIsEditable)}"/>
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};" > 
                                    <apex:inputField id="txtQ3Cost" value="{!PSMCost.objPSMCost.Q3_Cost__c}" rendered="{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>9,false,!PSMCost.blnIsEditable)}" onchange="CalculateTotalCostY1('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY1}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q3_Cost__c}" rendered="{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>9,false,PSMCost.blnIsEditable)}"/>
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:inputField id="txtQ4Cost" value="{!PSMCost.objPSMCost.Q4_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY1('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY1}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q4_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                    <apex:outputText id="txtTotalCostY1" value="{0,number,###,###,###}">
                                        <apex:param value="{!PSMCost.TotalCostY1}"/>
                                    </apex:outputText>
                                </td>
                                
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ5Cost" value="{!PSMCost.objPSMCost.Q5_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY2('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY2}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q5_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle"> 
                                    <apex:inputField id="txtQ6Cost" value="{!PSMCost.objPSMCost.Q6_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY2('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY2}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q6_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ7Cost" value="{!PSMCost.objPSMCost.Q7_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY2('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY2}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q7_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle"> 
                                    <apex:inputField id="txtQ8Cost" value="{!PSMCost.objPSMCost.Q8_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY2('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY2}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q8_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                    <apex:outputText id="txtTotalCostY2" value="{0,number,###,###,###}">
                                        <apex:param value="{!PSMCost.TotalCostY2}"/>
                                    </apex:outputText>
                                </td>                                
                                
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ9Cost" value="{!PSMCost.objPSMCost.Q9_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY3('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY3}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q9_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ10Cost" value="{!PSMCost.objPSMCost.Q10_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY3('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY3}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q10_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ11Cost" value="{!PSMCost.objPSMCost.Q11_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY3('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY3}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q11_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ12Cost" value="{!PSMCost.objPSMCost.Q12_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY3('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY3}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q12_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                    <apex:outputText id="txtTotalCostY3" value="{0,number,###,###,###}">
                                        <apex:param value="{!PSMCost.TotalCostY3}"/>
                                    </apex:outputText>
                                </td>
                                
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ13Cost" value="{!PSMCost.objPSMCost.Q13_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY4('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY4}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q13_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>           
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ14Cost" value="{!PSMCost.objPSMCost.Q14_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY4('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY4}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q14_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ15Cost" value="{!PSMCost.objPSMCost.Q15_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY4('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY4}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q15_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:inputField id="txtQ16Cost" value="{!PSMCost.objPSMCost.Q16_Cost__c}" rendered="{!!PSMCost.blnIsEditable}" onchange="CalculateTotalCostY4('{!$Component.txtQ1Cost}','{!$Component.txtQ2Cost}','{!$Component.txtQ3Cost}','{!$Component.txtQ4Cost}','{!$Component.txtQ5Cost}','{!$Component.txtQ6Cost}','{!$Component.txtQ7Cost}','{!$Component.txtQ8Cost}','{!$Component.txtQ9Cost}','{!$Component.txtQ10Cost}','{!$Component.txtQ11Cost}','{!$Component.txtQ12Cost}','{!$Component.txtQ13Cost}','{!$Component.txtQ14Cost}','{!$Component.txtQ15Cost}','{!$Component.txtQ16Cost}','{!$Component.txtTotalCostY4}','{!$Component.GrantTotalCost}');"/>
                                    <apex:outputField value="{!PSMCost.objPSMCost.Q16_Cost__c}" rendered="{!PSMCost.blnIsEditable}"/>
                                </td>
                                <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                    <apex:outputText id="txtTotalCostY4"  value="{0,number,###,###,###}">
                                        <apex:param value="{!PSMCost.TotalCostY4}"/>
                                    </apex:outputText>
                                </td>
                                <td class="dataCell TDstyle" >
                                    <apex:outputText id="GrantTotalCost" value="{0,number,###,###,###}">
                                        <apex:param value="{!PSMCost.GrantTotalCost}"/>
                                    </apex:outputText>
                                    <br/>
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-warning" style="border-right:1px solid #E0E3E5 !important;" action="{!OpenInterventionSplitPopup}" status="Processing" rerender="frm">
                                        <strong>Intervention Split</strong>
                                        <apex:param value="{!Count-1}" name="OpenIndex" Id="OpenIndex4"/>
                                        <apex:param value="PSMcost" name="type" Id="type2"/>
                                    </apex:commandLink>
                                </td>
                                <td class="dataCell TDstyle" style="border: 1px solid #E0E3E5 !important;" width="35px">
                                    <apex:commandLink id="cmdLinkEditGoal" reRender="frm" Status="Processing" styleClass="TGFbtn TGFbtn-mini TGFbtn-primary" action="{!EditPSMCost}" style="display:{!if(PSMCost.blnIsEditable != true,'none','')};width:30px;height:25px;" >
                                        <i class="icon-edit icon-white" style="margin-top:6px"></i>
                                        <apex:param value="{!CountPSMCost-1}" name="EditIndex"/>
                                    </apex:commandLink>
                                    <apex:commandLink id="cmdLinkSaveGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return ValidateSavePSMCost('{!$Component.SelCIPSMCost}','{!$Component.SelImpPSMCost}','{!CountPSMCost-1}');" style="display:{!if(PSMCost.blnIsEditable == true,'none','')};width:40px;">
                                        <strong>Save</strong>                                            
                                    </apex:commandLink>
                    
                                    <apex:commandLink id="cmdLinkCancelGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" reRender="frm" action="{!CancelPSMCost}" Status="Processing" style="display:{!if(PSMCost.blnIsEditable == true,'none','')};width:55px;">
                                        <strong>Cancel</strong>
                                        <apex:param value="{!CountPSMCost-1}" name="CancelIndex" />
                                    </apex:commandLink>
                                    <apex:commandLink id="cmdLinkDeleteGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:30px;height:25px;margin-top:6px;display:{!if(PSMCost.blnIsEditable != true,'none','')};" onclick="return OpenDeletePopup('{!$Component.tstpopupPSM}')">
                                        <i class="icon-trash icon-white" style="margin-top:6px"></i> 
                                    </apex:commandLink>
                                    <apex:outputPanel id="tstpopupPSM" style="display:none;">
                                        <apex:outputPanel id="popupBackground" styleClass="popupBackground"/>
                                        <apex:outputPanel id="custPopup" styleClass="custPopup">
                                            <table width="100%" cellspacing="0" cellpadding="0" border="0" >
                                                <tr>
                                                    <td colspan="3" class="deletePopup">
                                                        <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="Are you sure?"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="3" class="deletePopup">
                                                        <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="This PSMCost will be deleted."/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="47%" class="deletePopup">
                                                        <apex:commandButton styleClass="popupButtonYes" action="{!DeletePSMCost}" value="Yes" reRender="frm" status="Processing">
                                                            <apex:param value="{!CountPSMCost-1}" name="DeleteIndex" />
                                                        </apex:commandButton>
                                                    </td>
                                                    <td width="6%" class="deletePopup"></td>
                                                    <td width="47%" align="left" class="deletePopupCancel">
                                                        <apex:commandButton styleClass="popupButtonCancel" value="Cancel" onclick="return ClosePopup('{!$Component.tstpopupPSM}');"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </td>
                            </tr>
                            <apex:variable value="{!CountPSMCost+ 1}" var="CountPSMCost"/>
                         </apex:repeat>
                         <tr id="btnAddPSMCost">
                              <td colspan="2" style="border-bottom:0px !important;">
                                 <apex:commandLink styleClass="TGFbtn TGFbtn-success pull-right" onclick="return DisplayNewPSMCostRow();" style="width:140px;">
                                    <i class="icon-plus icon-white"></i> 
                                    <strong>Add PSM Cost</strong>
                                 </apex:commandLink>
                             </td>
                         </tr>
                         
                         <tr id="PSMCostNewTR" style="display:none;">
                            <td class="dataCell TDstyle" >
                                <apex:outputText value="{!Count}"/>
                            </td>                                    
                            <td class="dataCell TDstyle" >
                                <apex:selectList id="SelCIPSMCostNew" value="{!objNewPSMCost.strCostInputNamePSMCost}" size="1" style="width:150px;">
                                    <apex:selectOptions value="{!CostInputOptionsPSMCost}"></apex:selectOptions>
                                </apex:selectList>                           
                            </td>                       
                            <td class="dataCell TDstyle" >
                                <apex:selectList id="SelImpPSMCostNew" value="{!objNewPSMCost.strPayee}" size="1" style="width:150px;">
                                    <apex:selectOptions value="{!ImplementersOptions}"></apex:selectOptions>
                                </apex:selectList>
                            </td>
                            
                            <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                <apex:inputField id="txtQ1CostNew" value="{!objNewPSMCost.objPSMCost.Q1_Cost__c}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>3,'none','')}" onchange="CalculateTotalCostY1('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY1New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                <apex:inputField id="txtQ2CostNew" value="{!objNewPSMCost.objPSMCost.Q2_Cost__c}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>6,'none','')}" onchange="CalculateTotalCostY1('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY1New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};" > 
                                <apex:inputField id="txtQ3CostNew" value="{!objNewPSMCost.objPSMCost.Q3_Cost__c}" style="display:{!if(Page__c.Implementation_Period__r.Start_Date__c != null && MONTH(Page__c.Implementation_Period__r.Start_Date__c)>9,'none','')}" onchange="CalculateTotalCostY1('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY1New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                <apex:inputField id="txtQ4CostNew" value="{!objNewPSMCost.objPSMCost.Q4_Cost__c}" onchange="CalculateTotalCostY1('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY1New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year1td" class="dataCell TDstyle" style="display:{!if(strSelectedYear == 'Year1','','none')};">
                                <apex:outputText id="txtTotalCostY1New" value="{!objNewPSMCost.TotalCostY1}"/>
                            </td>
                            
                            <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ5CostNew" value="{!objNewPSMCost.objPSMCost.Q5_Cost__c}" onchange="CalculateTotalCostY2('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY2New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle"> 
                                <apex:inputField id="txtQ6CostNew" value="{!objNewPSMCost.objPSMCost.Q6_Cost__c}" onchange="CalculateTotalCostY2('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY2New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ7CostNew" value="{!objNewPSMCost.objPSMCost.Q7_Cost__c}" onchange="CalculateTotalCostY2('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY2New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle"> 
                                <apex:inputField id="txtQ8CostNew" value="{!objNewPSMCost.objPSMCost.Q8_Cost__c}" onchange="CalculateTotalCostY2('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY2New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year2td" style="display:{!if(strSelectedYear == 'Year2','','none')};" class="dataCell TDstyle">
                                <apex:outputText id="txtTotalCostY2New" value="{!objNewPSMCost.TotalCostY2}"/>
                            </td>
                            
                            <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ9CostNew" value="{!objNewPSMCost.objPSMCost.Q9_Cost__c}" onchange="CalculateTotalCostY3('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY3New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ10CostNew" value="{!objNewPSMCost.objPSMCost.Q10_Cost__c}" onchange="CalculateTotalCostY3('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY3New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ11CostNew" value="{!objNewPSMCost.objPSMCost.Q11_Cost__c}" onchange="CalculateTotalCostY3('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY3New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ12CostNew" value="{!objNewPSMCost.objPSMCost.Q12_Cost__c}" onchange="CalculateTotalCostY3('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY3New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year3td" style="display:{!if(strSelectedYear == 'Year3','','none')};" class="dataCell TDstyle">
                                <apex:outputText id="txtTotalCostY3New" value="{!objNewPSMCost.TotalCostY3}"/>
                            </td>
                            
                            <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ13CostNew" value="{!objNewPSMCost.objPSMCost.Q13_Cost__c}" onchange="CalculateTotalCostY4('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY4New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>           
                            <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ14CostNew" value="{!objNewPSMCost.objPSMCost.Q14_Cost__c}" onchange="CalculateTotalCostY4('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY4New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ15CostNew" value="{!objNewPSMCost.objPSMCost.Q15_Cost__c}" onchange="CalculateTotalCostY4('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY4New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                <apex:inputField id="txtQ16CostNew" value="{!objNewPSMCost.objPSMCost.Q16_Cost__c}" onchange="CalculateTotalCostY4('{!$Component.txtQ1CostNew}','{!$Component.txtQ2CostNew}','{!$Component.txtQ3CostNew}','{!$Component.txtQ4CostNew}','{!$Component.txtQ5CostNew}','{!$Component.txtQ6CostNew}','{!$Component.txtQ7CostNew}','{!$Component.txtQ8CostNew}','{!$Component.txtQ9CostNew}','{!$Component.txtQ10CostNew}','{!$Component.txtQ11CostNew}','{!$Component.txtQ12CostNew}','{!$Component.txtQ13CostNew}','{!$Component.txtQ14CostNew}','{!$Component.txtQ15CostNew}','{!$Component.txtQ16CostNew}','{!$Component.txtTotalCostY4New}','{!$Component.GrantTotalCostNew}');"/>
                            </td>
                            <td id="Year4td" style="display:{!if(strSelectedYear == 'Year4','','none')};" class="dataCell TDstyle">
                                <apex:outputText id="txtTotalCostY4New" value="{!objNewPSMCost.TotalCostY4}"/>
                            </td>
                            <td class="dataCell TDstyle" >
                                <apex:outputText id="GrantTotalCostNew" value="{!objNewPSMCost.GrantTotalCost}"/>
                            </td>
                            <td class="dataCell TDstyle" style="border: 1px solid #E0E3E5 !important;" width="35px">
                                <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return ValidateSavePSMCost('{!$Component.SelCIPSMCostNew}','{!$Component.SelImpPSMCostNew}','{!if(lstPSMCosts != null && lstPSMCosts.size > 0,lstPSMCosts.size+1,1)}');" style="width:40px;">
                                    <strong>Save</strong>                                            
                                </apex:commandLink>
                        
                                <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" onclick="return CancelNewPSMCostRow();" style="width:55px;">
                                    <strong>Cancel</strong>
                                </apex:commandLink>
                                
                            </td>
                        </tr>
                         
                        </table>-->
                    </td>
                </tr>
            </table>
        </div>
        <style>
        .ProcessingBackground
        {
            background-color: black;
            opacity: 0.50;
            filter: alpha(opacity = 50);
            width: 100%;
            height: 100%;
            position: fixed;
            z-index: 9999;
            top:0;
            left:0;
        }
        .Processing
        {
            z-index: 9999;
            left: 50%;
            top: 50%;
            text-align: center;
            position: fixed;
        }        
        </style>
        <div id="divProcessing" style="display:none;">
            <div class="ProcessingBackground"></div>
            <div class="Processing">
                <apex:image alt="Processing" url="{!$Resource.LoadingCircle}" />
            </div>
        </div>  
        <apex:actionStatus id="Processing" onstart="document.getElementById('divProcessing').style.display = '';" onstop="document.getElementById('divProcessing').style.display = 'none';">                            
        </apex:actionStatus> 
        <script>
            function Hello(){
                alert('hi');
            }
            function displayYearToggle(thisTH,SelectedYear,NewYear,NewYearth,NewYeartd){
                var AllTD = document.getElementsByTagName("td");
                var AllTH = document.getElementsByTagName("th");
                var AllTD_UnitCost = document.getElementsByTagName("td");
                var AllTH_UnitCost = document.getElementsByTagName("th");
                
                var hdnYear = document.getElementById(SelectedYear);
                var thId;
                var tdId;
                if(hdnYear.value == 'Year1'){
                    thId = 'Year1th';
                    tdId = 'Year1td';
                }else if(hdnYear.value == 'Year2'){
                    thId = 'Year2th';
                    tdId = 'Year2td';
                }else if(hdnYear.value == 'Year3'){
                    thId = 'Year3th';
                    tdId = 'Year3td';
                }else if(hdnYear.value == 'Year4'){
                    thId = 'Year4th';
                    tdId = 'Year4td';
                }
                if(hdnYear.value != NewYear){
                    for(var i=0;i<AllTD.length;i++){
                        if(AllTD[i].id == tdId){
                            AllTD[i].style.display = 'none';
                        }else if(AllTD[i].id == NewYeartd){
                            AllTD[i].style.display = '';
                        }
                        if('{!strSelectedCatagory}' != 'PSM Costs'){
                            if(AllTD_UnitCost[i].id == tdId + "_UC"){
                                AllTD_UnitCost[i].style.display = 'none';
                            }else if(AllTD_UnitCost[i].id == NewYeartd + "_UC"){
                                AllTD_UnitCost[i].style.display = '';
                            }
                        }
                    }
                    for(var i=0;i<AllTH.length;i++){
                        if(AllTH[i].id == thId){
                            AllTH[i].style.display = 'none';
                        }else if(AllTH[i].id == NewYearth){
                            AllTH[i].style.display = '';
                        }
                        if('{!strSelectedCatagory}' != 'PSM Costs'){
                            if(AllTH_UnitCost[i].id == thId + "_UC"){
                                AllTH_UnitCost[i].style.display = 'none';
                            }else if(AllTH_UnitCost[i].id == NewYearth + "_UC"){
                                AllTH_UnitCost[i].style.display = '';
                            }
                        }
                    }                    
                    
                    document.getElementById(thisTH).style.background = '#434445';
                    document.getElementById(thisTH).style.color = '#FFFFFF';
                    if(hdnYear.value == 'Year1'){
                        document.getElementById('MainThYear1').style.background = '#DFEFF0';
                        document.getElementById('MainThYear1').style.color = '#00688B';
                    }else if(hdnYear.value == 'Year2'){
                        document.getElementById('MainThYear2').style.background = '#E7F2D5';
                        document.getElementById('MainThYear2').style.color = '#00688B';
                    }else if(hdnYear.value == 'Year3'){
                        document.getElementById('MainThYear3').style.background = '#FAF3CA';
                        document.getElementById('MainThYear3').style.color = '#00688B';
                    }else if(hdnYear.value == 'Year4'){
                        document.getElementById('MainThYear4').style.background = '#F0E1E2';
                        document.getElementById('MainThYear4').style.color = '#00688B';
                    }
                    document.getElementById(SelectedYear).value = NewYear;
                }
            }

            function CalculateAmount(YearAmount,Quantity){
                var QuantityValue = document.getElementById(Quantity).value;
                if(QuantityValue == '' || QuantityValue == null) QuantityValue = 0;           
                var Amount = parseInt(YearAmount) * parseInt(QuantityValue);
                return Amount;
            }
            function CalculateQuantity(QuantityValue){
                //var QuantityValue = document.getElementById(Quantity).value;                
                if(QuantityValue == '' || QuantityValue == null || isNaN(QuantityValue)) QuantityValue = 0;           
                return QuantityValue;
            }
            
            function Removeindividual(Quantity){
                var QuantityValue = document.getElementById(Quantity).value;
                if(QuantityValue.indexOf(",") != -1){
                    QuantityValue = QuantityValue.replace(",","");
                }
                return QuantityValue;
            }
            
            function CalculateTotalYear1(Y1,Y2,Y3,Y4,Q1,Q2,Q3,Q4,Q5,Q6,Q7,Q8,Q9,Q10,Q11,Q12,Q13,Q14,Q15,Q16,TotalQty,GrantQty){
                var Year1Amt = document.getElementById(Y1).value;   
                var Year2Amt = document.getElementById(Y2).value;
                var Year3Amt = document.getElementById(Y3).value;
                var Year4Amt = document.getElementById(Y4).value;   
                if(Year1Amt == '' || Year1Amt == null) Year1Amt = 0;
                if(Year2Amt == '' || Year2Amt == null) Year2Amt = 0;
                if(Year3Amt == '' || Year3Amt == null) Year3Amt = 0;
                if(Year4Amt == '' || Year4Amt == null) Year4Amt = 0;
                
                var Q1 = Removeindividual(Q1);
                var Q2 = Removeindividual(Q2);
                var Q3 = Removeindividual(Q3);
                var Q4 = Removeindividual(Q4);
                var Q5 = Removeindividual(Q5);
                var Q6 = Removeindividual(Q6);
                var Q7 = Removeindividual(Q7);
                var Q8 = Removeindividual(Q8);                
                var Q9 = Removeindividual(Q9);
                var Q10 = Removeindividual(Q10);
                var Q11 = Removeindividual(Q11);
                var Q12 = Removeindividual(Q12);
                var Q13 = Removeindividual(Q13);
                var Q14 = Removeindividual(Q14);
                var Q15 = Removeindividual(Q15);
                var Q16 = Removeindividual(Q16);
                
                document.getElementById(TotalQty).innerHTML = addCommas((((parseFloat(CalculateQuantity(Q1)) + parseFloat(CalculateQuantity(Q2)) + parseFloat(CalculateQuantity(Q3)) + parseFloat(CalculateQuantity(Q4)))).toFixed(2)).toString());
                if(document.getElementById(TotalQty).innerHTML == 0) document.getElementById(TotalQty).innerHTML = '';
                
                document.getElementById(GrantQty).innerHTML = addCommas((((parseFloat(CalculateQuantity(Q1)) + parseFloat(CalculateQuantity(Q2)) + parseFloat(CalculateQuantity(Q3)) + parseFloat(CalculateQuantity(Q4)) + parseFloat(CalculateQuantity(Q5)) + parseFloat(CalculateQuantity(Q6)) + parseFloat(CalculateQuantity(Q7)) + parseFloat(CalculateQuantity(Q8)) + parseFloat(CalculateQuantity(Q9)) + parseFloat(CalculateQuantity(Q10)) + parseFloat(CalculateQuantity(Q11)) + parseFloat(CalculateQuantity(Q12)) + parseFloat(CalculateQuantity(Q13)) + parseFloat(CalculateQuantity(Q14)) + parseFloat(CalculateQuantity(Q15)) + parseFloat(CalculateQuantity(Q16)))).toFixed(2)).toString());
                if(document.getElementById(GrantQty).innerHTML == 0) document.getElementById(GrantQty).innerHTML = '';
                
            }
            function CalculateTotalYear2(Y1,Y2,Y3,Y4,Q1,Q2,Q3,Q4,Q5,Q6,Q7,Q8,Q9,Q10,Q11,Q12,Q13,Q14,Q15,Q16,TotalQty,GrantQty){
                var Year1Amt = document.getElementById(Y1).value;   
                var Year2Amt = document.getElementById(Y2).value;
                var Year3Amt = document.getElementById(Y3).value;
                var Year4Amt = document.getElementById(Y4).value;  
                if(Year1Amt == '' || Year1Amt == null) Year1Amt = 0;
                if(Year2Amt == '' || Year2Amt == null) Year2Amt = 0;
                if(Year3Amt == '' || Year3Amt == null) Year3Amt = 0;
                if(Year4Amt == '' || Year4Amt == null) Year4Amt = 0;                
                
                var Q1 = Removeindividual(Q1);
                var Q2 = Removeindividual(Q2);
                var Q3 = Removeindividual(Q3);
                var Q4 = Removeindividual(Q4);
                var Q5 = Removeindividual(Q5);
                var Q6 = Removeindividual(Q6);
                var Q7 = Removeindividual(Q7);
                var Q8 = Removeindividual(Q8);                
                var Q9 = Removeindividual(Q9);
                var Q10 = Removeindividual(Q10);
                var Q11 = Removeindividual(Q11);
                var Q12 = Removeindividual(Q12);
                var Q13 = Removeindividual(Q13);
                var Q14 = Removeindividual(Q14);
                var Q15 = Removeindividual(Q15);
                var Q16 = Removeindividual(Q16);
                
                document.getElementById(TotalQty).innerHTML = addCommas((((parseFloat(CalculateQuantity(Q5)) + parseFloat(CalculateQuantity(Q6)) + parseFloat(CalculateQuantity(Q7)) + parseFloat(CalculateQuantity(Q8)))).toFixed(2)).toString());
                if(document.getElementById(TotalQty).innerHTML == 0) document.getElementById(TotalQty).innerHTML = '';
                
                document.getElementById(GrantQty).innerHTML = addCommas((((parseFloat(CalculateQuantity(Q1)) + parseFloat(CalculateQuantity(Q2)) + parseFloat(CalculateQuantity(Q3)) + parseFloat(CalculateQuantity(Q4)) + parseFloat(CalculateQuantity(Q5)) + parseFloat(CalculateQuantity(Q6)) + parseFloat(CalculateQuantity(Q7)) + parseFloat(CalculateQuantity(Q8)) + parseFloat(CalculateQuantity(Q9)) + parseFloat(CalculateQuantity(Q10)) + parseFloat(CalculateQuantity(Q11)) + parseFloat(CalculateQuantity(Q12)) + parseFloat(CalculateQuantity(Q13)) + parseFloat(CalculateQuantity(Q14)) + parseFloat(CalculateQuantity(Q15)) + parseFloat(CalculateQuantity(Q16)))).toFixed(2)).toString());
                if(document.getElementById(GrantQty).innerHTML == 0) document.getElementById(GrantQty).innerHTML = '';
               
            }            
            function CalculateTotalYear3(Y1,Y2,Y3,Y4,Q1,Q2,Q3,Q4,Q5,Q6,Q7,Q8,Q9,Q10,Q11,Q12,Q13,Q14,Q15,Q16,TotalQty,GrantQty){
                var Year1Amt = document.getElementById(Y1).value;   
                var Year2Amt = document.getElementById(Y2).value;
                var Year3Amt = document.getElementById(Y3).value;
                var Year4Amt = document.getElementById(Y4).value;      
                if(Year1Amt == '' || Year1Amt == null) Year1Amt = 0;
                if(Year2Amt == '' || Year2Amt == null) Year2Amt = 0;
                if(Year3Amt == '' || Year3Amt == null) Year3Amt = 0;
                if(Year4Amt == '' || Year4Amt == null) Year4Amt = 0;        
                
                var Q1 = Removeindividual(Q1);
                var Q2 = Removeindividual(Q2);
                var Q3 = Removeindividual(Q3);
                var Q4 = Removeindividual(Q4);
                var Q5 = Removeindividual(Q5);
                var Q6 = Removeindividual(Q6);
                var Q7 = Removeindividual(Q7);
                var Q8 = Removeindividual(Q8);                
                var Q9 = Removeindividual(Q9);
                var Q10 = Removeindividual(Q10);
                var Q11 = Removeindividual(Q11);
                var Q12 = Removeindividual(Q12);
                var Q13 = Removeindividual(Q13);
                var Q14 = Removeindividual(Q14);
                var Q15 = Removeindividual(Q15);
                var Q16 = Removeindividual(Q16);
                
                document.getElementById(TotalQty).innerHTML = addCommas((((parseFloat(CalculateQuantity(Q9)) + parseFloat(CalculateQuantity(Q10)) + parseFloat(CalculateQuantity(Q11)) + parseFloat(CalculateQuantity(Q12)))).toFixed(2)).toString());
                if(document.getElementById(TotalQty).innerHTML == 0) document.getElementById(TotalQty).innerHTML = '';
                
                document.getElementById(GrantQty).innerHTML = addCommas((((parseFloat(CalculateQuantity(Q1)) + parseFloat(CalculateQuantity(Q2)) + parseFloat(CalculateQuantity(Q3)) + parseFloat(CalculateQuantity(Q4)) + parseFloat(CalculateQuantity(Q5)) + parseFloat(CalculateQuantity(Q6)) + parseFloat(CalculateQuantity(Q7)) + parseFloat(CalculateQuantity(Q8)) + parseFloat(CalculateQuantity(Q9)) + parseFloat(CalculateQuantity(Q10)) + parseFloat(CalculateQuantity(Q11)) + parseFloat(CalculateQuantity(Q12)) + parseFloat(CalculateQuantity(Q13)) + parseFloat(CalculateQuantity(Q14)) + parseFloat(CalculateQuantity(Q15)) + parseFloat(CalculateQuantity(Q16)))).toFixed(2)).toString());
                if(document.getElementById(GrantQty).innerHTML == 0) document.getElementById(GrantQty).innerHTML = '';
                
            }            
            function CalculateTotalYear4(Y1,Y2,Y3,Y4,Q1,Q2,Q3,Q4,Q5,Q6,Q7,Q8,Q9,Q10,Q11,Q12,Q13,Q14,Q15,Q16,TotalQty,GrantQty){
                var Year1Amt = document.getElementById(Y1).value;   
                var Year2Amt = document.getElementById(Y2).value;
                var Year3Amt = document.getElementById(Y3).value;
                var Year4Amt = document.getElementById(Y4).value;  
                if(Year1Amt == '' || Year1Amt == null) Year1Amt = 0;
                if(Year2Amt == '' || Year2Amt == null) Year2Amt = 0;
                if(Year3Amt == '' || Year3Amt == null) Year3Amt = 0;
                if(Year4Amt == '' || Year4Amt == null) Year4Amt = 0;               
                
                var Q1 = Removeindividual(Q1);
                var Q2 = Removeindividual(Q2);
                var Q3 = Removeindividual(Q3);
                var Q4 = Removeindividual(Q4);
                var Q5 = Removeindividual(Q5);
                var Q6 = Removeindividual(Q6);
                var Q7 = Removeindividual(Q7);
                var Q8 = Removeindividual(Q8);                
                var Q9 = Removeindividual(Q9);
                var Q10 = Removeindividual(Q10);
                var Q11 = Removeindividual(Q11);
                var Q12 = Removeindividual(Q12);
                var Q13 = Removeindividual(Q13);
                var Q14 = Removeindividual(Q14);
                var Q15 = Removeindividual(Q15);
                var Q16 = Removeindividual(Q16);
                
                document.getElementById(TotalQty).innerHTML = addCommas((((parseFloat(CalculateQuantity(Q13)) + parseFloat(CalculateQuantity(Q14)) + parseFloat(CalculateQuantity(Q15)) + parseFloat(CalculateQuantity(Q8)))).toFixed(2)).toString());
                if(document.getElementById(TotalQty).innerHTML == 0) document.getElementById(TotalQty).innerHTML = '';
                
                document.getElementById(GrantQty).innerHTML = addCommas((((parseFloat(CalculateQuantity(Q1)) + parseFloat(CalculateQuantity(Q2)) + parseFloat(CalculateQuantity(Q3)) + parseFloat(CalculateQuantity(Q4)) + parseFloat(CalculateQuantity(Q5)) + parseFloat(CalculateQuantity(Q6)) + parseFloat(CalculateQuantity(Q7)) + parseFloat(CalculateQuantity(Q8)) + parseFloat(CalculateQuantity(Q9)) + parseFloat(CalculateQuantity(Q10)) + parseFloat(CalculateQuantity(Q11)) + parseFloat(CalculateQuantity(Q12)) + parseFloat(CalculateQuantity(Q13)) + parseFloat(CalculateQuantity(Q14)) + parseFloat(CalculateQuantity(Q15)) + parseFloat(CalculateQuantity(Q16)))).toFixed(2)).toString());
                if(document.getElementById(GrantQty).innerHTML == 0) document.getElementById(GrantQty).innerHTML = '';
                
            }
            
            function addCommas(nStr)
            {
                
                nStr += '';
                x = nStr.split('.');
                x1 = x[0];
                x2 = x.length > 1 ? '.' + x[1] : '';
                var rgx = /(\d+)(\d{3})/;
                while (rgx.test(x1)) {
                    x1 = x1.replace(rgx, '$1' + ',' + '$2');
                }
                return x1 + x2;
            }
            
            function CalculateTotalYear1New(Y1,Q1,Q2,Q3,Q4,TotalQty,C1,C2,C3,C4,TotalCase){
                var Year1Amt = document.getElementById(Y1).value;
                var Qty1 = document.getElementById(Q1).value;
                if(Qty1 == '' || Qty1 == null) Qty1 = 0;           
                var Case1 = Year1Amt * Qty1;
                document.getElementById(C1).innerHTML = Case1.toFixed(2);

                var Qty2 = document.getElementById(Q2).value;
                if(Qty2 == '' || Qty2 == null) Qty2 = 0;
                var Case2 = Year1Amt * Qty2;
                document.getElementById(C2).innerHTML = Case2.toFixed(2);
                
                var Qty3 = document.getElementById(Q3).value;
                if(Qty3 == '' || Qty3 == null) Qty3 = 0;
                var Case3 = Year1Amt * Qty3;
                document.getElementById(C3).innerHTML = Case3.toFixed(2);
                
                var Qty4 = document.getElementById(Q4).value;
                if(Qty4 == '' || Qty4 == null) Qty4 = 0;
                var Case4 = Year1Amt * Qty4;
                document.getElementById(C4).innerHTML = Case4.toFixed(2);     
                
                document.getElementById(TotalQty).innerHTML = (parseFloat(Qty1) + parseFloat(Qty2) + parseFloat(Qty3) + parseFloat(Qty4)).toFixed(2);
                document.getElementById(TotalCase).innerHTML = (Case1 + Case2 + Case3 + Case4).toFixed(2);
            }
            function DisplayNewBudgetlineRow(){
                document.getElementById('newBudgetLine1').style.display = '';
                document.getElementById('btnAddBudgetLine').style.display = 'none';
                return false;
            }
            function CancelNewBudgetlineRow(){
                document.getElementById('newBudgetLine1').style.display = 'none';
                document.getElementById('btnAddBudgetLine').style.display = '';
                document.getElementById('page:frm:txtQ1QuantityNew').value = '';
                document.getElementById('page:frm:txtQ2QuantityNew').value = '';
                document.getElementById('page:frm:txtQ3QuantityNew').value = '';
                document.getElementById('page:frm:txtQ4QuantityNew').value = '';
                document.getElementById('page:frm:txtQ5QuantityNew').value = '';
                document.getElementById('page:frm:txtQ6QuantityNew').value = '';
                document.getElementById('page:frm:txtQ7QuantityNew').value = '';
                document.getElementById('page:frm:txtQ8QuantityNew').value = '';
                document.getElementById('page:frm:txtQ9QuantityNew').value = '';
                document.getElementById('page:frm:txtQ10QuantityNew').value = '';
                document.getElementById('page:frm:txtQ11QuantityNew').value = '';
                document.getElementById('page:frm:txtQ12QuantityNew').value = '';
                document.getElementById('page:frm:txtQ13QuantityNew').value = '';
                document.getElementById('page:frm:txtQ14QuantityNew').value = '';
                document.getElementById('page:frm:txtQ15QuantityNew').value = '';
                document.getElementById('page:frm:txtQ16QuantityNew').value = '';          
                if('{!strSelectedCatagory}' == 'Other Products'){
                    document.getElementById('page:frm:SelCINew').value = '';
                    document.getElementById('page:frm:SelGPNewOther').value = '';
                    document.getElementById('page:frm:SelSUNewOther').value = '';
                }else{
                    document.getElementById('page:frm:SelCINew').value = '';
                    document.getElementById('page:frm:SelGPNew').value = '';
                    document.getElementById('page:frm:SelSUNew').value = '';
                }
                document.getElementById('page:frm:SelImpNew').value = '';

                document.getElementById('page:frm:txtY1AmountNew').value = '';
                document.getElementById('page:frm:txtY2AmountNew').value = '';
                document.getElementById('page:frm:txtY3AmountNew').value = '';
                document.getElementById('page:frm:txtY4AmountNew').value = '';
                
                document.getElementById('page:frm:txtTotalQtyY1New').innerHTML = '';
                document.getElementById('page:frm:txtTotalQtyY2New').innerHTML = '';
                document.getElementById('page:frm:txtTotalQtyY3New').innerHTML = '';
                document.getElementById('page:frm:txtTotalQtyY4New').innerHTML = '';
                
                document.getElementById('page:frm:txtGrantTotalQtyNewY1').innerHTML = '';
                document.getElementById('page:frm:txtGrantTotalQtyNewY2').innerHTML = '';
                document.getElementById('page:frm:txtGrantTotalQtyNewY3').innerHTML = '';
                document.getElementById('page:frm:txtGrantTotalQtyNewY4').innerHTML = '';
                return false;
                
            }
            
            function CalculateTotalCostY1(C1,C2,C3,C4,C5,C6,C7,C8,C9,C10,C11,C12,C13,C14,C15,C16,TotalY1,GTotal){
                document.getElementById(TotalY1).innerHTML = (parseFloat(CalculateQuantity(C1)) + parseFloat(CalculateQuantity(C2)) + parseFloat(CalculateQuantity(C3)) + parseFloat(CalculateQuantity(C4))).toFixed(2);
                document.getElementById(GTotal).innerHTML = (parseFloat(CalculateQuantity(C1)) + parseFloat(CalculateQuantity(C2)) + parseFloat(CalculateQuantity(C3)) + parseFloat(CalculateQuantity(C4)) + parseFloat(CalculateQuantity(C5)) + parseFloat(CalculateQuantity(C6)) + parseFloat(CalculateQuantity(C7)) + parseFloat(CalculateQuantity(C8)) + parseFloat(CalculateQuantity(C9)) + parseFloat(CalculateQuantity(C10)) + parseFloat(CalculateQuantity(C11)) + parseFloat(CalculateQuantity(C12)) + parseFloat(CalculateQuantity(C13)) + parseFloat(CalculateQuantity(C14)) + parseFloat(CalculateQuantity(C15)) + parseFloat(CalculateQuantity(C16))).toFixed(2);
            }
            function CalculateTotalCostY2(C1,C2,C3,C4,C5,C6,C7,C8,C9,C10,C11,C12,C13,C14,C15,C16,TotalY2,GTotal){
                document.getElementById(TotalY2).innerHTML = (parseFloat(CalculateQuantity(C5)) + parseFloat(CalculateQuantity(C6)) + parseFloat(CalculateQuantity(C7)) + parseFloat(CalculateQuantity(C8))).toFixed(2);
                document.getElementById(GTotal).innerHTML = (parseFloat(CalculateQuantity(C1)) + parseFloat(CalculateQuantity(C2)) + parseFloat(CalculateQuantity(C3)) + parseFloat(CalculateQuantity(C4)) + parseFloat(CalculateQuantity(C5)) + parseFloat(CalculateQuantity(C6)) + parseFloat(CalculateQuantity(C7)) + parseFloat(CalculateQuantity(C8)) + parseFloat(CalculateQuantity(C9)) + parseFloat(CalculateQuantity(C10)) + parseFloat(CalculateQuantity(C11)) + parseFloat(CalculateQuantity(C12)) + parseFloat(CalculateQuantity(C13)) + parseFloat(CalculateQuantity(C14)) + parseFloat(CalculateQuantity(C15)) + parseFloat(CalculateQuantity(C16))).toFixed(2);
            }
            function CalculateTotalCostY3(C1,C2,C3,C4,C5,C6,C7,C8,C9,C10,C11,C12,C13,C14,C15,C16,TotalY3,GTotal){
                document.getElementById(TotalY3).innerHTML = (parseFloat(CalculateQuantity(C9)) + parseFloat(CalculateQuantity(C10)) + parseFloat(CalculateQuantity(C11)) + parseFloat(CalculateQuantity(C12))).toFixed(2);
                document.getElementById(GTotal).innerHTML = (parseFloat(CalculateQuantity(C1)) + parseFloat(CalculateQuantity(C2)) + parseFloat(CalculateQuantity(C3)) + parseFloat(CalculateQuantity(C4)) + parseFloat(CalculateQuantity(C5)) + parseFloat(CalculateQuantity(C6)) + parseFloat(CalculateQuantity(C7)) + parseFloat(CalculateQuantity(C8)) + parseFloat(CalculateQuantity(C9)) + parseFloat(CalculateQuantity(C10)) + parseFloat(CalculateQuantity(C11)) + parseFloat(CalculateQuantity(C12)) + parseFloat(CalculateQuantity(C13)) + parseFloat(CalculateQuantity(C14)) + parseFloat(CalculateQuantity(C15)) + parseFloat(CalculateQuantity(C16))).toFixed(2);
            }
            function CalculateTotalCostY4(C1,C2,C3,C4,C5,C6,C7,C8,C9,C10,C11,C12,C13,C14,C15,C16,TotalY4,GTotal){
                document.getElementById(TotalY4).innerHTML = (parseFloat(CalculateQuantity(C13)) + parseFloat(CalculateQuantity(C14)) + parseFloat(CalculateQuantity(C15)) + parseFloat(CalculateQuantity(C16))).toFixed(2);
                document.getElementById(GTotal).innerHTML = (parseFloat(CalculateQuantity(C1)) + parseFloat(CalculateQuantity(C2)) + parseFloat(CalculateQuantity(C3)) + parseFloat(CalculateQuantity(C4)) + parseFloat(CalculateQuantity(C5)) + parseFloat(CalculateQuantity(C6)) + parseFloat(CalculateQuantity(C7)) + parseFloat(CalculateQuantity(C8)) + parseFloat(CalculateQuantity(C9)) + parseFloat(CalculateQuantity(C10)) + parseFloat(CalculateQuantity(C11)) + parseFloat(CalculateQuantity(C12)) + parseFloat(CalculateQuantity(C13)) + parseFloat(CalculateQuantity(C14)) + parseFloat(CalculateQuantity(C15)) + parseFloat(CalculateQuantity(C16))).toFixed(2);
            }
            
            function ValidateSaveNew(CI,GP,SU,Imp,SaveIndex){
                if(document.getElementById(CI).value == ''){
                    alert('You must select Product Catagory.');
                }else if(document.getElementById(GP).value == ''){
                        alert('You must select Product Name.');
                    }else if(document.getElementById(SU).value == ''){
                        alert('You must select Specification.');
                    }else if(document.getElementById(Imp).value == ''){
                        alert('You must select a Recipient.');
                    }else{
                    var CPId = document.getElementById(SU).value;
                    actSaveProduct1(SaveIndex,CPId);
                }
                return false;
            }
            
            function ValidateSaveNewOther(CI,GP,SU,Imp,SaveIndex){
                if(document.getElementById(CI).value == ''){
                    alert('You must select Product Catagory.');
                }else if(document.getElementById(GP).value == ''){
                    alert('You must select Product Name.');
                }else if(document.getElementById(SU).value == ''){
                    alert('You must select Specification.');
                }else{
                    var CPId;
                    actSaveProduct1(SaveIndex,CPId);
                }
                return false;
            }
            function ValidateSaveNewPSMCost(CI,GP,SU,Imp,SaveIndex){
                if(document.getElementById(CI).value == ''){
                    alert('You must select Product Catagory.');
                }else if(document.getElementById(Imp).value == ''){
                        alert('You must select a Recipient.');
                    }else{
                    var CPId;
                    actSaveProduct1(SaveIndex,CPId);
                }
                return false;
            }
            
            
            function ValidateSave(CI,GP,SU,Imp,SaveIndex){
                if(document.getElementById(CI).value == ''){
                    alert('You must select Product Catagory.');
                }else if(document.getElementById(GP).value == ''){
                    alert('You must select Product Name.');
                }else if(document.getElementById(SU).value == ''){
                    alert('You must select Specification.');
                }else if(document.getElementById(Imp).value == ''){
                    alert('You must select a Recipient.');
                }else{
                    var CPId = document.getElementById(SU).value;
                    actSaveProduct(SaveIndex,CPId);
                }
                return false;
            }
            
            function ValidateSaveOther(CI,GP,SU,Imp,SaveIndex){
                if(document.getElementById(CI).value == ''){
                    alert('You must select Product Catagory.');
                }else if(document.getElementById(GP).value == ''){
                    alert('You must select Product Name.');
                }else if(document.getElementById(SU).value == ''){
                    alert('You must select Specification.');
                }else if(document.getElementById(Imp).value == ''){
                    alert('You must select a Recipient.');
                }else{
                    var CPId;
                    actSaveProduct(SaveIndex,CPId);
                }
                return false;
            }
            
            
            function ValidateSavePSMCost(CI,Imp,SaveIndex){
                if(document.getElementById(CI).value == ''){
                    alert('You must select Cost Input.');
                }else if(document.getElementById(Imp).value == ''){
                    alert('You must select Recipient.');
                }else{
                    actSaveProduct(SaveIndex);
                }
                return false;
            }
            
            
            
            function validateSaveNew1(GIvalue){
                if(document.getElementById(GIvalue).value != ''){
                    actSaveProduct1();
                    return false;
                }else{
                    alert('You must select Grant Intervention before save.');
                    return false;
                }
            }
            
            function SelectUnitOfmeasure(CostInputValue,SelectIndex,UnitMeasure){
                if(CostInputValue.value != ''){
                    actSelectUnitMeasure(SelectIndex);
                    return false;
                }else{
                    document.getElementById(UnitMeasure).innerHTML = '';
                    return false;
                }
            }
            
            function SelectUnitOfmeasureNew(CostInputValue,CostInputId,UnitMeasure){
                if(CostInputValue.value != ''){
                    actSelectUnitMeasureNew(CostInputId);
                    return false;
                }else{
                    document.getElementById(UnitMeasure).innerHTML = '';
                    return false;
                }
            }            
            function completeOnchangeNewRow(){
                document.getElementById('newBudgetLine1').style.display = '';
                document.getElementById('newBudgetLine2').style.display = '';
                document.getElementById('btnAddBudgetLine').style.display = 'none';
            }
            function OpenDeletePopup(popupId){
                document.getElementById(popupId).style.display = '';
                return false;
            }
            function ClosePopup(popupId){
                document.getElementById(popupId).style.display = 'none';
                return false;
            }
            function EditAssumption(EditIndex){
                document.getElementById('page:frm:hdnIndex').value = EditIndex;
            }
            function AddNewAssumption(){
                document.getElementById('NewAssumptionTR').style.display = '';
                document.getElementById('AddButtonTD').style.display = 'none';
                return false;
            }
            function CancelAssumption(){
                document.getElementById('NewAssumptionTR').style.display = 'none';
                document.getElementById('AddButtonTD').style.display = '';
                return false;
            }
            function DisplayNewPSMCostRow(){
                document.getElementById('btnAddPSMCost').style.display = 'none';
                document.getElementById('PSMCostNewTR').style.display = '';
                return false;
            }
            function CancelNewPSMCostRow(){
                document.getElementById('btnAddPSMCost').style.display = '';
                document.getElementById('PSMCostNewTR').style.display = 'none';
                document.getElementById('page:frm:SelCIPSMCostNew').value = '';
                document.getElementById('page:frm:SelImpPSMCostNew').value = '';
                
                document.getElementById('page:frm:txtQ1CostNew').value = '';
                document.getElementById('page:frm:txtQ2CostNew').value = '';
                document.getElementById('page:frm:txtQ3CostNew').value = '';
                document.getElementById('page:frm:txtQ4CostNew').value = '';
                document.getElementById('page:frm:txtQ5CostNew').value = '';
                document.getElementById('page:frm:txtQ6CostNew').value = '';
                document.getElementById('page:frm:txtQ7CostNew').value = '';
                document.getElementById('page:frm:txtQ8CostNew').value = '';
                document.getElementById('page:frm:txtQ9CostNew').value = '';
                document.getElementById('page:frm:txtQ10CostNew').value = '';
                document.getElementById('page:frm:txtQ11CostNew').value = '';
                document.getElementById('page:frm:txtQ12CostNew').value = '';
                document.getElementById('page:frm:txtQ13CostNew').value = '';
                document.getElementById('page:frm:txtQ14CostNew').value = '';
                document.getElementById('page:frm:txtQ15CostNew').value = '';
                document.getElementById('page:frm:txtQ16CostNew').value = '';
                
                document.getElementById('page:frm:txtTotalCostY1New').innerHTML = '';
                document.getElementById('page:frm:txtTotalCostY2New').innerHTML = '';
                document.getElementById('page:frm:txtTotalCostY3New').innerHTML = '';
                document.getElementById('page:frm:txtTotalCostY4New').innerHTML = '';
                
                document.getElementById('page:frm:GrantTotalCostNew').innerHTML = '';
                return false;
            }
            function CalculateTotalCost(Cost,Duration,Quantity,TotalCost,Index,size){
                var txtCost = document.getElementById(Cost).value;
                var txtDuration = document.getElementById(Duration).value;
                var txtQuantity = document.getElementById(Quantity).value;
                if(txtCost == '' || txtCost == null) txtCost = 0;
                if(txtDuration == '' || txtDuration == null) txtDuration = 0;
                if(txtQuantity == '' || txtQuantity == null) txtQuantity = 0;
                
                if(document.getElementById('DurationTd').style.display != 'none'){
                    var Total = txtCost * txtDuration * txtQuantity;
                }else{
                    var Total = txtCost * txtQuantity;
                }
                if(Total == 0){
                    document.getElementById(TotalCost).innerHTML = '';
                }else{
                    document.getElementById(TotalCost).innerHTML = Total;
                }
                
                var TotalUcost = 0;
                for(var i=0;i<size;i++){
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtTotalCostY1').innerHTML == ''){
                        TotalUcost += 0;
                    }else{
                        TotalUcost += parseInt(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtTotalCostY1').innerHTML);
                    }
                }
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCost').innerHTML != ''){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCost').innerHTML = '';
                }
                if(TotalUcost == 0){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCost').innerHTML = '';
                }else{
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCost').innerHTML = TotalUcost;
                }
            }
            
            function CalculateTotalY1(Y1,Index,PSMIndex,size){
                if(size > 0 && Y1.value != ''){
                    var TotalY1 = 0;
                    var TotalY2 = 0;
                    var TotalY3 = 0;
                    var TotalY4 = 0;
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+PSMIndex+':PerY2').value == ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+PSMIndex+':PerY2').value = Y1.value;
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+PSMIndex+':PerY3').value == ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+PSMIndex+':PerY3').value = Y1.value;
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+PSMIndex+':PerY4').value == ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+PSMIndex+':PerY4').value = Y1.value;
                    }
                    for(var i=0;i<size;i++){
                        
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY1').value != ''){
                            if(TotalY1 == 0) TotalY1 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY1').value);
                            else TotalY1 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY1').value);
                        }
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY2').value != ''){
                            if(TotalY2 == 0) TotalY2 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY2').value);
                            else TotalY2 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY2').value);
                        }
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY3').value != ''){
                            if(TotalY3 == 0) TotalY3 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY3').value);
                            else TotalY3 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY3').value);
                        }
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value != ''){
                            if(TotalY4 == 0) TotalY4 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value);
                            else TotalY4 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value);
                        }
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY1').innerHTML != ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY1').innerHTML = ''
                    }
                    if(TotalY1 != 0){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY1').innerHTML = TotalY1;
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY2').innerHTML != ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY2').innerHTML = ''
                    }
                    if(TotalY2 != 0){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY2').innerHTML = TotalY2;
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML != ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML = ''
                    }
                    if(TotalY3 != 0){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML = TotalY3;
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML != ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML = ''
                    }
                    if(TotalY4 != 0){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML = TotalY4;
                    }
                }
            }
            
            function CalculateTotalY2(Y2,Index,size){
                if(size > 0 && Y2.value != ''){
                    var TotalY2 = 0;
                    for(var i=0;i<size;i++){
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY2').value != ''){
                            if(TotalY2 == 0) TotalY2 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY2').value);
                            else TotalY2 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY2').value);
                        }
                    }
                    if(TotalY2 != 0){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY2').innerHTML = TotalY2;
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotal2').innerHTML != ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY2').innerHTML = ''
                    }
                }
            }
            function CalculateTotalY3(Y3,Index,PSMIndex,size){
                if(size > 0 && Y3.value != ''){     
                    var TotalY3 = 0;
                    var TotalY4 = 0;
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+PSMIndex+':PerY4').value == ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+PSMIndex+':PerY4').value = Y3.value;
                    }
                    for(var i=0;i<size;i++){
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY3').value != ''){
                            if(TotalY3 == 0) TotalY3 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY3').value);
                            else TotalY3 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY3').value);
                        }
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value != ''){
                            if(TotalY4 == 0) TotalY4 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value);
                            else TotalY4 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value);
                        }
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML != ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML = ''
                    }
                    if(TotalY3 != 0){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML = TotalY3;
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML != ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML = ''
                    }
                    if(TotalY4 != 0){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML = TotalY4;
                    }
                }
            }
            function CalculateTotalY4(Y4,Index,size){
                if(size > 0 && Y4.value != ''){
                    var TotalY4 = 0;
                    for(var i=0;i<size;i++){
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value != ''){
                            if(TotalY4 == 0) TotalY4 =  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value);
                            else TotalY4 +=  parseFloat(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':PerY4').value);
                        }
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML != ''){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML = ''
                    }
                    if(TotalY4 != 0){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML = TotalY4;
                    }
                }
            }
            
            function SaveAssumptionRecords(Index,size){
                var isInterventionNull = false;
                var TotalY1 = document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY1').innerHTML;
                var TotalY2 = document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY2').innerHTML;
                var TotalY3 = document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY3').innerHTML;
                var TotalY4 = document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalY4').innerHTML;
                if(size > 0){
                    for(var i=0;i<size;i++){
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtIntervention').value == ''){
                            isInterventionNull = true;
                        }
                    }
                }
                if(isInterventionNull == true){
                    alert('You must select Intervention.');
                }else if(TotalY1 != '' && TotalY1 != 100){
                    alert('Total Y1 should be up to 100.');
                }else if(TotalY2 != '' && TotalY2 != 100){
                    alert('Total Y2 should be up to 100.');
                }else if(TotalY3 != '' && TotalY3 != 100){
                    alert('Total Y3 should be up to 100.');
                }else if(TotalY4 != '' && TotalY4 != 100){
                    alert('Total Y4 should be up to 100.');
                }else{
                    actSavePSMSplit();
                }                
                return false;
            }
            
            function oncompleteAssumption(){
                document.getElementById('NewAssumptionTR').style.display = 'none';
                document.getElementById('AddButtonTD').style.display = '';
            }
            
            function SelectGenericProductName(CostInputId,ChangeIndexGP){
                actfillGenericProduct(CostInputId,ChangeIndexGP);
                return false;
            }
            
            function SelectStrenthAndUnit(GenericProductId,ChangeIndex){
                actfillStrenthAndUnit(GenericProductId,ChangeIndex);
                return false;
            }
            function OpenDeletePopup(popupId){
                document.getElementById(popupId).style.display = '';
                return false;
            }
            function ClosePopup(popupId){
                document.getElementById(popupId).style.display = 'none';
                return false;
            }
            function CheckInterventionSplit(){
                var IDPrefix="page:frm:rptBudgetLine:";
                var IDSufix=":hdnlstPSMSplits";
                var count=0;
                var obj = document.getElementById(IDPrefix+count+IDSufix);
                while(obj!=null){
                    if(obj.innerHTML==0){
                        alert("One or more products are missing intervention splits. You must complete these before you can refresh the budget with PSM Costs.");
                        return false;
                    }
                    count++;
                    obj = document.getElementById(IDPrefix+count+IDSufix);
                }
                Refreshdate();
                return true;
            }
        </script>
        
            <style type="text/css">
                 .custAssumptionPopup{
                    background-color: white;
                    border-width: 0px;
                    border-radius:10px;
                    border-style: solid;
                    /*z-index: 9999;*/
                    z-index: 51;
                    left: 28%;
                    padding:10px;
                    position: absolute;
                    width:70%;                   
                }
                .popupAssumptionBackground{
                    background-color:black;
                    opacity: 0.20;
                    filter: alpha(opacity = 20);
                    position: absolute;
                    width: 100%;
                    height: 100%;
                    /*z-index: 9998;*/
                    z-index: 50;
                    top: 0;
                    left: 0;
                   
                }
        </style>
    </apex:form>
</apex:page>