<!--CONCEPT NOTE PRINCIPAL RECIPIENTS PAGE-->
<apex:page sidebar="false" standardController="Page__c" extensions="CNImplementers_Temp1" id="page">
    <apex:stylesheet value="{!URLFOR($Resource.GoalsJs, 'assets/css/bootstrap.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.GoalsJs, 'assets/css/bootstrap-responsive.css')}"/>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
    
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <apex:includeScript value="{URLFOR(!$Resource.jquery142, 'jquery.min.js')}"/>-->
    <apex:includeScript value="{!$Resource.jquery142}" />
    <style>
      
        /* To push content below navbar */
        table{
            border-collapse: separate;
        }
        select{
            width:90px;
        }
       
        .span9 {
            display: -moz-grid-line;
            width: 97%;
        }
        .container, .navbar-static-top .container, .navbar-fixed-top .container, .navbar-fixed-bottom .container {
            display: inline-block;
            margin-left: 1% !important;
            margin-right: 1% !important;
            width: 97%;
        }
        .containerTGF{
            display: inline-block;
            margin-left:1%;
            margin-right:1%;
            width: 97%;
        }
        @media (min-width: 980px) {
        body {
            margin-top: 41px;
        }
        }
        
        a.brand > a > img {
            height:40px;
        }
        .summary {
        border: 1px solid black;
            padding:10px;
        }
        div.active{
            background-color: #D1D1D1;
        }
        .add_indicator {
            margin: 30px;
            padding:40px;
            border: 1px solid #CCC;
        }
        
        .indicator{
            border:1px solid #CCC;
            padding:10px;
            margin-bottom:10px;
        }
        
        .baseline {
            /*width: 350px;*/
            width:44%;
            display: inline-block;
            margin-right:20px;
        }
        
        .target {
            /*width: 350px;*/
            width:50%;
            display: inline-block;
        }
        .popupButtonYes{
            background-color: #49C739 !important;
            background-image: none !important;
            color: white !important;
            font-size: 12.9pt !important;
            font-weight: bold !important;
            height: 30px !important;;
            width: 90px !important;;
        }
        .popupButtonCancel{
            background-color: #d82516 !important;
            background-image: none !important;
            color: white !important;
            font-size: 12.9pt !important;
            font-weight: bold !important;
            height: 30px !important;;
            width: 90px !important;;
        }
        .blankCell{
            width:5px;
        }
        .custPopup{
            background-color: #ededed;
            border-width: 0px;
            border-radius:10px;
            border-style: solid;
            z-index: 9999;
            left: 40%;
            margin-top:-60px;
            padding:10px;
            position: absolute;
            width:300px;
            height:130px;
        }
        .popupBackground{
            background-color:black;
            opacity: 0.50;
            filter: alpha(opacity = 20);
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 9998;
            top: 0;
            left: 0;
        }
        .white {
            background-color:white
        }
        .deletePopup{
            background-color: #EDEDED !important;
            border-top: 0px !important;
            text-align:center !important;
        }
        .deletePopupCancel{
            background-color: #EDEDED !important;
            border-top: 0px !important;
            text-align:left !important;
        }
        
        .pageContent {
            color: #4A4A56; 
            font-size: 0.9em; 
            font-weight: bold; 
            padding-left: 1px;
        }
        .pageDescription{
            font-size: 1.8em; 
            font-weight: normal;
            line-height: 1.1em;
        }
        .margin20{
            margin-left:1%;
            margin-bottom:16px;
            margin-top:16px;
            width:50%;
        }
        .stretch{
            margin-left:1%;
            margin-right:2%;
        }
            
        .h3{
            font-size:24px;
            margin-left:1%;
            margin-top:16px;
            font-weight:bold;
            margin-bottom:16px;
        }
        .h4{
            font-size:18px;
            margin-bottom:16px;
            margin-top:16px;
            font-weight:bold;
        }
        .help{
            font-size:18px;
            font-weight:bold;
            line-height:1.5;
            margin-right:20px;
        }
        .link{
            color:#2E7BBB;
        }
        .webkitright {
            text-align: right;
            white-space: nowrap;
        };
        .headerSearchContainer {
            margin-top: -20px !important;
        }    
        .phHeaderCustomLogo .headerSearchLeftRoundedCorner {
            margin-top: -20px !important;
        } 
        .webkitleft1 {
            height: 70px !important;
            width: 230px !important;
        };
    </style>
   
    <!--<apex:includeScript value="{!$Resource.GoalsJs/assets/js/bootstrap.js}" />-->
    <apex:includeScript value="{URLFOR(!$Resource.GoalsJs, 'assets/js/bootstrap.js')}" />  
  
     <script>
      $(document).ready(function () {      
          $('label.tree-toggler').click(function () {
              $(this).parent().children('ul.tree').toggle(300);
          });
          $("#phHeaderLogoImage").parents("table").find("td").eq(2).removeClass("right").addClass("webkitright");  
         
      });      
    </script>
    <!--<script src="assets/js/bootstrap.js">
    </script>-->
    
    <div class="h3">
        {!$label.Principal_Recipients}<!--Principal Recipients-->
        <span class="pull-right">
            <img src="/img/func_icons/util/info16.png" style="padding-bottom:5px"/>
            <apex:outputLink styleClass="link help" target="_blank" value="{!if((blnExternalPro),'/GM','')}/apex/CN_Guidance_New?id={!Page__c.Guidance__c}&lang={!strLanguage}">
                {!$Label.See_Help} <!--See Help-->
            </apex:outputLink>
        </span>
    </div>    
    <div class="margin20">
    <div id="Infopanel" class="alert alert-info">                        
         <button type="button" class="close" data-dismiss="alert" onclick="closePanel();">
              Ã—
         </button>
         <b>
              {!$label.Implementers_Instructions}    <!--Use this page to identify your Principal Recipients.-->
         </b>
    </div>
        <c:CNbreadcrumb recordId="{!Page__c.Id}"/>
        <chatter:feedWithFollowers id="chatterFeed" entityId="{!Page__c.Id}"/>
    </div>

    <apex:form id="frm">            
        <div class="containerTGF">
            <div class="row">
            <table width="100%">
            <tr>
              <td width="20%" valign="top" align="left">
                <!--START SIDEBAR-->  
                <c:Sidebar recordId="{!Page__c.Id}"/>                            
     <!--END SIDEBAR, START MAIN SECTION-->
                 </td>
                 <td valign="top" align="left">
                <div class="span9" style="margin-left:10px;">                
                <apex:outputPanel id="PRsPanel">                                      
                    <div class="h3">
                            {!$label.Principal_Recipients} <!--Principal Recipients-->
                    </div>
                    <table style="table-layout:fixed ; width : 959px;;" class="table table-striped" width="100%" cellspacing="0" cellpadding="0" border="0" >
                        <!-- <tbody> -->
                            <tr>
                                <th style="width :43px; white-space: normal;"  ></th>
                                <th style="width :154px; white-space: normal;"  >{!$label.Name} <!--Name--></th>
                                <th style="width :130px; white-space: normal;"  >{!$label.Grant} <!--Grant--></th>
                                <th style="width :100px; white-space: normal;"  >{!$label.PR_Type} <!--PR Type--></th>
                                <th style="width :90px; white-space: normal;"  >{!$label.PR_Sub_Type} <!--PR Sub-Type--></th>
                                <th style="width :64px; white-space: normal;"  >{!$label.Short_Name} <!--Short Name--></th>
                                <!--<th style="width :130px; white-space: normal;" >{!$label.Responsible_Reporting} </th>--> <!--<th>Responsible<br/>for Impact/<br/>Outcome<br/> Reporting</th>-->
                                <th  colspan="2" style="width :133px;" ></th> <!--110 above , on the same line 153-->
                            </tr>   
                            <apex:actionFunction action="{!UpdateCustomPR}" reRender="frm" status="Processing" name="actUpdateCustomPR">
                                <apex:param value="" name="SaveIndex" id="SaveIndex"/>
                            </apex:actionFunction>                    
                            <apex:variable var="Count" value="{!1}"/>
                            
                            <apex:repeat value="{!lstPrincipalRecipients}" var="Goals" id="rpt">
                                <tr>
                                    <td width="5%">
                                        <span class="badge badge-inverse">{!Count}</span>
                                    </td>
                                    <td width="18%">
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == false,true,false)}">
                                            <apex:outputText id="optGoalDec" value="{!Goals.PRDescription}" style="display:{!if(Goals.blnDisplay == true,'','none')}"/>
                                            <apex:inputText id="inpGoalDec" value="{!Goals.objAccount.Name}" style="height: 20px;width: 140px;resize:none;display:{!if(Goals.blnDisplay == true,'none','')}"/>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == true,true,false)}">
                                            <apex:outputText id="optGoalDecExisting" value="{!Goals.PRDescription}" />
                                        </apex:outputPanel>
                                    </td>
                                    <td width="12%">
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == false,true,false)}">
                                            <apex:outputText value="{!Goals.GrantName}" rendered="{!Goals.blnDisplay}"/>
                                            <apex:selectList value="{!Goals.GrantName}" style="width:130px;" size="1" rendered="{!!Goals.blnDisplay}">
                                                <apex:selectOptions value="{!Goals.GrantOptions}"></apex:selectOptions>
                                            </apex:selectList>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == true,true,false)}">
                                            <apex:outputText value="{!Goals.GrantName}"/>
                                        </apex:outputPanel>
                                    </td> 
                                    <td width="15%">
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == false,true,false)}">
                                            <apex:outputText id="optPRType" value="{!Goals.PRType}" style="display:{!if(Goals.blnDisplay == true,'','none')}"/>
                                            <!--<apex:selectList size="1" value="{!Goals.objAccount.Type__c}" style="20px;width:100px;resize:none;display:{!if(Goals.blnDisplay == true,'none','')};">
                                                <apex:selectOptions value="{!PRTypeOptions}"></apex:selectOptions>                                             
                                            </apex:selectList>-->
                                            <apex:inputField value="{!Goals.objAccount.Type__c}" style="width:100px;resize:none;display:{!if(Goals.blnDisplay == true,'none','')};"/>                                    
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == true,true,false)}">
                                            <apex:outputText value="{!Goals.PRType}"/>
                                        </apex:outputPanel>
                                    </td>                                    
                                    <td>
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == false,true,false)}">
                                            <apex:outputText id="optPRSubType" value="{!Goals.PRSubType}" style="display:{!if(Goals.blnDisplay == true,'','none')}"/>
                                            <!--<apex:selectList size="1" value="{!Goals.objAccount.Type__c}" style="20px;width:100px;resize:none;display:{!if(Goals.blnDisplay == true,'none','')};">
                                                <apex:selectOptions value="{!PRTypeOptions}"></apex:selectOptions>                                             
                                            </apex:selectList>-->
                                            <apex:inputField value="{!Goals.objAccount.Sub_Type__c}" style="width:100px;resize:none;" rendered="{!!Goals.blnDisplay}"/>                                    
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == true,true,false)}">
                                            <apex:outputText value="{!Goals.PRSubType}"/>
                                        </apex:outputPanel>
                                    </td>                                    
                                    <td width="15%">
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == false,true,false)}">
                                            <apex:outputText id="optPRshortname" value="{!Goals.PRshortname}" style="display:{!if(Goals.blnDisplay == true,'','none')}"/>
                                            <apex:inputText id="EditShortName" value="{!Goals.objAccount.Short_Name__c}" style="width:50px;resize:none;display:{!if(Goals.blnDisplay == true,'none','')}"/>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == true,true,false)}">
                                            <apex:outputText value="{!Goals.PRshortname}"/>
                                        </apex:outputPanel>
                                    </td>
                                    <!--<td align="center">
                                        <apex:inputHidden id="hndIOR" value="{!Goals.objAccount.Impact_Outcome_reporting__c}"/>
                                        <apex:outputPanel rendered="{!Goals.objAccount.Impact_Outcome_reporting__c}">
                                            <input id = "rbtn{!Count}read" type="radio"  checked="checked" disabled="{!if(Goals.blnDisplay == true,'disabled','')}"/>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!!Goals.objAccount.Impact_Outcome_reporting__c}">
                                            <apex:outputPanel rendered="{!if(Goals.blnDisplay == true,false,true)}"> 
                                                <input id ="rbtn{!Count}" type="radio" value="{!Goals.objAccount.Impact_Outcome_reporting__c}" onchange="check(this,'{!Count}');"/>
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!if(Goals.blnDisplay == false,false,true)}"> 
                                                <input type="radio" value="{!Goals.objAccount.Impact_Outcome_reporting__c}"  disabled="{!if(Goals.blnDisplay == true,'disabled','')}"/>
                                            </apex:outputPanel>
                                            <script>
                                                function check(objchk,count){
                                                    var count = count-1;
                                                    if (objchk.checked == true){
                                                        document.getElementById('page:frm:rpt:'+count+':hndIOR').value = true;
                                                    }
                                                    
                                                }
                                            </script>
                                       </apex:outputPanel>
                                    </td>-->                                      
                                    <td width="8%" style="padding-left: 0;padding-right: 5px;text-align: right;">
                                        <apex:commandLink title="{!$Label.Edit}" id="cmdLinkEditGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-primary" style="padding-top : 4px; padding-bottom : 4px ; max-width: 30px; max-height : 40px ;  display:{!if(AND(Goals.blnDisplay == true,blnEdit,!Goals.objAccount.Locked__c),'','none')};width:50px;" reRender="frm" action="{!EditGoal}"  status="Processing">                                            
                                            <!-- New button for Edit Remove comments below and edit the style tags --->                                                     
                                            <i class="icon-edit icon-white"></i>
                                            <strong><!--{!$Label.Edit} --Edit--></strong>
                                            <apex:param value="{!Count-1}" name="EditIndex" />
                                        </apex:commandLink>
                                        <apex:outputText value="{!$Label.Locked}" rendered="{!Goals.objAccount.Locked__c}"/>
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == false,true,false)}">
                                            <apex:commandLink id="cmdLinkSaveGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="display:{!if(Goals.blnDisplay == false && Goals.CustomPR == true,'','none')};width:50px;" onclick="return validateUpdateAccount('{!Count-1}','{!$Component.inpGoalDec}','{!$Component.EditShortName}');">
                                                <strong>{!$label.Save}<!--Save--></strong>
                                            </apex:commandLink>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!if(Goals.blnExistingPR == true,true,false)}">
                                            <apex:commandLink id="cmdLinkSaveGoalExisting" styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="display:{!if(Goals.blnDisplay == false && Goals.CustomPR == true,'','none')};width:50px;" onclick="return ExistingUpdateAccount('{!Count-1}');">
                                                <strong>{!$label.Save}<!--Save--></strong>
                                            </apex:commandLink>
                                        </apex:outputPanel>
                                    </td>
                                    <td width="12%" style="padding-left:0px;padding-right: 5px;text-align: left;">
                                        <apex:commandLink id="cmdLinkCancelGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="display:{!if(Goals.blnDisplay == false && Goals.CustomPR == true,'','none')};width:50px;" action="{!CancelGoal}" reRender="frm" status="Processing">
                                            <apex:param value="{!Count-1}" name="CancelIndex" />
                                            <strong>{!$Label.Cancel} <!--Cancel--></strong>                                            
                                        </apex:commandLink>
                                        <apex:commandLink title="{!$Label.Delete}" id="cmdLinkDeleteGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" onclick="return OpenPopup('{!$Component.tstpopup}');" style="padding-top : 4px; padding-bottom : 4px ; max-width: 30px; height : 40 ;  display:{!if(AND(Goals.blnDisplay == true, blnDelete,!Goals.objAccount.Locked__c),'','none')};width:60px;">
                                            <!-- New button for Delete Remove comments below and edit the style tags --->         
                                            <i class="icon-trash icon-white"></i> 
                                            <strong><!-- {!$Label.Delete} --Delete--></strong>                                            
                                        </apex:commandLink>
                                        
                                        <apex:outputPanel id="tstpopup" style="display:none;">
                                            <apex:outputPanel id="popupBackground" styleClass="popupBackground"/>
                                            <apex:outputPanel id="custPopup" styleClass="custPopup">
                                                <table width="100%" cellspacing="0" cellpadding="0" border="0" >
                                                    <tr>
                                                        <td colspan="3" class="deletePopup">
                                                            <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="{!$Label.Are_you_sure}"/> <!--Are you sure?-->
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="3" class="deletePopup">
                                                            <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="{!$Label.PR_Deletion_Warning}"/> <!--This PR will be deleted.-->
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td width="47%" class="deletePopup">
                                                            <apex:commandButton styleClass="popupButtonYes" value="{!$Label.Yes}" action="{!DeleteGoal}" reRender="frm" status="Processing">
                                                                <apex:param value="{!Count-1}" name="DeleteIndex" />
                                                            </apex:commandButton>
                                                        </td>
                                                        <td width="6%" class="deletePopup"></td>
                                                        <td width="47%" align="left" class="deletePopupCancel">
                                                            <apex:commandButton styleClass="popupButtonCancel" value="{!$Label.Cancel}" onclick="return ClosePopup('{!$Component.tstpopup}');"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                        <apex:variable var="Count" value="{!Count+1}"/>
                                    </td>
                                </tr>
                            </apex:repeat>
                            <tr id="AddExistingGoalNewRow" style="display:none;">
                                <td width="5%">
                                    <span class="badge badge-inverse">{!lstPrincipalRecipients.size+1}</span>
                                </td>
                                <td width="20%">
                                    <apex:actionFunction action="{!fillExistingAccountFields}" name="actfillExistingAccountFields" reRender="frm" status="Processing" oncomplete="AddNewExistingGoalUsingJS();">
                                        <!--<apex:param value="{!objNewExistingAccount.Name}" name="AccountId"/>-->
                                    </apex:actionfunction>
                                    <apex:selectList id="inpSelected" value="{!SelectedAccId}" size="1" onchange="actfillExistingAccountFields();">
                                        <apex:selectOptions value="{!AccountOptions}"></apex:selectOptions>
                                    </apex:selectList>                            
                                    <!--<apex:inputText value="{!objNewExistingAccount.Name}" style="height: 20px;width: 180px;resize:none;"/>-->
                                </td>
                                <td>
                                    <!-- ORG SERTTINGS 
                                    <apex:selectList id="inputSubSelected" value="{!GrantExistingName}" style="width:179px;" size="1"> -->
                                    
                                    <apex:selectList id="inputSubSelected" value="{!GrantExistingName}" style="width:130px;" size="1">
                                        <apex:selectOptions value="{!NewGrantExistingOptions}"></apex:selectOptions>
                                    </apex:selectList>
                                </td>
                                <td>
                                    <apex:outputtext id="OpAccType" value="{!objNewExistingAccount.Type__c}" style="20px;width:80px;resize:none;"/>
                                </td>
                                 <td>
                                    <apex:outputtext id="OpAccSubType" value="{!objNewExistingAccount.Sub_Type__c}" style="20px;width:80px;resize:none;"/>
                                </td>
                                <td>
                                    <apex:outputtext id="OpAccShortName" value="{!objNewExistingAccount.Short_Name__c}" style="20px;width:60px;resize:none;"/>
                                </td>
                                <!--<td>
                                    <apex:inputHidden id="hndRadioExisting" value="{!blnRadioExisting}"/>
                                    <!-- <input type="Hidden"  id="hndRadioExisting" value="{!objNewExistingAccount.Impact_Outcome_reporting__c}"/>-->
                                    <!--<apex:outputPanel rendered="{! !objNewExistingAccount.Impact_Outcome_reporting__c}">
                                        <input id = "rbtn0" type="radio" onchange="checkExisting(this);"/>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!objNewExistingAccount.Impact_Outcome_reporting__c}">
                                        <input id = "rbtn0" type="radio"   checked="checked"/>
                                    </apex:outputPanel>
                                    <script>
                                    function checkExisting(ele){
                                        if (ele.checked == true){
                                            document.getElementById('page:frm:hndRadioExisting').value = true;
                                        }
                                    }
                                    </script>
                                       
                                </td>-->
                                <td width="8%" style="padding-left: 0;padding-right: 5px;text-align: right;">
                                    <apex:actionFunction name="actSaveGoalExisting" action="{!SaveGoalExisting}" reRender="frm" status="Processing">
                                        <apex:param value="{!lstPrincipalRecipients.size+1}" name="SaveIndex" />
                                    </apex:actionFunction>
                                    
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:37px;" onclick="return ValidateSave1('{!$Component.inpSelected}');" >
                                        <strong>{!$Label.Save}</strong>
                                    </apex:commandLink>
                                </td>
                                <td width="8%" style="padding-left:0px;padding-right: 5px;text-align: left;">
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" onclick="return CancelNewExistingGoalRow();"> <!-- action="{!CancelGoal}" reRender="frm" status="Processing">-->
                                        <strong>{!$Label.Cancel}</strong>
                                        <apex:param value="{!lstPrincipalRecipients.size+1}" name="CancelIndex" />
                                    </apex:commandLink>
                                </td>
                            </tr>
                            
                            <tr id="AddGoalBtntr">
                                <td colspan="4" style="padding-left:10px;padding-right: 5px;">
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return AddNewExistingGoalUsingJS();" style="margin-right:10px;" rendered="{!blnAddExistingPR}">
                                        <i class="icon-plus-sign icon-white"></i>
                                        <strong>{!$Label.Add_PR}</strong>
                                    </apex:commandLink>
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return AddNewGoalUsingJS();" rendered="false">
                                        <i class="icon-plus-sign icon-white"></i>
                                        <strong>{!$Label.Add_New_PR}</strong>
                                    </apex:commandLink>
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return openPRPopup();" target="_blank" rendered="{!blnAddNewPR}">
                                        <i class="icon-plus-sign icon-white"></i>
                                        <strong>{!$Label.Add_New_PR}</strong>
                                    </apex:commandLink>
                                <script>
                                
                                function openPRPopup() {
                                    window.open("{!strPopupURL}{!if(CONTAINS($Profile.Name,'PR')||CONTAINS($Profile.Name,'LFA')||CONTAINS($Profile.Name,'CM')||CONTAINS($Profile.Name,'CCM'),'&GM=yes','&GM=no')}","_blank","toolbar=yes, scrollbars=yes, resizable=no, top=100, left=300, width=600, height=400");
                                    return false;
                                }
                                
                                </script>
                                </td>
                                <td colspan="4"></td>
                           </tr>
                         <!--</tbody>-->
                    </table>
                    <hr></hr>
                    </apex:outputPanel>                    
                <!-- End of right content -->
                </div>
                <!-- end of wrapping table -->
                  </td>
                </tr>
              </table>
            <!-- /end of right-left row -->
            </div>
        <!-- /container -->
        </div>
        <style>
        .ProcessingBackground
        {
            background-color: black;
            opacity: 0.50;
            filter: alpha(opacity = 50);
            width: 100%;
            height: 100%;
            position: fixed;
            z-index: 9999;
            top:0;
            left:0;
        }
        .Processing
        {
            z-index: 9999;
            left: 50%;
            top: 50%;
            text-align: center;
            position: fixed;
        }        
        </style>
        <div id="divProcessing" style="display:none;">
            <div class="ProcessingBackground"></div>
            <div class="Processing">
                <apex:image alt="Processing" url="{!$Resource.LoadingCircle}" />
            </div>
        </div>  
        <apex:actionStatus id="Processing" onstart="document.getElementById('divProcessing').style.display = '';" onstop="document.getElementById('divProcessing').style.display = 'none';">                            
        </apex:actionStatus> 
        
        <script>
            
            function SetStringAddGoal(panelId,setAdd){
           
                var spans = document.getElementById(panelId).childNodes;
                var addStr = '';
                for(var i=0;i<spans.length;i++){
                    if(spans[i].tagName == 'SPAN'){
                        if(spans[i].className.indexOf('badge badge-inverse') != -1){
                            if(addStr == '') addStr = spans[i].id;
                            else addStr += ','+spans[i].id;
                        }
                    }
                }
                return addStr;
            }
            function OpenPopup(PopupPanelId){
                document.getElementById(PopupPanelId).style.display = '';
                return false;
            }
            function ClosePopup(PopupPanelId){
                document.getElementById(PopupPanelId).style.display = 'none';
                return false;
            }
            function closePanel(){
                document.getElementById('Infopanel').style.display = 'none';
            }
            
            function AddNewGoalUsingJS(){
                document.getElementById('AddGoalNewRow').style.display = '';
                document.getElementById('AddGoalBtntr').style.display = 'none';
                return false;
            }
            function AddNewExistingGoalUsingJS(){
                document.getElementById('AddExistingGoalNewRow').style.display = '';
                document.getElementById('AddGoalBtntr').style.display = 'none';
                return false;
            }
            
            function CancelNewGoalRow(){
                document.getElementById('AddGoalNewRow').style.display = 'none';
                document.getElementById('AddGoalBtntr').style.display = '';
                document.getElementById('page:frm:inpName').value = '';
                document.getElementById('page:frm:inptAccountType').value = '';
                document.getElementById('page:frm:subtypenewmy').value = '';
                document.getElementById('page:frm:inpShortName').value = '';
                document.getElementById('rbtnNew').checked = false;
                
                return false;
            }
            function CancelNewExistingGoalRow(){
                document.getElementById('AddExistingGoalNewRow').style.display = 'none';
                document.getElementById('AddGoalBtntr').style.display = '';
                document.getElementById('page:frm:inpSelected').value = '';
                document.getElementById('page:frm:inputSubSelected').value = '';
                document.getElementById('page:frm:OpAccType').innerHTML = '';
                document.getElementById('page:frm:OpAccSubType').innerHTML = '';
                document.getElementById('page:frm:OpAccShortName').innerHTML = '';
                document.getElementById('rbtn0').checked = false;

                return false;
            }
            function EditExistGoal(optGoalDec,inpGoalDec,EditLink,SaveLink,CancelLink,DeleteLink){
                document.getElementById(optGoalDec).style.display = 'none';
                document.getElementById(inpGoalDec).style.display = '';
                document.getElementById(EditLink).style.display = 'none';
                document.getElementById(SaveLink).style.display = '';
                document.getElementById(CancelLink).style.display = '';
                document.getElementById(DeleteLink).style.display = 'none';
                return false;
            }
            
            function CancelExistGoal(optGoalDec,inpGoalDec,EditLink,SaveLink,CancelLink,DeleteLink){
                document.getElementById(optGoalDec).style.display = '';
                document.getElementById(inpGoalDec).style.display = 'none';
                document.getElementById(EditLink).style.display = '';
                document.getElementById(SaveLink).style.display = 'none';
                document.getElementById(CancelLink).style.display = 'none';
                document.getElementById(DeleteLink).style.display = '';
                return false;
            }
            function ValidateSave(Name,shortName){
                if(document.getElementById(Name).value == ''){
                    alert('You must enter an Account Name');
                }else if(document.getElementById(shortName).value == ''){
                    alert('{!$Label.Enter_Account_Short_Name}');
                }else{
                    actSaveGoal();
                }
                return false;
            }
            function validateUpdateAccount(SaveIndex,Name,shortName){
                if(document.getElementById(Name).value == ''){
                    alert('{!$Label.Enter_Account_Name}');
                }else if(document.getElementById(shortName).value == ''){
                    alert('{!$Label.Enter_Account_Short_Name}');
                }else{
                    actUpdateCustomPR(SaveIndex);
                }
                return false;
            }
            function ExistingUpdateAccount(SaveIndex){
                actUpdateCustomPR(SaveIndex);
                return false;
            }
            
            function ValidateSave1(Selected){
                if(document.getElementById(Selected).value != ''){
                    actSaveGoalExisting();
                    return false;
                }else{
                    alert('{!$Label.Enter_Account_Name}');
                    return false;
                }
            }
           function switchMenu(obj,obj1,obj2,hdn,val) 
        {   
            var AllLI = document.getElementsByTagName('li');
            for(var i=0;i<AllLI.length;i++){
                if(AllLI[i].id == obj){
                    if(AllLI[i].style.display != 'none'){
                        AllLI[i].style.display = 'none';
                    }else{
                        AllLI[i].style.display = '';
                    }
                }
            }
            document.getElementById(hdn).value=val; 
            
            var e2 = document.getElementById(obj1);                                       
            if ( e2.style.display != 'none' ) {
                e2.style.display = 'none';
            }
            else {
                e2.style.display = '';
            }
            var e3 = document.getElementById(obj2);                                       
            if ( e2.style.display != 'none' ) {
                e3.style.display = 'none';
            }
            else {
                e3.style.display = '';
            }
        }     
            
        </script>
        <!-- <script type="text/javascript">
     
        $j(document).ready(function() {
           alert('Select');
                $j('#page:frm:subtypenewmy').each(function(i, val) { 
                    $j(val).width(100);
                    $j(val).height(300);
                });

        });
    </script>-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
    <!--<script type="text/javascript">
        var $j = jQuery.noConflict();
        $j(document).ready(function() {
            setTimeout(function() {
                $j('select.selectdata').each(function(i, val) { 
                    $j(val).width(20);
                    $j(val).height(300);
                })
            },100);
            document.getElementById('page:frm:subtypenewmy').style.width = '20px';
        });
    </script>-->
    </apex:form>
</apex:page>